(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const t of l)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(l){const t={};return l.integrity&&(t.integrity=l.integrity),l.referrerPolicy&&(t.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?t.credentials="include":l.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(l){if(l.ep)return;l.ep=!0;const t=s(l);fetch(l.href,t)}})();const equalFn=(e,n)=>e===n,$PROXY=Symbol("solid-proxy"),$TRACK=Symbol("solid-track"),signalOptions={equals:equalFn};let runEffects=runQueue;const STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null},NO_INIT={};var Owner=null;let Transition=null,ExternalSourceConfig=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createRoot(e,n){const s=Listener,o=Owner,l=e.length===0,t=n===void 0?o:n,c=l?UNOWNED:{owned:null,cleanups:null,context:t?t.context:null,owner:t},a=l?e:()=>e(()=>untrack(()=>cleanNode(c)));Owner=c,Listener=null;try{return runUpdates(a,!0)}finally{Listener=s,Owner=o}}function createSignal(e,n){n=n?Object.assign({},signalOptions,n):signalOptions;const s={value:e,observers:null,observerSlots:null,comparator:n.equals||void 0},o=l=>(typeof l=="function"&&(l=l(s.value)),writeSignal(s,l));return[readSignal.bind(s),o]}function createComputed(e,n,s){const o=createComputation(e,n,!0,STALE);updateComputation(o)}function createRenderEffect(e,n,s){const o=createComputation(e,n,!1,STALE);updateComputation(o)}function createEffect(e,n,s){runEffects=runUserEffects;const o=createComputation(e,n,!1,STALE);o.user=!0,Effects?Effects.push(o):updateComputation(o)}function createMemo(e,n,s){s=s?Object.assign({},signalOptions,s):signalOptions;const o=createComputation(e,n,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=s.equals||void 0,updateComputation(o),readSignal.bind(o)}function isPromise(e){return e&&typeof e=="object"&&"then"in e}function createResource(e,n,s){let o,l,t;arguments.length===2&&typeof n=="object"||arguments.length===1?(o=!0,l=e,t=n||{}):(o=e,l=n,t={});let c=null,a=NO_INIT,_=!1,f="initialValue"in t,S=typeof o=="function"&&createMemo(o);const y=new Set,[w,k]=(t.storage||createSignal)(t.initialValue),[O,R]=createSignal(void 0),[L,P]=createSignal(void 0,{equals:!1}),[N,v]=createSignal(f?"ready":"unresolved");function C(g,u,b,m){return c===g&&(c=null,m!==void 0&&(f=!0),(g===a||u===a)&&t.onHydrated&&queueMicrotask(()=>t.onHydrated(m,{value:u})),a=NO_INIT,h(u,b)),u}function h(g,u){runUpdates(()=>{u===void 0&&k(()=>g),v(u!==void 0?"errored":f?"ready":"unresolved"),R(u);for(const b of y.keys())b.decrement();y.clear()},!1)}function i(){const g=SuspenseContext,u=w(),b=O();if(b!==void 0&&!c)throw b;return Listener&&!Listener.user&&g&&createComputed(()=>{L(),c&&(g.resolved||y.has(g)||(g.increment(),y.add(g)))}),u}function p(g=!0){if(g!==!1&&_)return;_=!1;const u=S?S():o;if(u==null||u===!1){C(c,untrack(w));return}const b=a!==NO_INIT?a:untrack(()=>l(u,{value:w(),refetching:g}));return isPromise(b)?(c=b,"value"in b?(b.status==="success"?C(c,b.value,void 0,u):C(c,void 0,void 0,u),b):(_=!0,queueMicrotask(()=>_=!1),runUpdates(()=>{v(f?"refreshing":"pending"),P()},!1),b.then(m=>C(b,m,void 0,u),m=>C(b,void 0,castError(m),u)))):(C(c,b,void 0,u),b)}return Object.defineProperties(i,{state:{get:()=>N()},error:{get:()=>O()},loading:{get(){const g=N();return g==="pending"||g==="refreshing"}},latest:{get(){if(!f)return i();const g=O();if(g&&!c)throw g;return w()}}}),S?createComputed(()=>p(!1)):p(!1),[i,{refetch:p,mutate:k}]}function createSelector(e,n=equalFn,s){const o=new Map,l=createComputation(t=>{const c=e();for(const[a,_]of o.entries())if(n(a,c)!==n(a,t))for(const f of _.values())f.state=STALE,f.pure?Updates.push(f):Effects.push(f);return c},void 0,!0,STALE);return updateComputation(l),t=>{const c=Listener;if(c){let a;(a=o.get(t))?a.add(c):o.set(t,a=new Set([c])),onCleanup(()=>{a.delete(c),!a.size&&o.delete(t)})}return n(t,l.value)}}function batch(e){return runUpdates(e,!1)}function untrack(e){if(Listener===null)return e();const n=Listener;Listener=null;try{return e()}finally{Listener=n}}function on(e,n,s){const o=Array.isArray(e);let l;return t=>{let c;if(o){c=Array(e.length);for(let _=0;_<e.length;_++)c[_]=e[_]()}else c=e();const a=untrack(()=>n(c,l,t));return l=c,a}}function onMount(e){createEffect(()=>untrack(e))}function onCleanup(e){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[e]:Owner.cleanups.push(e)),e}function getListener(){return Listener}function createContext(e,n){const s=Symbol("context");return{id:s,Provider:createProvider(s),defaultValue:e}}function useContext(e){return Owner&&Owner.context&&Owner.context[e.id]!==void 0?Owner.context[e.id]:e.defaultValue}function children(e){const n=createMemo(e),s=createMemo(()=>resolveChildren(n()));return s.toArray=()=>{const o=s();return Array.isArray(o)?o:o!=null?[o]:[]},s}let SuspenseContext;function readSignal(){if(this.sources&&this.state)if(this.state===STALE)updateComputation(this);else{const e=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=e}if(Listener){const e=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(e)):(Listener.sources=[this],Listener.sourceSlots=[e]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(e,n,s){let o=e.value;return(!e.comparator||!e.comparator(o,n))&&(e.value=n,e.observers&&e.observers.length&&runUpdates(()=>{for(let l=0;l<e.observers.length;l+=1){const t=e.observers[l],c=Transition&&Transition.running;c&&Transition.disposed.has(t),(c?!t.tState:!t.state)&&(t.pure?Updates.push(t):Effects.push(t),t.observers&&markDownstream(t)),c||(t.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)),n}function updateComputation(e){if(!e.fn)return;cleanNode(e);const n=ExecCount;runComputation(e,e.value,n)}function runComputation(e,n,s){let o;const l=Owner,t=Listener;Listener=Owner=e;try{o=e.fn(n)}catch(c){return e.pure&&(e.state=STALE,e.owned&&e.owned.forEach(cleanNode),e.owned=null),e.updatedAt=s+1,handleError(c)}finally{Listener=t,Owner=l}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?writeSignal(e,o):e.value=o,e.updatedAt=s)}function createComputation(e,n,s,o=STALE,l){const t={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:Owner,context:Owner?Owner.context:null,pure:s};return Owner===null||Owner!==UNOWNED&&(Owner.owned?Owner.owned.push(t):Owner.owned=[t]),t}function runTop(e){if(e.state===0)return;if(e.state===PENDING)return lookUpstream(e);if(e.suspense&&untrack(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ExecCount);)e.state&&n.push(e);for(let s=n.length-1;s>=0;s--)if(e=n[s],e.state===STALE)updateComputation(e);else if(e.state===PENDING){const o=Updates;Updates=null,runUpdates(()=>lookUpstream(e,n[0]),!1),Updates=o}}function runUpdates(e,n){if(Updates)return e();let s=!1;n||(Updates=[]),Effects?s=!0:Effects=[],ExecCount++;try{const o=e();return completeUpdates(s),o}catch(o){s||(Effects=null),Updates=null,handleError(o)}}function completeUpdates(e){if(Updates&&(runQueue(Updates),Updates=null),e)return;const n=Effects;Effects=null,n.length&&runUpdates(()=>runEffects(n),!1)}function runQueue(e){for(let n=0;n<e.length;n++)runTop(e[n])}function runUserEffects(e){let n,s=0;for(n=0;n<e.length;n++){const o=e[n];o.user?e[s++]=o:runTop(o)}for(n=0;n<s;n++)runTop(e[n])}function lookUpstream(e,n){e.state=0;for(let s=0;s<e.sources.length;s+=1){const o=e.sources[s];if(o.sources){const l=o.state;l===STALE?o!==n&&(!o.updatedAt||o.updatedAt<ExecCount)&&runTop(o):l===PENDING&&lookUpstream(o,n)}}}function markDownstream(e){for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];s.state||(s.state=PENDING,s.pure?Updates.push(s):Effects.push(s),s.observers&&markDownstream(s))}}function cleanNode(e){let n;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),o=e.sourceSlots.pop(),l=s.observers;if(l&&l.length){const t=l.pop(),c=s.observerSlots.pop();o<l.length&&(t.sourceSlots[c]=o,l[o]=t,s.observerSlots[o]=c)}}if(e.owned){for(n=e.owned.length-1;n>=0;n--)cleanNode(e.owned[n]);e.owned=null}if(e.cleanups){for(n=e.cleanups.length-1;n>=0;n--)e.cleanups[n]();e.cleanups=null}e.state=0}function castError(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function handleError(e,n=Owner){throw castError(e)}function resolveChildren(e){if(typeof e=="function"&&!e.length)return resolveChildren(e());if(Array.isArray(e)){const n=[];for(let s=0;s<e.length;s++){const o=resolveChildren(e[s]);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return n}return e}function createProvider(e,n){return function(o){let l;return createRenderEffect(()=>l=untrack(()=>(Owner.context={...Owner.context,[e]:o.value},children(()=>o.children))),void 0),l}}const FALLBACK$1=Symbol("fallback");function dispose$1(e){for(let n=0;n<e.length;n++)e[n]()}function mapArray(e,n,s={}){let o=[],l=[],t=[],c=0,a=n.length>1?[]:null;return onCleanup(()=>dispose$1(t)),()=>{let _=e()||[],f,S;return _[$TRACK],untrack(()=>{let w=_.length,k,O,R,L,P,N,v,C,h;if(w===0)c!==0&&(dispose$1(t),t=[],o=[],l=[],c=0,a&&(a=[])),s.fallback&&(o=[FALLBACK$1],l[0]=createRoot(i=>(t[0]=i,s.fallback())),c=1);else if(c===0){for(l=new Array(w),S=0;S<w;S++)o[S]=_[S],l[S]=createRoot(y);c=w}else{for(R=new Array(w),L=new Array(w),a&&(P=new Array(w)),N=0,v=Math.min(c,w);N<v&&o[N]===_[N];N++);for(v=c-1,C=w-1;v>=N&&C>=N&&o[v]===_[C];v--,C--)R[C]=l[v],L[C]=t[v],a&&(P[C]=a[v]);for(k=new Map,O=new Array(C+1),S=C;S>=N;S--)h=_[S],f=k.get(h),O[S]=f===void 0?-1:f,k.set(h,S);for(f=N;f<=v;f++)h=o[f],S=k.get(h),S!==void 0&&S!==-1?(R[S]=l[f],L[S]=t[f],a&&(P[S]=a[f]),S=O[S],k.set(h,S)):t[f]();for(S=N;S<w;S++)S in R?(l[S]=R[S],t[S]=L[S],a&&(a[S]=P[S],a[S](S))):l[S]=createRoot(y);l=l.slice(0,c=w),o=_.slice(0)}return l});function y(w){if(t[S]=w,a){const[k,O]=createSignal(S);return a[S]=O,n(_[S],k)}return n(_[S])}}}function indexArray(e,n,s={}){let o=[],l=[],t=[],c=[],a=0,_;return onCleanup(()=>dispose$1(t)),()=>{const f=e()||[];return f[$TRACK],untrack(()=>{if(f.length===0)return a!==0&&(dispose$1(t),t=[],o=[],l=[],a=0,c=[]),s.fallback&&(o=[FALLBACK$1],l[0]=createRoot(y=>(t[0]=y,s.fallback())),a=1),l;for(o[0]===FALLBACK$1&&(t[0](),t=[],o=[],l=[],a=0),_=0;_<f.length;_++)_<o.length&&o[_]!==f[_]?c[_](()=>f[_]):_>=o.length&&(l[_]=createRoot(S));for(;_<o.length;_++)t[_]();return a=c.length=t.length=f.length,o=f.slice(0),l=l.slice(0,a)});function S(y){t[_]=y;const[w,k]=createSignal(f[_]);return c[_]=k,n(w,_)}}}function createComponent(e,n){return untrack(()=>e(n||{}))}function trueFn(){return!0}const propTraps={get(e,n,s){return n===$PROXY?s:e.get(n)},has(e,n){return n===$PROXY?!0:e.has(n)},set:trueFn,deleteProperty:trueFn,getOwnPropertyDescriptor(e,n){return{configurable:!0,enumerable:!0,get(){return e.get(n)},set:trueFn,deleteProperty:trueFn}},ownKeys(e){return e.keys()}};function resolveSource(e){return(e=typeof e=="function"?e():e)?e:{}}function resolveSources(){for(let e=0,n=this.length;e<n;++e){const s=this[e]();if(s!==void 0)return s}}function mergeProps(...e){let n=!1;for(let c=0;c<e.length;c++){const a=e[c];n=n||!!a&&$PROXY in a,e[c]=typeof a=="function"?(n=!0,createMemo(a)):a}if(n)return new Proxy({get(c){for(let a=e.length-1;a>=0;a--){const _=resolveSource(e[a])[c];if(_!==void 0)return _}},has(c){for(let a=e.length-1;a>=0;a--)if(c in resolveSource(e[a]))return!0;return!1},keys(){const c=[];for(let a=0;a<e.length;a++)c.push(...Object.keys(resolveSource(e[a])));return[...new Set(c)]}},propTraps);const s={},o=Object.create(null);for(let c=e.length-1;c>=0;c--){const a=e[c];if(!a)continue;const _=Object.getOwnPropertyNames(a);for(let f=_.length-1;f>=0;f--){const S=_[f];if(S==="__proto__"||S==="constructor")continue;const y=Object.getOwnPropertyDescriptor(a,S);if(!o[S])o[S]=y.get?{enumerable:!0,configurable:!0,get:resolveSources.bind(s[S]=[y.get.bind(a)])}:y.value!==void 0?y:void 0;else{const w=s[S];w&&(y.get?w.push(y.get.bind(a)):y.value!==void 0&&w.push(()=>y.value))}}}const l={},t=Object.keys(o);for(let c=t.length-1;c>=0;c--){const a=t[c],_=o[a];_&&_.get?Object.defineProperty(l,a,_):l[a]=_?_.value:void 0}return l}function splitProps(e,...n){if($PROXY in e){const l=new Set(n.length>1?n.flat():n[0]),t=n.map(c=>new Proxy({get(a){return c.includes(a)?e[a]:void 0},has(a){return c.includes(a)&&a in e},keys(){return c.filter(a=>a in e)}},propTraps));return t.push(new Proxy({get(c){return l.has(c)?void 0:e[c]},has(c){return l.has(c)?!1:c in e},keys(){return Object.keys(e).filter(c=>!l.has(c))}},propTraps)),t}const s={},o=n.map(()=>({}));for(const l of Object.getOwnPropertyNames(e)){const t=Object.getOwnPropertyDescriptor(e,l),c=!t.get&&!t.set&&t.enumerable&&t.writable&&t.configurable;let a=!1,_=0;for(const f of n)f.includes(l)&&(a=!0,c?o[_][l]=t.value:Object.defineProperty(o[_],l,t)),++_;a||(c?s[l]=t.value:Object.defineProperty(s,l,t))}return[...o,s]}const narrowedError=e=>`Stale read from <${e}>.`;function For(e){const n="fallback"in e&&{fallback:()=>e.fallback};return createMemo(mapArray(()=>e.each,e.children,n||void 0))}function Index(e){const n="fallback"in e&&{fallback:()=>e.fallback};return createMemo(indexArray(()=>e.each,e.children,n||void 0))}function Show(e){const n=e.keyed,s=createMemo(()=>e.when,void 0,{equals:(o,l)=>n?o===l:!o==!l});return createMemo(()=>{const o=s();if(o){const l=e.children;return typeof l=="function"&&l.length>0?untrack(()=>l(n?o:()=>{if(!untrack(s))throw narrowedError("Show");return e.when})):l}return e.fallback},void 0,void 0)}function Switch(e){let n=!1;const s=(t,c)=>(n?t[1]===c[1]:!t[1]==!c[1])&&t[2]===c[2],o=children(()=>e.children),l=createMemo(()=>{let t=o();Array.isArray(t)||(t=[t]);for(let c=0;c<t.length;c++){const a=t[c].when;if(a)return n=!!t[c].keyed,[c,a,t[c]]}return[-1]},void 0,{equals:s});return createMemo(()=>{const[t,c,a]=l();if(t<0)return e.fallback;const _=a.children;return typeof _=="function"&&_.length>0?untrack(()=>_(n?c:()=>{if(untrack(l)[0]!==t)throw narrowedError("Match");return a.when})):_},void 0,void 0)}function Match(e){return e}const booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function getPropAlias(e,n){const s=PropAliases[e];return typeof s=="object"?s[n]?s.$:void 0:s}const DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function reconcileArrays(e,n,s){let o=s.length,l=n.length,t=o,c=0,a=0,_=n[l-1].nextSibling,f=null;for(;c<l||a<t;){if(n[c]===s[a]){c++,a++;continue}for(;n[l-1]===s[t-1];)l--,t--;if(l===c){const S=t<o?a?s[a-1].nextSibling:s[t-a]:_;for(;a<t;)e.insertBefore(s[a++],S)}else if(t===a)for(;c<l;)(!f||!f.has(n[c]))&&n[c].remove(),c++;else if(n[c]===s[t-1]&&s[a]===n[l-1]){const S=n[--l].nextSibling;e.insertBefore(s[a++],n[c++].nextSibling),e.insertBefore(s[--t],S),n[l]=s[t]}else{if(!f){f=new Map;let y=a;for(;y<t;)f.set(s[y],y++)}const S=f.get(n[c]);if(S!=null)if(a<S&&S<t){let y=c,w=1,k;for(;++y<l&&y<t&&!((k=f.get(n[y]))==null||k!==S+w);)w++;if(w>S-a){const O=n[c];for(;a<S;)e.insertBefore(s[a++],O)}else e.replaceChild(s[a++],n[c++])}else c++;else n[c++].remove()}}}const $$EVENTS="_$DX_DELEGATE";function render(e,n,s,o={}){let l;return createRoot(t=>{l=t,n===document?e():insert(n,e(),n.firstChild?null:void 0,s)},o.owner),()=>{l(),n.textContent=""}}function template(e,n,s){let o;const l=()=>{const c=document.createElement("template");return c.innerHTML=e,c.content.firstChild},t=()=>(o||(o=l())).cloneNode(!0);return t.cloneNode=t,t}function delegateEvents(e,n=window.document){const s=n[$$EVENTS]||(n[$$EVENTS]=new Set);for(let o=0,l=e.length;o<l;o++){const t=e[o];s.has(t)||(s.add(t),n.addEventListener(t,eventHandler))}}function setAttribute(e,n,s){s==null?e.removeAttribute(n):e.setAttribute(n,s)}function className(e,n){n==null?e.removeAttribute("class"):e.className=n}function addEventListener(e,n,s,o){if(o)Array.isArray(s)?(e[`$$${n}`]=s[0],e[`$$${n}Data`]=s[1]):e[`$$${n}`]=s;else if(Array.isArray(s)){const l=s[0];e.addEventListener(n,s[0]=t=>l.call(e,s[1],t))}else e.addEventListener(n,s)}function classList(e,n,s={}){const o=Object.keys(n||{}),l=Object.keys(s);let t,c;for(t=0,c=l.length;t<c;t++){const a=l[t];!a||a==="undefined"||n[a]||(toggleClassKey(e,a,!1),delete s[a])}for(t=0,c=o.length;t<c;t++){const a=o[t],_=!!n[a];!a||a==="undefined"||s[a]===_||!_||(toggleClassKey(e,a,!0),s[a]=_)}return s}function style(e,n,s){if(!n)return s?setAttribute(e,"style"):n;const o=e.style;if(typeof n=="string")return o.cssText=n;typeof s=="string"&&(o.cssText=s=void 0),s||(s={}),n||(n={});let l,t;for(t in s)n[t]==null&&o.removeProperty(t),delete s[t];for(t in n)l=n[t],l!==s[t]&&(o.setProperty(t,l),s[t]=l);return s}function spread(e,n={},s,o){const l={};return o||createRenderEffect(()=>l.children=insertExpression(e,n.children,l.children)),createRenderEffect(()=>typeof n.ref=="function"?use(n.ref,e):n.ref=e),createRenderEffect(()=>assign(e,n,s,!0,l,!0)),l}function use(e,n,s){return untrack(()=>e(n,s))}function insert(e,n,s,o){if(s!==void 0&&!o&&(o=[]),typeof n!="function")return insertExpression(e,n,o,s);createRenderEffect(l=>insertExpression(e,n(),l,s),o)}function assign(e,n,s,o,l={},t=!1){n||(n={});for(const c in l)if(!(c in n)){if(c==="children")continue;l[c]=assignProp(e,c,null,l[c],s,t)}for(const c in n){if(c==="children")continue;const a=n[c];l[c]=assignProp(e,c,a,l[c],s,t)}}function toPropertyName(e){return e.toLowerCase().replace(/-([a-z])/g,(n,s)=>s.toUpperCase())}function toggleClassKey(e,n,s){const o=n.trim().split(/\s+/);for(let l=0,t=o.length;l<t;l++)e.classList.toggle(o[l],s)}function assignProp(e,n,s,o,l,t){let c,a,_,f,S;if(n==="style")return style(e,s,o);if(n==="classList")return classList(e,s,o);if(s===o)return o;if(n==="ref")t||s(e);else if(n.slice(0,3)==="on:"){const y=n.slice(3);o&&e.removeEventListener(y,o),s&&e.addEventListener(y,s)}else if(n.slice(0,10)==="oncapture:"){const y=n.slice(10);o&&e.removeEventListener(y,o,!0),s&&e.addEventListener(y,s,!0)}else if(n.slice(0,2)==="on"){const y=n.slice(2).toLowerCase(),w=DelegatedEvents.has(y);if(!w&&o){const k=Array.isArray(o)?o[0]:o;e.removeEventListener(y,k)}(w||s)&&(addEventListener(e,y,s,w),w&&delegateEvents([y]))}else n.slice(0,5)==="attr:"?setAttribute(e,n.slice(5),s):(S=n.slice(0,5)==="prop:")||(_=ChildProperties.has(n))||(f=getPropAlias(n,e.tagName))||(a=Properties.has(n))||(c=e.nodeName.includes("-"))?(S&&(n=n.slice(5),a=!0),n==="class"||n==="className"?className(e,s):c&&!a&&!_?e[toPropertyName(n)]=s:e[f||n]=s):setAttribute(e,Aliases[n]||n,s);return s}function eventHandler(e){const n=`$$${e.type}`;let s=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==s&&Object.defineProperty(e,"target",{configurable:!0,value:s}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return s||document}});s;){const o=s[n];if(o&&!s.disabled){const l=s[`${n}Data`];if(l!==void 0?o.call(s,l,e):o.call(s,e),e.cancelBubble)return}s=s._$host||s.parentNode||s.host}}function insertExpression(e,n,s,o,l){for(;typeof s=="function";)s=s();if(n===s)return s;const t=typeof n,c=o!==void 0;if(e=c&&s[0]&&s[0].parentNode||e,t==="string"||t==="number")if(t==="number"&&(n=n.toString()),c){let a=s[0];a&&a.nodeType===3?a.data!==n&&(a.data=n):a=document.createTextNode(n),s=cleanChildren(e,s,o,a)}else s!==""&&typeof s=="string"?s=e.firstChild.data=n:s=e.textContent=n;else if(n==null||t==="boolean")s=cleanChildren(e,s,o);else{if(t==="function")return createRenderEffect(()=>{let a=n();for(;typeof a=="function";)a=a();s=insertExpression(e,a,s,o)}),()=>s;if(Array.isArray(n)){const a=[],_=s&&Array.isArray(s);if(normalizeIncomingArray(a,n,s,l))return createRenderEffect(()=>s=insertExpression(e,a,s,o,!0)),()=>s;if(a.length===0){if(s=cleanChildren(e,s,o),c)return s}else _?s.length===0?appendNodes(e,a,o):reconcileArrays(e,s,a):(s&&cleanChildren(e),appendNodes(e,a));s=a}else if(n.nodeType){if(Array.isArray(s)){if(c)return s=cleanChildren(e,s,o,n);cleanChildren(e,s,null,n)}else s==null||s===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);s=n}}return s}function normalizeIncomingArray(e,n,s,o){let l=!1;for(let t=0,c=n.length;t<c;t++){let a=n[t],_=s&&s[e.length],f;if(!(a==null||a===!0||a===!1))if((f=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))l=normalizeIncomingArray(e,a,_)||l;else if(f==="function")if(o){for(;typeof a=="function";)a=a();l=normalizeIncomingArray(e,Array.isArray(a)?a:[a],Array.isArray(_)?_:[_])||l}else e.push(a),l=!0;else{const S=String(a);_&&_.nodeType===3&&_.data===S?e.push(_):e.push(document.createTextNode(S))}}return l}function appendNodes(e,n,s=null){for(let o=0,l=n.length;o<l;o++)e.insertBefore(n[o],s)}function cleanChildren(e,n,s,o){if(s===void 0)return e.textContent="";const l=o||document.createTextNode("");if(n.length){let t=!1;for(let c=n.length-1;c>=0;c--){const a=n[c];if(l!==a){const _=a.parentNode===e;!t&&!c?_?e.replaceChild(l,a):e.insertBefore(l,s):_&&a.remove()}else t=!0}}else e.insertBefore(l,s);return[l]}var _tmpl$$4=template("<span>"),cursor=(e,n)=>new Promise(s=>{const o={x:e.clientX,y:e.clientY};let l=o;const t=performance.now();function c(_){const f={x:_.clientX,y:_.clientY},S={x:f.x-l.x,y:f.y-l.y},y={x:o.x-f.x,y:o.y-f.y};l=f;const w={total:y,delta:S,event:_,timespan:performance.now()-t};return n(w),w}const a=_=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",a),s(c(_))};window.addEventListener("mousemove",c),window.addEventListener("mouseup",a)});function mergeRefs(...e){return n=>{e.forEach(s=>{typeof s=="function"?s(n):"ref"in s&&s.ref&&(typeof s.ref=="function"?s.ref(n):s.ref=n)})}}function withContext(e,n,s){let o;return n.Provider({value:s,children:()=>(o=e(),"")}),()=>o}var propsMap=new WeakMap,handleSet=new WeakSet,NO_OVERFLOW=Symbol("no-overflow"),isPercentageSize=e=>e.endsWith("%"),isFractionSize=e=>e.endsWith("fr"),isPixelSize=e=>e.endsWith("px"),isPixelProps=e=>isPixelSize(e.size),isFractionProps=e=>isFractionSize(e.size),getProps=e=>propsMap.get(e),isNotHandle=e=>!handleSet.has(e);function resolveNode(e){if(typeof e=="function"){const n=e();return resolveNode(n)}return e}function getNeigboringPanes(e,n){const s=e.indexOf(n);if(s===-1||s===0||s===e.length-1)return;const o=e.slice(0,s).findLast(isNotHandle),l=e.slice(s).find(isNotHandle);if(!(!o||!l))return[o,l]}function Base(e){const n=useSplit(),s=mergeProps({size:"1fr"},e),[,o]=splitProps(e,["size","min","max","style","ref"]);let l;const t=(()=>{var c=_tmpl$$4(),a=mergeRefs(e,_=>l=_);return typeof a=="function"&&use(a,c),spread(c,mergeProps({get style(){return{overflow:"hidden",...e.style}}},o,{get"data-active-pane"(){return n?.isActivePane(l)||void 0}}),!1,!0),insert(c,()=>e.children),c})();return propsMap.set(t,s),t}var splitContext=createContext();function useSplit(){return useContext(splitContext)}function Split(e){const n=mergeProps({type:"column"},e),[,s]=splitProps(e,["type","style","ref"]),[o,l]=createSignal(),[t,c]=createSignal(void 0),[a,_]=createSignal(new WeakMap,{equals:!1}),[f,S]=createSignal(),y=()=>(n.type==="column"?o()?.width:o()?.height)||0;function w(d,A){_(x=>(x.set(d,(x.get(d)||0)-A),x))}function k(d,A=0){return isPercentageSize(d)?(parseFloat(d)-A)/100*y():parseFloat(d)-A}function O(d){const A=getProps(d),x=P(d);return!A||isFractionProps(A)?0:k(A.size,x)}function R(){const d=v(),A=b().reduce((x,I)=>x+parseFloat(getProps(I).size),0);if(A===0)return 0;if(A<1){const x=d-d*A;return d/(A+x/d)}else return d/A}function L(d){const A=getProps(d),x=P(d);return!A||!isFractionProps(A)?0:(parseFloat(A.size)-x)*R()}function P(d){return a().get(d)||0}function N(){return m().reduce((d,A)=>d+O(A),0)}function v(){return y()-N()}function C(d,A,x){const I=b(),M=I.indexOf(d),U=I.map(L);let W=isPixelProps(getProps(A))?x:x/y()*100;w(A,W),(U[M]-=x)<0&&(w(A,-W),U[M]=0);const J=U.reduce((V,oe)=>V+oe,0),Z=I.map(getProps).reduce((V,oe)=>V+parseFloat(oe.size),0),Q=U.map(V=>V*Z/J).map((V,oe)=>parseFloat(getProps(I[oe]).size)-V);_(V=>(Q.forEach((oe,F)=>{V.set(I[F],oe)}),V))}function h(d,A){const x=getProps(d),I=P(d);if(!isFractionProps(x))return 0;const M=parseFloat(x.size)-I+A;return M<0?M:0}function i(d,A){const x=getProps(d),I=P(d);if(isFractionProps(x))return 0;const U=k(x.size,I)+A;if(x.max){const W=k(x.max);if(U<W)return U-W}if(x.min){const W=k(x.min);if(U>W)return U-W}return U>0?0:U}const p={isActivePane:createSelector(t,(d,A)=>isNotHandle(d)&&!!A?.includes(d)),get type(){return n.type},dragHandleStart(d){return c(getNeigboringPanes(u(),d))},dragHandle([d,A],x){if(x===0)return NO_OVERFLOW;const I=getProps(d),M=getProps(A),U=isFractionProps(I),W=isFractionProps(M);let X=x/R();const J=U?h(d,X)*R():i(d,x),Z=W?h(A,-X)*R():i(A,-x);return x=J?x-J:Z?x+Z:x,X=x/R(),U&&W?(w(d,X),w(A,-X)):!U&&!W?(w(d,isPixelProps(I)?x:x/y()*100),w(A,isPixelProps(M)?-x:-x/y()*100)):U?C(d,A,-x):C(A,d,x),!J&&!Z?NO_OVERFLOW:Math.abs(J)>Math.abs(Z)?J:-Z},dragHandleEnd(){c(void 0)}},g=children(withContext(()=>e.children,splitContext,p)),u=createMemo(()=>g.toArray().filter(d=>propsMap.has(d))),b=()=>u().filter(d=>isFractionProps(getProps(d))),m=()=>u().filter(d=>!isFractionProps(getProps(d))),E=()=>u().map(d=>{const A=getProps(d),x=P(d);if(isFractionProps(A))return x?`${parseFloat(A.size)-x}fr`:A.size;const I=x?`calc(${parseFloat(A.size)-x}${isPixelProps(A)?"px":"%"})`:A.size;return A.min?A.max?`min(${A.min}, max(${A.max}, ${I}))`:`min(${A.min}, ${I})`:A.max?`max(${A.max}, ${I})`:I}).join(" ");return createEffect(()=>{const d=f();if(!d)return;const A=new ResizeObserver(x=>{for(let I of x)l(I.contentRect),e.onResize?.(I.contentRect,d)});A.observe(d),onCleanup(()=>A.disconnect())}),createSignal(mapArray(u,d=>{createEffect(on(()=>getProps(d)?.size,()=>{_(A=>(A.set(d,0),A))}))})),createEffect(()=>e.onTemplate?.(E())),createComponent(Base,mergeProps({ref(d){var A=mergeRefs(S,e);typeof A=="function"&&A(d)},get style(){return{display:"grid",...e.style,[`grid-template-${n.type}s`]:E()}}},s,{get children(){return u()}}))}function Pane(e){if(!useSplit())throw"Split.Pane should be used within a Split-component";return createComponent(Base,e)}function Handle(e){const n=useSplit();if(!n)throw"Split.Handle should be used within a Split-component";const[s,o]=createSignal(!1),l=createComponent(Base,mergeProps(e,{get"data-active-handle"(){return s()||void 0},onPointerDown:async t=>{let c={x:0,y:0};o(!0);const a=n.dragHandleStart(resolveNode(l));a&&(await cursor(t,({delta:_})=>{const f=n.dragHandle(a,n.type==="column"?_.x+c.x:_.y+c.y);f===NO_OVERFLOW?c={x:0,y:0}:(c.x+=n.type==="column"?_.x:f,c.y+=n.type!=="column"?_.y:f)}),n.dragHandleEnd(),o(!1))}}));return handleSet.add(resolveNode(l)),l}Split.Handle=Handle;Split.Pane=Pane;const PathUtils={normalize(e){return e.replace(/^\/+/,"")},getParent(e){return e.split("/").slice(0,-1).join("/")},getName(e){return lastItem(e.split("/"))},isAncestor(e,n){if(e===n)return!1;const s=e.split("/");return n.split("/").every((l,t)=>l===s[t])},rebase(e,n,s){return PathUtils.isAncestor(e,n)||e===n?e.replace(n,s):e}};function lastItem(e){return e[e.length-1]}const isMac=navigator.platform.startsWith("Mac"),CTRL_KEY=isMac?"metaKey":"ctrlKey";let CDN="https://esm.sh";const CACHE={theme:{},grammar:{}};function urlFromCDN(e,n){switch(e){case"theme":return`${CDN}/tm-themes/themes/${n}.json`;case"grammar":return`${CDN}/tm-grammars/grammars/${n}.json`;case"oniguruma":return`${CDN}/vscode-oniguruma/release/onig.wasm`}}async function fetchFromCDN(e,n){if(n in CACHE[e])return CACHE[e][n];const s=urlFromCDN(e,n);return CACHE[e][n]=typeof s!="string"?s:fetch(s).then(o=>o.ok?o.json():null).catch(console.error)}var define_process_env_default={},__defProp=Object.defineProperty,__defNormalProp=(e,n,s)=>n in e?__defProp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,__publicField=(e,n,s)=>(__defNormalProp(e,n+"",s),s),__accessCheck=(e,n,s)=>{if(!n.has(e))throw TypeError("Cannot "+s)},__privateGet=(e,n,s)=>(__accessCheck(e,n,"read from private field"),s?s.call(e):n.get(e)),__privateAdd=(e,n,s)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,s)},_array,_scopes;function _mergeNamespaces(e,n){for(var s=0;s<n.length;s++){const o=n[s];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in e)){const t=Object.getOwnPropertyDescriptor(o,l);t&&Object.defineProperty(e,l,t.get?t:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var EQUALS_FALSE_OPTIONS={equals:!1};function createLazyMemo(e,n,s){let o=!1,l=!0;const[t,c]=createSignal(void 0,EQUALS_FALSE_OPTIONS),a=createMemo(_=>o?e(_):(l=!t(),_),n,EQUALS_FALSE_OPTIONS);return()=>{o=!0,l&&(l=c());const _=a();return o=!1,_}}function r(e){var n,s,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(n=0;n<l;n++)e[n]&&(s=r(e[n]))&&(o&&(o+=" "),o+=s)}else for(s in e)e[s]&&(o&&(o+=" "),o+=s);return o}function clsx(){for(var e,n,s=0,o="",l=arguments.length;s<l;s++)(e=arguments[s])&&(n=r(e))&&(o&&(o+=" "),o+=n);return o}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var main$2={exports:{}};(function(e,n){(function(s,o){e.exports=o()})(commonjsGlobal,()=>{return s={770:function(l,t,c){var a=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultDebugCall=t.createOnigScanner=t.createOnigString=t.loadWASM=t.OnigScanner=t.OnigString=void 0;const _=a(c(418));let f=null,S=!1;class y{static _utf8ByteLength(P){let N=0;for(let v=0,C=P.length;v<C;v++){const h=P.charCodeAt(v);let i=h,p=!1;if(h>=55296&&h<=56319&&v+1<C){const g=P.charCodeAt(v+1);g>=56320&&g<=57343&&(i=65536+(h-55296<<10)|g-56320,p=!0)}N+=i<=127?1:i<=2047?2:i<=65535?3:4,p&&v++}return N}constructor(P){const N=P.length,v=y._utf8ByteLength(P),C=v!==N,h=C?new Uint32Array(N+1):null;C&&(h[N]=v);const i=C?new Uint32Array(v+1):null;C&&(i[v]=N);const p=new Uint8Array(v);let g=0;for(let u=0;u<N;u++){const b=P.charCodeAt(u);let m=b,E=!1;if(b>=55296&&b<=56319&&u+1<N){const d=P.charCodeAt(u+1);d>=56320&&d<=57343&&(m=65536+(b-55296<<10)|d-56320,E=!0)}C&&(h[u]=g,E&&(h[u+1]=g),m<=127?i[g+0]=u:m<=2047?(i[g+0]=u,i[g+1]=u):m<=65535?(i[g+0]=u,i[g+1]=u,i[g+2]=u):(i[g+0]=u,i[g+1]=u,i[g+2]=u,i[g+3]=u)),m<=127?p[g++]=m:m<=2047?(p[g++]=192|(1984&m)>>>6,p[g++]=128|(63&m)>>>0):m<=65535?(p[g++]=224|(61440&m)>>>12,p[g++]=128|(4032&m)>>>6,p[g++]=128|(63&m)>>>0):(p[g++]=240|(1835008&m)>>>18,p[g++]=128|(258048&m)>>>12,p[g++]=128|(4032&m)>>>6,p[g++]=128|(63&m)>>>0),E&&u++}this.utf16Length=N,this.utf8Length=v,this.utf16Value=P,this.utf8Value=p,this.utf16OffsetToUtf8=h,this.utf8OffsetToUtf16=i}createString(P){const N=P._omalloc(this.utf8Length);return P.HEAPU8.set(this.utf8Value,N),N}}class w{constructor(P){if(this.id=++w.LAST_ID,!f)throw new Error("Must invoke loadWASM first.");this._onigBinding=f,this.content=P;const N=new y(P);this.utf16Length=N.utf16Length,this.utf8Length=N.utf8Length,this.utf16OffsetToUtf8=N.utf16OffsetToUtf8,this.utf8OffsetToUtf16=N.utf8OffsetToUtf16,this.utf8Length<1e4&&!w._sharedPtrInUse?(w._sharedPtr||(w._sharedPtr=f._omalloc(1e4)),w._sharedPtrInUse=!0,f.HEAPU8.set(N.utf8Value,w._sharedPtr),this.ptr=w._sharedPtr):this.ptr=N.createString(f)}convertUtf8OffsetToUtf16(P){return this.utf8OffsetToUtf16?P<0?0:P>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[P]:P}convertUtf16OffsetToUtf8(P){return this.utf16OffsetToUtf8?P<0?0:P>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[P]:P}dispose(){this.ptr===w._sharedPtr?w._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}t.OnigString=w,w.LAST_ID=0,w._sharedPtr=0,w._sharedPtrInUse=!1;class k{constructor(P,N){var v,C;if(!f)throw new Error("Must invoke loadWASM first.");const h=[],i=[];for(let E=0,d=P.length;E<d;E++){const A=new y(P[E]);h[E]=A.createString(f),i[E]=A.utf8Length}const p=f._omalloc(4*P.length);f.HEAPU32.set(h,p/4);const g=f._omalloc(4*P.length);f.HEAPU32.set(i,g/4),this._onigBinding=f,this._options=(v=N?.options)!==null&&v!==void 0?v:[10];const u=this.onigOptions(this._options),b=this.onigSyntax((C=N?.syntax)!==null&&C!==void 0?C:0),m=f._createOnigScanner(p,g,P.length,u,b);this._ptr=m;for(let E=0,d=P.length;E<d;E++)f._ofree(h[E]);f._ofree(g),f._ofree(p),m===0&&function(E){throw new Error(E.UTF8ToString(E._getLastOnigError()))}(f)}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(P,N,v){let C=S,h=this._options;if(Array.isArray(v)?(v.includes(25)&&(C=!0),h=h.concat(v)):typeof v=="boolean"&&(C=v),typeof P=="string"){P=new w(P);const i=this._findNextMatchSync(P,N,C,h);return P.dispose(),i}return this._findNextMatchSync(P,N,C,h)}_findNextMatchSync(P,N,v,C){const h=this._onigBinding,i=this.onigOptions(C);let p;if(p=v?h._findNextOnigScannerMatchDbg(this._ptr,P.id,P.ptr,P.utf8Length,P.convertUtf16OffsetToUtf8(N),i):h._findNextOnigScannerMatch(this._ptr,P.id,P.ptr,P.utf8Length,P.convertUtf16OffsetToUtf8(N),i),p===0)return null;const g=h.HEAPU32;let u=p/4;const b=g[u++],m=g[u++];let E=[];for(let d=0;d<m;d++){const A=P.convertUtf8OffsetToUtf16(g[u++]),x=P.convertUtf8OffsetToUtf16(g[u++]);E[d]={start:A,end:x,length:x-A}}return{index:b,captureIndices:E}}onigOptions(P){return P.map(N=>this.onigOption(N)).reduce((N,v)=>N|v,this._onigBinding.ONIG_OPTION_NONE)}onigSyntax(P){switch(P){case 0:return this._onigBinding.ONIG_SYNTAX_DEFAULT;case 1:return this._onigBinding.ONIG_SYNTAX_ASIS;case 2:return this._onigBinding.ONIG_SYNTAX_POSIX_BASIC;case 3:return this._onigBinding.ONIG_SYNTAX_POSIX_EXTENDED;case 4:return this._onigBinding.ONIG_SYNTAX_EMACS;case 5:return this._onigBinding.ONIG_SYNTAX_GREP;case 6:return this._onigBinding.ONIG_SYNTAX_GNU_REGEX;case 7:return this._onigBinding.ONIG_SYNTAX_JAVA;case 8:return this._onigBinding.ONIG_SYNTAX_PERL;case 9:return this._onigBinding.ONIG_SYNTAX_PERL_NG;case 10:return this._onigBinding.ONIG_SYNTAX_RUBY;case 11:return this._onigBinding.ONIG_SYNTAX_PYTHON;case 12:return this._onigBinding.ONIG_SYNTAX_ONIGURUMA}}onigOption(P){switch(P){case 1:return this._onigBinding.ONIG_OPTION_NONE;case 0:case 25:return this._onigBinding.ONIG_OPTION_DEFAULT;case 2:return this._onigBinding.ONIG_OPTION_IGNORECASE;case 3:return this._onigBinding.ONIG_OPTION_EXTEND;case 4:return this._onigBinding.ONIG_OPTION_MULTILINE;case 5:return this._onigBinding.ONIG_OPTION_SINGLELINE;case 6:return this._onigBinding.ONIG_OPTION_FIND_LONGEST;case 7:return this._onigBinding.ONIG_OPTION_FIND_NOT_EMPTY;case 8:return this._onigBinding.ONIG_OPTION_NEGATE_SINGLELINE;case 9:return this._onigBinding.ONIG_OPTION_DONT_CAPTURE_GROUP;case 10:return this._onigBinding.ONIG_OPTION_CAPTURE_GROUP;case 11:return this._onigBinding.ONIG_OPTION_NOTBOL;case 12:return this._onigBinding.ONIG_OPTION_NOTEOL;case 13:return this._onigBinding.ONIG_OPTION_CHECK_VALIDITY_OF_STRING;case 14:return this._onigBinding.ONIG_OPTION_IGNORECASE_IS_ASCII;case 15:return this._onigBinding.ONIG_OPTION_WORD_IS_ASCII;case 16:return this._onigBinding.ONIG_OPTION_DIGIT_IS_ASCII;case 17:return this._onigBinding.ONIG_OPTION_SPACE_IS_ASCII;case 18:return this._onigBinding.ONIG_OPTION_POSIX_IS_ASCII;case 19:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_EXTENDED_GRAPHEME_CLUSTER;case 20:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_WORD;case 21:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_STRING;case 22:return this._onigBinding.ONIG_OPTION_NOT_END_STRING;case 23:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_POSITION;case 24:return this._onigBinding.ONIG_OPTION_CALLBACK_EACH_MATCH}}}t.OnigScanner=k;let O=!1,R=null;t.loadWASM=function(L){if(O)return R;let P,N,v,C;if(O=!0,function(h){return typeof h.instantiator=="function"}(L))P=L.instantiator,N=L.print;else{let h;(function(i){return i.data!==void 0})(L)?(h=L.data,N=L.print):h=L,P=function(i){return typeof Response<"u"&&i instanceof Response}(h)?typeof WebAssembly.instantiateStreaming=="function"?function(i){return p=>WebAssembly.instantiateStreaming(i,p)}(h):function(i){return async p=>{const g=await i.arrayBuffer();return WebAssembly.instantiate(g,p)}}(h):function(i){return p=>WebAssembly.instantiate(i,p)}(h)}return R=new Promise((h,i)=>{v=h,C=i}),function(h,i,p,g){(0,_.default)({print:i,instantiateWasm:(u,b)=>{if(typeof performance>"u"){const m=()=>Date.now();u.env.emscripten_get_now=m,u.wasi_snapshot_preview1.emscripten_get_now=m}return h(u).then(m=>b(m.instance),g),{}}}).then(u=>{f=u,p()})}(P,N,v,C),R},t.createOnigString=function(L){return new w(L)},t.createOnigScanner=function(L){return new k(L)},t.setDefaultDebugCall=function(L){S=L}},418:l=>{var t=(typeof document<"u"&&document.currentScript&&document.currentScript.src,function(c={}){var a,_,f=c;f.ready=new Promise((T,$)=>{a=T,_=$});var S,y=Object.assign({},f);typeof read<"u"&&read,S=T=>{if(typeof readbuffer=="function")return new Uint8Array(readbuffer(T));let $=read(T,"binary");return typeof $=="object"||x(G),$;var G},typeof clearTimeout>"u"&&(globalThis.clearTimeout=T=>{}),typeof setTimeout>"u"&&(globalThis.setTimeout=T=>typeof T=="function"?T():x()),typeof scriptArgs<"u"&&scriptArgs,typeof onig_print<"u"&&(typeof console>"u"&&(console={}),console.log=onig_print,console.warn=console.error=typeof printErr<"u"?printErr:onig_print);var w,k,O=f.print||console.log.bind(console),R=f.printErr||console.error.bind(console);Object.assign(f,y),y=null,f.arguments&&f.arguments,f.thisProgram&&f.thisProgram,f.quit&&f.quit,f.wasmBinary&&(w=f.wasmBinary),f.noExitRuntime,typeof WebAssembly!="object"&&x("no native wasm support detected");var L,P,N,v,C,h,i,p,g=!1;function u(){var T=k.buffer;f.HEAP8=L=new Int8Array(T),f.HEAP16=N=new Int16Array(T),f.HEAPU8=P=new Uint8Array(T),f.HEAPU16=v=new Uint16Array(T),f.HEAP32=C=new Int32Array(T),f.HEAPU32=h=new Uint32Array(T),f.HEAPF32=i=new Float32Array(T),f.HEAPF64=p=new Float64Array(T)}var b=[],m=[],E=[],d=0,A=null;function x(T){f.onAbort&&f.onAbort(T),R(T="Aborted("+T+")"),g=!0,T+=". Build with -sASSERTIONS for more info.";var $=new WebAssembly.RuntimeError(T);throw _($),$}var I,M;function U(T){return T.startsWith("data:application/octet-stream;base64,")}function W(T){if(T==I&&w)return new Uint8Array(w);if(S)return S(T);throw"both async and sync fetching of the wasm failed"}function X(T,$,G){return function(D){return Promise.resolve().then(()=>W(D))}(T).then(D=>WebAssembly.instantiate(D,$)).then(D=>D).then(G,D=>{R(`failed to asynchronously prepare wasm: ${D}`),x(D)})}U(I="onig.wasm")||(M=I,I=f.locateFile?f.locateFile(M,""):""+M);var J=T=>{for(;T.length>0;)T.shift()(f)},Z=void 0,Y=T=>{for(var $="",G=T;P[G];)$+=Z[P[G++]];return $},Q={},V={},oe={},F=void 0,te=T=>{throw new F(T)},ee=void 0,de=(T,$,G)=>{function D(K){var H=G(K);H.length!==T.length&&(ie=>{throw new ee(ie)})("Mismatched type converter count");for(var q=0;q<T.length;++q)le(T[q],H[q])}T.forEach(function(K){oe[K]=$});var B=new Array($.length),j=[],z=0;$.forEach((K,H)=>{V.hasOwnProperty(K)?B[H]=V[K]:(j.push(K),Q.hasOwnProperty(K)||(Q[K]=[]),Q[K].push(()=>{B[H]=V[K],++z===j.length&&D(B)}))}),j.length===0&&D(B)};function le(T,$,G={}){if(!("argPackAdvance"in $))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(D,B,j={}){var z=B.name;if(D||te(`type "${z}" must have a positive integer typeid pointer`),V.hasOwnProperty(D)){if(j.ignoreDuplicateRegistrations)return;te(`Cannot register type '${z}' twice`)}if(V[D]=B,delete oe[D],Q.hasOwnProperty(D)){var K=Q[D];delete Q[D],K.forEach(H=>H())}}(T,$,G)}function ve(){this.allocated=[void 0],this.freelist=[]}var ae=new ve,pe=()=>{for(var T=0,$=ae.reserved;$<ae.allocated.length;++$)ae.allocated[$]!==void 0&&++T;return T},Pe=T=>(T||te("Cannot use deleted val. handle = "+T),ae.get(T).value),ye=T=>{switch(T){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ae.allocate({refcount:1,value:T})}};function ge(T){return this.fromWireType(C[T>>2])}var Se=(T,$)=>{switch($){case 4:return function(G){return this.fromWireType(i[G>>2])};case 8:return function(G){return this.fromWireType(p[G>>3])};default:throw new TypeError(`invalid float width (${$}): ${T}`)}},me=(T,$,G)=>{switch($){case 1:return G?D=>L[D>>0]:D=>P[D>>0];case 2:return G?D=>N[D>>1]:D=>v[D>>1];case 4:return G?D=>C[D>>2]:D=>h[D>>2];default:throw new TypeError(`invalid integer width (${$}): ${T}`)}};function fe(T){return this.fromWireType(h[T>>2])}var be,Ae=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ee=(T,$,G)=>{for(var D=$+G,B=$;T[B]&&!(B>=D);)++B;if(B-$>16&&T.buffer&&Ae)return Ae.decode(T.subarray($,B));for(var j="";$<B;){var z=T[$++];if(128&z){var K=63&T[$++];if((224&z)!=192){var H=63&T[$++];if((z=(240&z)==224?(15&z)<<12|K<<6|H:(7&z)<<18|K<<12|H<<6|63&T[$++])<65536)j+=String.fromCharCode(z);else{var q=z-65536;j+=String.fromCharCode(55296|q>>10,56320|1023&q)}}else j+=String.fromCharCode((31&z)<<6|K)}else j+=String.fromCharCode(z)}return j},we=(T,$)=>T?Ee(P,T,$):"",Oe=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ne=(T,$)=>{for(var G=T,D=G>>1,B=D+$/2;!(D>=B)&&v[D];)++D;if((G=D<<1)-T>32&&Oe)return Oe.decode(P.subarray(T,G));for(var j="",z=0;!(z>=$/2);++z){var K=N[T+2*z>>1];if(K==0)break;j+=String.fromCharCode(K)}return j},Re=(T,$,G)=>{if(G===void 0&&(G=2147483647),G<2)return 0;for(var D=$,B=(G-=2)<2*T.length?G/2:T.length,j=0;j<B;++j){var z=T.charCodeAt(j);N[$>>1]=z,$+=2}return N[$>>1]=0,$-D},Ce=T=>2*T.length,Te=(T,$)=>{for(var G=0,D="";!(G>=$/4);){var B=C[T+4*G>>2];if(B==0)break;if(++G,B>=65536){var j=B-65536;D+=String.fromCharCode(55296|j>>10,56320|1023&j)}else D+=String.fromCharCode(B)}return D},Fe=(T,$,G)=>{if(G===void 0&&(G=2147483647),G<4)return 0;for(var D=$,B=D+G-4,j=0;j<T.length;++j){var z=T.charCodeAt(j);if(z>=55296&&z<=57343&&(z=65536+((1023&z)<<10)|1023&T.charCodeAt(++j)),C[$>>2]=z,($+=4)+4>B)break}return C[$>>2]=0,$-D},Ge=T=>{for(var $=0,G=0;G<T.length;++G){var D=T.charCodeAt(G);D>=55296&&D<=57343&&++G,$+=4}return $};be=()=>performance.now();var Be=T=>{var $=(T-k.buffer.byteLength+65535)/65536;try{return k.grow($),u(),1}catch{}},Ue=[null,[],[]];(()=>{for(var T=new Array(256),$=0;$<256;++$)T[$]=String.fromCharCode($);Z=T})(),F=f.BindingError=class extends Error{constructor(T){super(T),this.name="BindingError"}},ee=f.InternalError=class extends Error{constructor(T){super(T),this.name="InternalError"}},Object.assign(ve.prototype,{get(T){return this.allocated[T]},has(T){return this.allocated[T]!==void 0},allocate(T){var $=this.freelist.pop()||this.allocated.length;return this.allocated[$]=T,$},free(T){this.allocated[T]=void 0,this.freelist.push(T)}}),ae.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),ae.reserved=ae.allocated.length,f.count_emval_handles=pe;var xe,De={_embind_register_bigint:(T,$,G,D,B)=>{},_embind_register_bool:(T,$,G,D)=>{le(T,{name:$=Y($),fromWireType:function(B){return!!B},toWireType:function(B,j){return j?G:D},argPackAdvance:8,readValueFromPointer:function(B){return this.fromWireType(P[B])},destructorFunction:null})},_embind_register_constant:(T,$,G)=>{T=Y(T),de([],[$],function(D){return D=D[0],f[T]=D.fromWireType(G),[]})},_embind_register_emval:(T,$)=>{le(T,{name:$=Y($),fromWireType:G=>{var D=Pe(G);return(B=>{B>=ae.reserved&&--ae.get(B).refcount==0&&ae.free(B)})(G),D},toWireType:(G,D)=>ye(D),argPackAdvance:8,readValueFromPointer:ge,destructorFunction:null})},_embind_register_float:(T,$,G)=>{le(T,{name:$=Y($),fromWireType:D=>D,toWireType:(D,B)=>B,argPackAdvance:8,readValueFromPointer:Se($,G),destructorFunction:null})},_embind_register_integer:(T,$,G,D,B)=>{$=Y($);var j=H=>H;if(D===0){var z=32-8*G;j=H=>H<<z>>>z}var K=$.includes("unsigned");le(T,{name:$,fromWireType:j,toWireType:K?function(H,q){return this.name,q>>>0}:function(H,q){return this.name,q},argPackAdvance:8,readValueFromPointer:me($,G,D!==0),destructorFunction:null})},_embind_register_memory_view:(T,$,G)=>{var D=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][$];function B(j){var z=h[j>>2],K=h[j+4>>2];return new D(L.buffer,K,z)}le(T,{name:G=Y(G),fromWireType:B,argPackAdvance:8,readValueFromPointer:B},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:(T,$)=>{var G=($=Y($))==="std::string";le(T,{name:$,fromWireType:D=>{var B,j=h[D>>2],z=D+4;if(G)for(var K=z,H=0;H<=j;++H){var q=z+H;if(H==j||P[q]==0){var ie=we(K,q-K);B===void 0?B=ie:(B+="\0",B+=ie),K=q+1}}else{var re=new Array(j);for(H=0;H<j;++H)re[H]=String.fromCharCode(P[z+H]);B=re.join("")}return _e(D),B},toWireType:(D,B)=>{var j;B instanceof ArrayBuffer&&(B=new Uint8Array(B));var z=typeof B=="string";z||B instanceof Uint8Array||B instanceof Uint8ClampedArray||B instanceof Int8Array||te("Cannot pass non-string to std::string"),j=G&&z?(re=>{for(var se=0,ne=0;ne<re.length;++ne){var he=re.charCodeAt(ne);he<=127?se++:he<=2047?se+=2:he>=55296&&he<=57343?(se+=4,++ne):se+=3}return se})(B):B.length;var K=Le(4+j+1),H=K+4;if(h[K>>2]=j,G&&z)((re,se,ne,he)=>{if(!(he>0))return 0;for(var $e=ne,Ie=ne+he-1,ke=0;ke<re.length;++ke){var ce=re.charCodeAt(ke);if(ce>=55296&&ce<=57343&&(ce=65536+((1023&ce)<<10)|1023&re.charCodeAt(++ke)),ce<=127){if(ne>=Ie)break;se[ne++]=ce}else if(ce<=2047){if(ne+1>=Ie)break;se[ne++]=192|ce>>6,se[ne++]=128|63&ce}else if(ce<=65535){if(ne+2>=Ie)break;se[ne++]=224|ce>>12,se[ne++]=128|ce>>6&63,se[ne++]=128|63&ce}else{if(ne+3>=Ie)break;se[ne++]=240|ce>>18,se[ne++]=128|ce>>12&63,se[ne++]=128|ce>>6&63,se[ne++]=128|63&ce}}se[ne]=0})(B,P,H,j+1);else if(z)for(var q=0;q<j;++q){var ie=B.charCodeAt(q);ie>255&&(_e(H),te("String has UTF-16 code units that do not fit in 8 bits")),P[H+q]=ie}else for(q=0;q<j;++q)P[H+q]=B[q];return D!==null&&D.push(_e,K),K},argPackAdvance:8,readValueFromPointer:fe,destructorFunction:D=>_e(D)})},_embind_register_std_wstring:(T,$,G)=>{var D,B,j,z,K;G=Y(G),$===2?(D=Ne,B=Re,z=Ce,j=()=>v,K=1):$===4&&(D=Te,B=Fe,z=Ge,j=()=>h,K=2),le(T,{name:G,fromWireType:H=>{for(var q,ie=h[H>>2],re=j(),se=H+4,ne=0;ne<=ie;++ne){var he=H+4+ne*$;if(ne==ie||re[he>>K]==0){var $e=D(se,he-se);q===void 0?q=$e:(q+="\0",q+=$e),se=he+$}}return _e(H),q},toWireType:(H,q)=>{typeof q!="string"&&te(`Cannot pass non-string to C++ string type ${G}`);var ie=z(q),re=Le(4+ie+$);return h[re>>2]=ie>>K,B(q,re+4,ie+$),H!==null&&H.push(_e,re),re},argPackAdvance:8,readValueFromPointer:ge,destructorFunction:H=>_e(H)})},_embind_register_void:(T,$)=>{le(T,{isVoid:!0,name:$=Y($),argPackAdvance:0,fromWireType:()=>{},toWireType:(G,D)=>{}})},emscripten_get_now:be,emscripten_memcpy_big:(T,$,G)=>P.copyWithin(T,$,$+G),emscripten_resize_heap:T=>{var $=P.length,G=2147483648;if((T>>>=0)>G)return!1;for(var D,B=1;B<=4;B*=2){var j=$*(1+.2/B);j=Math.min(j,T+100663296);var z=Math.min(G,(D=Math.max(T,j))+(65536-D%65536)%65536);if(Be(z))return!0}return!1},fd_write:(T,$,G,D)=>{for(var B=0,j=0;j<G;j++){var z=h[$>>2],K=h[$+4>>2];$+=8;for(var H=0;H<K;H++)q=T,ie=P[z+H],re=void 0,re=Ue[q],ie===0||ie===10?((q===1?O:R)(Ee(re,0)),re.length=0):re.push(ie);B+=K}var q,ie,re;return h[D>>2]=B,0}},ue=function(){var T,$,G,D,B={env:De,wasi_snapshot_preview1:De};function j(z,K){var H,q=z.exports;return k=(ue=q).memory,u(),ue.__indirect_function_table,H=ue.__wasm_call_ctors,m.unshift(H),function(ie){if(d--,f.monitorRunDependencies&&f.monitorRunDependencies(d),d==0&&A){var re=A;A=null,re()}}(),q}if(d++,f.monitorRunDependencies&&f.monitorRunDependencies(d),f.instantiateWasm)try{return f.instantiateWasm(B,j)}catch(z){R(`Module.instantiateWasm callback failed with error: ${z}`),_(z)}return(T=w,$=I,G=B,D=function(z){j(z.instance)},T||typeof WebAssembly.instantiateStreaming!="function"||U($)||typeof fetch!="function"?X($,G,D):fetch($,{credentials:"same-origin"}).then(z=>WebAssembly.instantiateStreaming(z,G).then(D,function(K){return R(`wasm streaming compile failed: ${K}`),R("falling back to ArrayBuffer instantiation"),X($,G,D)}))).catch(_),{}}(),Le=T=>(Le=ue.malloc)(T),_e=T=>(_e=ue.free)(T);function Me(){function T(){xe||(xe=!0,f.calledRun=!0,g||(J(m),a(f),f.onRuntimeInitialized&&f.onRuntimeInitialized(),function(){if(f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;)$=f.postRun.shift(),E.unshift($);var $;J(E)}()))}d>0||(function(){if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)$=f.preRun.shift(),b.unshift($);var $;J(b)}(),d>0||(f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),T()},1)):T()))}if(f._omalloc=T=>(f._omalloc=ue.omalloc)(T),f._ofree=T=>(f._ofree=ue.ofree)(T),f._getLastOnigError=()=>(f._getLastOnigError=ue.getLastOnigError)(),f._createOnigScanner=(T,$,G,D,B)=>(f._createOnigScanner=ue.createOnigScanner)(T,$,G,D,B),f._freeOnigScanner=T=>(f._freeOnigScanner=ue.freeOnigScanner)(T),f._findNextOnigScannerMatch=(T,$,G,D,B,j)=>(f._findNextOnigScannerMatch=ue.findNextOnigScannerMatch)(T,$,G,D,B,j),f._findNextOnigScannerMatchDbg=(T,$,G,D,B,j)=>(f._findNextOnigScannerMatchDbg=ue.findNextOnigScannerMatchDbg)(T,$,G,D,B,j),f.__embind_initialize_bindings=()=>(f.__embind_initialize_bindings=ue._embind_initialize_bindings)(),f.dynCall_jiji=(T,$,G,D,B)=>(f.dynCall_jiji=ue.dynCall_jiji)(T,$,G,D,B),f.UTF8ToString=we,A=function T(){xe||Me(),xe||(A=T)},f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);f.preInit.length>0;)f.preInit.pop()();return Me(),c.ready});l.exports=t}},o={},function l(t){var c=o[t];if(c!==void 0)return c.exports;var a=o[t]={exports:{}};return s[t].call(a.exports,a,a.exports,l),a.exports}(770);var s,o})})(main$2);var mainExports$1=main$2.exports;const main$1=getDefaultExportFromCjs(mainExports$1),oniguruma=_mergeNamespaces({__proto__:null,default:main$1},[mainExports$1]);var main={exports:{}};(function(e,n){(function(s,o){e.exports=o()})(commonjsGlobal,()=>(()=>{var s={350:(l,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UseOnigurumaFindOptions=t.DebugFlags=void 0,t.DebugFlags={InDebugMode:typeof process<"u"&&!!define_process_env_default.VSCODE_TEXTMATE_DEBUG},t.UseOnigurumaFindOptions=!1},442:(l,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyStateStackDiff=t.diffStateStacksRefEq=void 0;const a=c(391);t.diffStateStacksRefEq=function(_,f){let S=0;const y=[];let w=_,k=f;for(;w!==k;)w&&(!k||w.depth>=k.depth)?(S++,w=w.parent):(y.push(k.toStateStackFrame()),k=k.parent);return{pops:S,newFrames:y.reverse()}},t.applyStateStackDiff=function(_,f){let S=_;for(let y=0;y<f.pops;y++)S=S.parent;for(const y of f.newFrames)S=a.StateStackImpl.pushFrame(S,y);return S}},36:(l,t)=>{var c;Object.defineProperty(t,"__esModule",{value:!0}),t.toOptionalTokenType=t.EncodedTokenAttributes=void 0,(c=t.EncodedTokenAttributes||(t.EncodedTokenAttributes={})).toBinaryStr=function(a){return a.toString(2).padStart(32,"0")},c.print=function(a){const _=c.getLanguageId(a),f=c.getTokenType(a),S=c.getFontStyle(a),y=c.getForeground(a),w=c.getBackground(a);console.log({languageId:_,tokenType:f,fontStyle:S,foreground:y,background:w})},c.getLanguageId=function(a){return(255&a)>>>0},c.getTokenType=function(a){return(768&a)>>>8},c.containsBalancedBrackets=function(a){return(1024&a)!=0},c.getFontStyle=function(a){return(30720&a)>>>11},c.getForeground=function(a){return(16744448&a)>>>15},c.getBackground=function(a){return(4278190080&a)>>>24},c.set=function(a,_,f,S,y,w,k){let O=c.getLanguageId(a),R=c.getTokenType(a),L=c.containsBalancedBrackets(a)?1:0,P=c.getFontStyle(a),N=c.getForeground(a),v=c.getBackground(a);return _!==0&&(O=_),f!==8&&(R=f),S!==null&&(L=S?1:0),y!==-1&&(P=y),w!==0&&(N=w),k!==0&&(v=k),(O<<0|R<<8|L<<10|P<<11|N<<15|v<<24)>>>0},t.toOptionalTokenType=function(a){return a}},996:(l,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BasicScopeAttributesProvider=t.BasicScopeAttributes=void 0;const a=c(878);class _{constructor(w,k){this.languageId=w,this.tokenType=k}}t.BasicScopeAttributes=_;class f{constructor(w,k){this._getBasicScopeAttributes=new a.CachedFn(O=>{const R=this._scopeToLanguage(O),L=this._toStandardTokenType(O);return new _(R,L)}),this._defaultAttributes=new _(w,8),this._embeddedLanguagesMatcher=new S(Object.entries(k||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(w){return w===null?f._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(w)}_scopeToLanguage(w){return this._embeddedLanguagesMatcher.match(w)||0}_toStandardTokenType(w){const k=w.match(f.STANDARD_TOKEN_TYPE_REGEXP);if(!k)return 8;switch(k[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}t.BasicScopeAttributesProvider=f,f._NULL_SCOPE_METADATA=new _(0,0),f.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class S{constructor(w){if(w.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(w);const k=w.map(([O,R])=>a.escapeRegExpCharacters(O));k.sort(),k.reverse(),this.scopesRegExp=new RegExp(`^((${k.join(")|(")}))($|\\.)`,"")}}match(w){if(!this.scopesRegExp)return;const k=w.match(this.scopesRegExp);return k?this.values.get(k[1]):void 0}}},947:(l,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LineTokens=t.BalancedBracketSelectors=t.StateStackImpl=t.AttributedScopeStack=t.Grammar=t.createGrammar=void 0;const a=c(350),_=c(36),f=c(736),S=c(44),y=c(792),w=c(583),k=c(878),O=c(996),R=c(47);function L(g,u,b,m,E){const d=f.createMatchers(u,P),A=y.RuleFactory.getCompiledRuleId(b,m,E.repository);for(const x of d)g.push({debugSelector:u,matcher:x.matcher,ruleId:A,grammar:E,priority:x.priority})}function P(g,u){if(u.length<g.length)return!1;let b=0;return g.every(m=>{for(let E=b;E<u.length;E++)if(N(u[E],m))return b=E+1,!0;return!1})}function N(g,u){if(!g)return!1;if(g===u)return!0;const b=u.length;return g.length>b&&g.substr(0,b)===u&&g[b]==="."}t.createGrammar=function(g,u,b,m,E,d,A,x){return new v(g,u,b,m,E,d,A,x)};class v{constructor(u,b,m,E,d,A,x,I){if(this._rootScopeName=u,this.balancedBracketSelectors=A,this._onigLib=I,this._basicScopeAttributesProvider=new O.BasicScopeAttributesProvider(m,E),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=x,this._grammar=C(b,null),this._injections=null,this._tokenTypeMatchers=[],d)for(const M of Object.keys(d)){const U=f.createMatchers(M,P);for(const W of U)this._tokenTypeMatchers.push({matcher:W.matcher,type:d[M]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const u of this._ruleId2desc)u&&u.dispose()}createOnigScanner(u){return this._onigLib.createOnigScanner(u)}createOnigString(u){return this._onigLib.createOnigString(u)}getMetadataForScope(u){return this._basicScopeAttributesProvider.getBasicScopeAttributes(u)}_collectInjections(){const u=[],b=this._rootScopeName,m=(E=>E===this._rootScopeName?this._grammar:this.getExternalGrammar(E))(b);if(m){const E=m.injections;if(E)for(let A in E)L(u,A,E[A],this,m);const d=this._grammarRepository.injections(b);d&&d.forEach(A=>{const x=this.getExternalGrammar(A);if(x){const I=x.injectionSelector;I&&L(u,I,x,this,x)}})}return u.sort((E,d)=>E.priority-d.priority),u}getInjections(){if(this._injections===null&&(this._injections=this._collectInjections(),a.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const u of this._injections)console.log(`  - ${u.debugSelector}`)}return this._injections}registerRule(u){const b=++this._lastRuleId,m=u(y.ruleIdFromNumber(b));return this._ruleId2desc[b]=m,m}getRule(u){return this._ruleId2desc[y.ruleIdToNumber(u)]}getExternalGrammar(u,b){if(this._includedGrammars[u])return this._includedGrammars[u];if(this._grammarRepository){const m=this._grammarRepository.lookup(u);if(m)return this._includedGrammars[u]=C(m,b&&b.$base),this._includedGrammars[u]}}tokenizeLine(u,b,m=0){const E=this._tokenize(u,b,!1,m);return{tokens:E.lineTokens.getResult(E.ruleStack,E.lineLength),ruleStack:E.ruleStack,stoppedEarly:E.stoppedEarly}}tokenizeLine2(u,b,m=0){const E=this._tokenize(u,b,!0,m);return{tokens:E.lineTokens.getBinaryResult(E.ruleStack,E.lineLength),ruleStack:E.ruleStack,stoppedEarly:E.stoppedEarly}}_tokenize(u,b,m,E){let d;if(this._rootId===-1&&(this._rootId=y.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),b&&b!==i.NULL)d=!1,b.reset();else{d=!0;const U=this._basicScopeAttributesProvider.getDefaultAttributes(),W=this.themeProvider.getDefaults(),X=_.EncodedTokenAttributes.set(0,U.languageId,U.tokenType,null,W.fontStyle,W.foregroundId,W.backgroundId),J=this.getRule(this._rootId).getName(null,null);let Z;Z=J?h.createRootAndLookUpScopeName(J,X,this):h.createRoot("unknown",X),b=new i(null,this._rootId,-1,-1,!1,null,Z,Z)}u+=`
`;const A=this.createOnigString(u),x=A.content.length,I=new p(m,u,this._tokenTypeMatchers,this.balancedBracketSelectors),M=R._tokenizeString(this,A,d,0,b,I,!0,E);return S.disposeOnigString(A),{lineLength:x,lineTokens:I,ruleStack:M.stack,stoppedEarly:M.stoppedEarly}}}function C(g,u){return(g=k.clone(g)).repository=g.repository||{},g.repository.$self={$vscodeTextmateLocation:g.$vscodeTextmateLocation,patterns:g.patterns,name:g.scopeName},g.repository.$base=u||g.repository.$self,g}t.Grammar=v;class h{constructor(u,b,m){this.parent=u,this.scopePath=b,this.tokenAttributes=m}static fromExtension(u,b){let m=u,E=u?.scopePath??null;for(const d of b)E=w.ScopeStack.push(E,d.scopeNames),m=new h(m,E,d.encodedTokenAttributes);return m}static createRoot(u,b){return new h(null,new w.ScopeStack(null,u),b)}static createRootAndLookUpScopeName(u,b,m){const E=m.getMetadataForScope(u),d=new w.ScopeStack(null,u),A=m.themeProvider.themeMatch(d),x=h.mergeAttributes(b,E,A);return new h(null,d,x)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(u){return h.equals(this,u)}static equals(u,b){for(;;){if(u===b||!u&&!b)return!0;if(!u||!b||u.scopeName!==b.scopeName||u.tokenAttributes!==b.tokenAttributes)return!1;u=u.parent,b=b.parent}}static mergeAttributes(u,b,m){let E=-1,d=0,A=0;return m!==null&&(E=m.fontStyle,d=m.foregroundId,A=m.backgroundId),_.EncodedTokenAttributes.set(u,b.languageId,b.tokenType,null,E,d,A)}pushAttributed(u,b){if(u===null)return this;if(u.indexOf(" ")===-1)return h._pushAttributed(this,u,b);const m=u.split(/ /g);let E=this;for(const d of m)E=h._pushAttributed(E,d,b);return E}static _pushAttributed(u,b,m){const E=m.getMetadataForScope(b),d=u.scopePath.push(b),A=m.themeProvider.themeMatch(d),x=h.mergeAttributes(u.tokenAttributes,E,A);return new h(u,d,x)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(u){var b;const m=[];let E=this;for(;E&&E!==u;)m.push({encodedTokenAttributes:E.tokenAttributes,scopeNames:E.scopePath.getExtensionIfDefined(((b=E.parent)==null?void 0:b.scopePath)??null)}),E=E.parent;return E===u?m.reverse():void 0}}t.AttributedScopeStack=h;class i{constructor(u,b,m,E,d,A,x,I){this.parent=u,this.ruleId=b,this.beginRuleCapturedEOL=d,this.endRule=A,this.nameScopesList=x,this.contentNameScopesList=I,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=m,this._anchorPos=E}equals(u){return u!==null&&i._equals(this,u)}static _equals(u,b){return u===b||!!this._structuralEquals(u,b)&&h.equals(u.contentNameScopesList,b.contentNameScopesList)}static _structuralEquals(u,b){for(;;){if(u===b||!u&&!b)return!0;if(!u||!b||u.depth!==b.depth||u.ruleId!==b.ruleId||u.endRule!==b.endRule)return!1;u=u.parent,b=b.parent}}clone(){return this}static _reset(u){for(;u;)u._enterPos=-1,u._anchorPos=-1,u=u.parent}reset(){i._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(u,b,m,E,d,A,x){return new i(this,u,b,m,E,d,A,x)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(u){return u.getRule(this.ruleId)}toString(){const u=[];return this._writeString(u,0),"["+u.join(",")+"]"}_writeString(u,b){var m,E;return this.parent&&(b=this.parent._writeString(u,b)),u[b++]=`(${this.ruleId}, ${(m=this.nameScopesList)==null?void 0:m.toString()}, ${(E=this.contentNameScopesList)==null?void 0:E.toString()})`,b}withContentNameScopesList(u){return this.contentNameScopesList===u?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,u)}withEndRule(u){return this.endRule===u?this:new i(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,u,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(u){let b=this;for(;b&&b._enterPos===u._enterPos;){if(b.ruleId===u.ruleId)return!0;b=b.parent}return!1}toStateStackFrame(){var u,b,m;return{ruleId:y.ruleIdToNumber(this.ruleId),beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((b=this.nameScopesList)==null?void 0:b.getExtensionIfDefined(((u=this.parent)==null?void 0:u.nameScopesList)??null))??[],contentNameScopesList:((m=this.contentNameScopesList)==null?void 0:m.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(u,b){const m=h.fromExtension(u?.nameScopesList??null,b.nameScopesList);return new i(u,y.ruleIdFromNumber(b.ruleId),b.enterPos??-1,b.anchorPos??-1,b.beginRuleCapturedEOL,b.endRule,m,h.fromExtension(m,b.contentNameScopesList))}}t.StateStackImpl=i,i.NULL=new i(null,0,0,0,!1,null,null,null),t.BalancedBracketSelectors=class{constructor(g,u){this.allowAny=!1,this.balancedBracketScopes=g.flatMap(b=>b==="*"?(this.allowAny=!0,[]):f.createMatchers(b,P).map(m=>m.matcher)),this.unbalancedBracketScopes=u.flatMap(b=>f.createMatchers(b,P).map(m=>m.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(g){for(const u of this.unbalancedBracketScopes)if(u(g))return!1;for(const u of this.balancedBracketScopes)if(u(g))return!0;return this.allowAny}};class p{constructor(u,b,m,E){this.balancedBracketSelectors=E,this._emitBinaryTokens=u,this._tokenTypeOverrides=m,a.DebugFlags.InDebugMode?this._lineText=b:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(u,b){this.produceFromScopes(u.contentNameScopesList,b)}produceFromScopes(u,b){var m;if(this._lastTokenEndIndex>=b)return;if(this._emitBinaryTokens){let d=u?.tokenAttributes??0,A=!1;if((m=this.balancedBracketSelectors)!=null&&m.matchesAlways&&(A=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const x=u?.getScopeNames()??[];for(const I of this._tokenTypeOverrides)I.matcher(x)&&(d=_.EncodedTokenAttributes.set(d,0,_.toOptionalTokenType(I.type),null,-1,0,0));this.balancedBracketSelectors&&(A=this.balancedBracketSelectors.match(x))}if(A&&(d=_.EncodedTokenAttributes.set(d,0,8,A,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===d)return void(this._lastTokenEndIndex=b);if(a.DebugFlags.InDebugMode){const x=u?.getScopeNames()??[];console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,b).replace(/\n$/,"\\n")+"|");for(let I=0;I<x.length;I++)console.log("      * "+x[I])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(d),void(this._lastTokenEndIndex=b)}const E=u?.getScopeNames()??[];if(a.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,b).replace(/\n$/,"\\n")+"|");for(let d=0;d<E.length;d++)console.log("      * "+E[d])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:b,scopes:E}),this._lastTokenEndIndex=b}getResult(u,b){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===b-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(u,b),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(u,b){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===b-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(u,b),this._binaryTokens[this._binaryTokens.length-2]=0);const m=new Uint32Array(this._binaryTokens.length);for(let E=0,d=this._binaryTokens.length;E<d;E++)m[E]=this._binaryTokens[E];return m}}t.LineTokens=p},965:(l,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseInclude=t.TopLevelRepositoryReference=t.TopLevelReference=t.RelativeReference=t.SelfReference=t.BaseReference=t.ScopeDependencyProcessor=t.ExternalReferenceCollector=t.TopLevelRepositoryRuleReference=t.TopLevelRuleReference=void 0;const a=c(878);class _{constructor(i){this.scopeName=i}toKey(){return this.scopeName}}t.TopLevelRuleReference=_;class f{constructor(i,p){this.scopeName=i,this.ruleName=p}toKey(){return`${this.scopeName}#${this.ruleName}`}}t.TopLevelRepositoryRuleReference=f;class S{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(i){const p=i.toKey();this._seenReferenceKeys.has(p)||(this._seenReferenceKeys.add(p),this._references.push(i))}}function y(h,i,p,g){const u=p.lookup(h.scopeName);if(!u){if(h.scopeName===i)throw new Error(`No grammar provided for <${i}>`);return}const b=p.lookup(i);h instanceof _?k({baseGrammar:b,selfGrammar:u},g):w(h.ruleName,{baseGrammar:b,selfGrammar:u,repository:u.repository},g);const m=p.injections(h.scopeName);if(m)for(const E of m)g.add(new _(E))}function w(h,i,p){i.repository&&i.repository[h]&&O([i.repository[h]],i,p)}function k(h,i){h.selfGrammar.patterns&&Array.isArray(h.selfGrammar.patterns)&&O(h.selfGrammar.patterns,{...h,repository:h.selfGrammar.repository},i),h.selfGrammar.injections&&O(Object.values(h.selfGrammar.injections),{...h,repository:h.selfGrammar.repository},i)}function O(h,i,p){for(const g of h){if(p.visitedRule.has(g))continue;p.visitedRule.add(g);const u=g.repository?a.mergeObjects({},i.repository,g.repository):i.repository;Array.isArray(g.patterns)&&O(g.patterns,{...i,repository:u},p);const b=g.include;if(!b)continue;const m=C(b);switch(m.kind){case 0:k({...i,selfGrammar:i.baseGrammar},p);break;case 1:k(i,p);break;case 2:w(m.ruleName,{...i,repository:u},p);break;case 3:case 4:const E=m.scopeName===i.selfGrammar.scopeName?i.selfGrammar:m.scopeName===i.baseGrammar.scopeName?i.baseGrammar:void 0;if(E){const d={baseGrammar:i.baseGrammar,selfGrammar:E,repository:u};m.kind===4?w(m.ruleName,d,p):k(d,p)}else m.kind===4?p.add(new f(m.scopeName,m.ruleName)):p.add(new _(m.scopeName))}}}t.ExternalReferenceCollector=S,t.ScopeDependencyProcessor=class{constructor(h,i){this.repo=h,this.initialScopeName=i,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new _(this.initialScopeName)]}processQueue(){const h=this.Q;this.Q=[];const i=new S;for(const p of h)y(p,this.initialScopeName,this.repo,i);for(const p of i.references)if(p instanceof _){if(this.seenFullScopeRequests.has(p.scopeName))continue;this.seenFullScopeRequests.add(p.scopeName),this.Q.push(p)}else{if(this.seenFullScopeRequests.has(p.scopeName)||this.seenPartialScopeRequests.has(p.toKey()))continue;this.seenPartialScopeRequests.add(p.toKey()),this.Q.push(p)}}};class R{constructor(){this.kind=0}}t.BaseReference=R;class L{constructor(){this.kind=1}}t.SelfReference=L;class P{constructor(i){this.ruleName=i,this.kind=2}}t.RelativeReference=P;class N{constructor(i){this.scopeName=i,this.kind=3}}t.TopLevelReference=N;class v{constructor(i,p){this.scopeName=i,this.ruleName=p,this.kind=4}}function C(h){if(h==="$base")return new R;if(h==="$self")return new L;const i=h.indexOf("#");if(i===-1)return new N(h);if(i===0)return new P(h.substring(1));{const p=h.substring(0,i),g=h.substring(i+1);return new v(p,g)}}t.TopLevelRepositoryReference=v,t.parseInclude=C},391:function(l,t,c){var a=this&&this.__createBinding||(Object.create?function(f,S,y,w){w===void 0&&(w=y),Object.defineProperty(f,w,{enumerable:!0,get:function(){return S[y]}})}:function(f,S,y,w){w===void 0&&(w=y),f[w]=S[y]}),_=this&&this.__exportStar||function(f,S){for(var y in f)y==="default"||Object.prototype.hasOwnProperty.call(S,y)||a(S,f,y)};Object.defineProperty(t,"__esModule",{value:!0}),_(c(947),t)},47:(l,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStackElement=t._tokenizeString=void 0;const a=c(350),_=c(44),f=c(792),S=c(878);class y{constructor(v,C){this.stack=v,this.stoppedEarly=C}}function w(N,v,C,h,i,p,g,u){const b=v.content.length;let m=!1,E=-1;if(g){const x=function(I,M,U,W,X,J){let Z=X.beginRuleCapturedEOL?0:-1;const Y=[];for(let Q=X;Q;Q=Q.pop()){const V=Q.getRule(I);V instanceof f.BeginWhileRule&&Y.push({rule:V,stack:Q})}for(let Q=Y.pop();Q;Q=Y.pop()){const{ruleScanner:V,findOptions:oe}=O(Q.rule,I,Q.stack.endRule,U,W===Z),F=V.findNextMatchSync(M,W,oe);if(a.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(V.toString())),!F){a.DebugFlags.InDebugMode&&console.log("  popping "+Q.rule.debugName+" - "+Q.rule.debugWhileRegExp),X=Q.stack.pop();break}if(F.ruleId!==f.whileRuleId){X=Q.stack.pop();break}F.captureIndices&&F.captureIndices.length&&(J.produce(Q.stack,F.captureIndices[0].start),L(I,M,U,Q.stack,J,Q.rule.whileCaptures,F.captureIndices),J.produce(Q.stack,F.captureIndices[0].end),Z=F.captureIndices[0].end,F.captureIndices[0].end>W&&(W=F.captureIndices[0].end,U=!1))}return{stack:X,linePos:W,anchorPosition:Z,isFirstLine:U}}(N,v,C,h,i,p);i=x.stack,h=x.linePos,C=x.isFirstLine,E=x.anchorPosition}const d=Date.now();for(;!m;){if(u!==0&&Date.now()-d>u)return new y(i,!0);A()}return new y(i,!1);function A(){a.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${h}: |${v.content.substr(h).replace(/\n$/,"\\n")}|`));const x=function(W,X,J,Z,Y,Q){const V=function(de,le,ve,ae,pe,Pe){const ye=pe.getRule(de),{ruleScanner:ge,findOptions:Se}=k(ye,de,pe.endRule,ve,ae===Pe);let me=0;a.DebugFlags.InDebugMode&&(me=S.performanceNow());const fe=ge.findNextMatchSync(le,ae,Se);if(a.DebugFlags.InDebugMode){const be=S.performanceNow()-me;be>5&&console.warn(`Rule ${ye.debugName} (${ye.id}) matching took ${be} against '${le}'`),console.log(`  scanning for (linePos: ${ae}, anchorPosition: ${Pe})`),console.log(ge.toString()),fe&&console.log(`matched rule id: ${fe.ruleId} from ${fe.captureIndices[0].start} to ${fe.captureIndices[0].end}`)}return fe?{captureIndices:fe.captureIndices,matchedRuleId:fe.ruleId}:null}(W,X,J,Z,Y,Q),oe=W.getInjections();if(oe.length===0)return V;const F=function(de,le,ve,ae,pe,Pe,ye){let ge,Se=Number.MAX_VALUE,me=null,fe=0;const be=Pe.contentNameScopesList.getScopeNames();for(let Ae=0,Ee=de.length;Ae<Ee;Ae++){const we=de[Ae];if(!we.matcher(be))continue;const Oe=le.getRule(we.ruleId),{ruleScanner:Ne,findOptions:Re}=k(Oe,le,null,ae,pe===ye),Ce=Ne.findNextMatchSync(ve,pe,Re);if(!Ce)continue;a.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${we.debugSelector}`),console.log(Ne.toString()));const Te=Ce.captureIndices[0].start;if(!(Te>=Se)&&(Se=Te,me=Ce.captureIndices,ge=Ce.ruleId,fe=we.priority,Se===pe))break}return me?{priorityMatch:fe===-1,captureIndices:me,matchedRuleId:ge}:null}(oe,W,X,J,Z,Y,Q);if(!F)return V;if(!V)return F;const te=V.captureIndices[0].start,ee=F.captureIndices[0].start;return ee<te||F.priorityMatch&&ee===te?F:V}(N,v,C,h,i,E);if(!x)return a.DebugFlags.InDebugMode&&console.log("  no more matches."),p.produce(i,b),void(m=!0);const I=x.captureIndices,M=x.matchedRuleId,U=!!(I&&I.length>0)&&I[0].end>h;if(M===f.endRuleId){const W=i.getRule(N);a.DebugFlags.InDebugMode&&console.log("  popping "+W.debugName+" - "+W.debugEndRegExp),p.produce(i,I[0].start),i=i.withContentNameScopesList(i.nameScopesList),L(N,v,C,i,p,W.endCaptures,I),p.produce(i,I[0].end);const X=i;if(i=i.parent,E=X.getAnchorPos(),!U&&X.getEnterPos()===h)return a.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),i=X,p.produce(i,b),void(m=!0)}else{const W=N.getRule(M);p.produce(i,I[0].start);const X=i,J=W.getName(v.content,I),Z=i.contentNameScopesList.pushAttributed(J,N);if(i=i.push(M,h,E,I[0].end===b,null,Z,Z),W instanceof f.BeginEndRule){const Y=W;a.DebugFlags.InDebugMode&&console.log("  pushing "+Y.debugName+" - "+Y.debugBeginRegExp),L(N,v,C,i,p,Y.beginCaptures,I),p.produce(i,I[0].end),E=I[0].end;const Q=Y.getContentName(v.content,I),V=Z.pushAttributed(Q,N);if(i=i.withContentNameScopesList(V),Y.endHasBackReferences&&(i=i.withEndRule(Y.getEndWithResolvedBackReferences(v.content,I))),!U&&X.hasSameRuleAs(i))return a.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),i=i.pop(),p.produce(i,b),void(m=!0)}else if(W instanceof f.BeginWhileRule){const Y=W;a.DebugFlags.InDebugMode&&console.log("  pushing "+Y.debugName),L(N,v,C,i,p,Y.beginCaptures,I),p.produce(i,I[0].end),E=I[0].end;const Q=Y.getContentName(v.content,I),V=Z.pushAttributed(Q,N);if(i=i.withContentNameScopesList(V),Y.whileHasBackReferences&&(i=i.withEndRule(Y.getWhileWithResolvedBackReferences(v.content,I))),!U&&X.hasSameRuleAs(i))return a.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),i=i.pop(),p.produce(i,b),void(m=!0)}else{const Y=W;if(a.DebugFlags.InDebugMode&&console.log("  matched "+Y.debugName+" - "+Y.debugMatchRegExp),L(N,v,C,i,p,Y.captures,I),p.produce(i,I[0].end),i=i.pop(),!U)return a.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),i=i.safePop(),p.produce(i,b),void(m=!0)}}I[0].end>h&&(h=I[0].end,C=!1)}}function k(N,v,C,h,i){return a.UseOnigurumaFindOptions?{ruleScanner:N.compile(v,C),findOptions:R(h,i)}:{ruleScanner:N.compileAG(v,C,h,i),findOptions:0}}function O(N,v,C,h,i){return a.UseOnigurumaFindOptions?{ruleScanner:N.compileWhile(v,C),findOptions:R(h,i)}:{ruleScanner:N.compileWhileAG(v,C,h,i),findOptions:0}}function R(N,v){let C=0;return N||(C|=1),v||(C|=4),C}function L(N,v,C,h,i,p,g){if(p.length===0)return;const u=v.content,b=Math.min(p.length,g.length),m=[],E=g[0].end;for(let d=0;d<b;d++){const A=p[d];if(A===null)continue;const x=g[d];if(x.length===0)continue;if(x.start>E)break;for(;m.length>0&&m[m.length-1].endPos<=x.start;)i.produceFromScopes(m[m.length-1].scopes,m[m.length-1].endPos),m.pop();if(m.length>0?i.produceFromScopes(m[m.length-1].scopes,x.start):i.produce(h,x.start),A.retokenizeCapturedWithRuleId){const M=A.getName(u,g),U=h.contentNameScopesList.pushAttributed(M,N),W=A.getContentName(u,g),X=U.pushAttributed(W,N),J=h.push(A.retokenizeCapturedWithRuleId,x.start,-1,!1,null,U,X),Z=N.createOnigString(u.substring(0,x.end));w(N,Z,C&&x.start===0,x.start,J,i,!1,0),_.disposeOnigString(Z);continue}const I=A.getName(u,g);if(I!==null){const M=(m.length>0?m[m.length-1].scopes:h.contentNameScopesList).pushAttributed(I,N);m.push(new P(M,x.end))}}for(;m.length>0;)i.produceFromScopes(m[m.length-1].scopes,m[m.length-1].endPos),m.pop()}t._tokenizeString=w;class P{constructor(v,C){this.scopes=v,this.endPos=C}}t.LocalStackElement=P},974:(l,t)=>{function c(S,y){throw new Error("Near offset "+S.pos+": "+y+" ~~~"+S.source.substr(S.pos,50)+"~~~")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseJSON=void 0,t.parseJSON=function(S,y,w){let k=new a(S),O=new _,R=0,L=null,P=[],N=[];function v(){P.push(R),N.push(L)}function C(){R=P.pop(),L=N.pop()}function h(i){c(k,i)}for(;f(k,O);){if(R===0){if(L!==null&&h("too many constructs in root"),O.type===3){L={},w&&(L.$vscodeTextmateLocation=O.toLocation(y)),v(),R=1;continue}if(O.type===2){L=[],v(),R=4;continue}h("unexpected token in root")}if(R===2){if(O.type===5){C();continue}if(O.type===7){R=3;continue}h("expected , or }")}if(R===1||R===3){if(R===1&&O.type===5){C();continue}if(O.type===1){let i=O.value;if(f(k,O)&&O.type===6||h("expected colon"),f(k,O)||h("expected value"),R=2,O.type===1){L[i]=O.value;continue}if(O.type===8){L[i]=null;continue}if(O.type===9){L[i]=!0;continue}if(O.type===10){L[i]=!1;continue}if(O.type===11){L[i]=parseFloat(O.value);continue}if(O.type===2){let p=[];L[i]=p,v(),R=4,L=p;continue}if(O.type===3){let p={};w&&(p.$vscodeTextmateLocation=O.toLocation(y)),L[i]=p,v(),R=1,L=p;continue}}h("unexpected token in dict")}if(R===5){if(O.type===4){C();continue}if(O.type===7){R=6;continue}h("expected , or ]")}if(R===4||R===6){if(R===4&&O.type===4){C();continue}if(R=5,O.type===1){L.push(O.value);continue}if(O.type===8){L.push(null);continue}if(O.type===9){L.push(!0);continue}if(O.type===10){L.push(!1);continue}if(O.type===11){L.push(parseFloat(O.value));continue}if(O.type===2){let i=[];L.push(i),v(),R=4,L=i;continue}if(O.type===3){let i={};w&&(i.$vscodeTextmateLocation=O.toLocation(y)),L.push(i),v(),R=1,L=i;continue}h("unexpected token in array")}h("unknown state")}return N.length!==0&&h("unclosed constructs"),L};class a{constructor(y){this.source=y,this.pos=0,this.len=y.length,this.line=1,this.char=0}}class _{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(y){return{filename:y,line:this.line,char:this.char}}}function f(S,y){y.value=null,y.type=0,y.offset=-1,y.len=-1,y.line=-1,y.char=-1;let w,k=S.source,O=S.pos,R=S.len,L=S.line,P=S.char;for(;;){if(O>=R)return!1;if(w=k.charCodeAt(O),w!==32&&w!==9&&w!==13){if(w!==10)break;O++,L++,P=0}else O++,P++}if(y.offset=O,y.line=L,y.char=P,w===34){for(y.type=1,O++,P++;;){if(O>=R)return!1;if(w=k.charCodeAt(O),O++,P++,w!==92){if(w===34)break}else O++,P++}y.value=k.substring(y.offset+1,O-1).replace(/\\u([0-9A-Fa-f]{4})/g,(N,v)=>String.fromCodePoint(parseInt(v,16))).replace(/\\(.)/g,(N,v)=>{switch(v){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:c(S,"invalid escape sequence")}throw new Error("unreachable")})}else if(w===91)y.type=2,O++,P++;else if(w===123)y.type=3,O++,P++;else if(w===93)y.type=4,O++,P++;else if(w===125)y.type=5,O++,P++;else if(w===58)y.type=6,O++,P++;else if(w===44)y.type=7,O++,P++;else if(w===110){if(y.type=8,O++,P++,w=k.charCodeAt(O),w!==117||(O++,P++,w=k.charCodeAt(O),w!==108)||(O++,P++,w=k.charCodeAt(O),w!==108))return!1;O++,P++}else if(w===116){if(y.type=9,O++,P++,w=k.charCodeAt(O),w!==114||(O++,P++,w=k.charCodeAt(O),w!==117)||(O++,P++,w=k.charCodeAt(O),w!==101))return!1;O++,P++}else if(w===102){if(y.type=10,O++,P++,w=k.charCodeAt(O),w!==97||(O++,P++,w=k.charCodeAt(O),w!==108)||(O++,P++,w=k.charCodeAt(O),w!==115)||(O++,P++,w=k.charCodeAt(O),w!==101))return!1;O++,P++}else for(y.type=11;;){if(O>=R)return!1;if(w=k.charCodeAt(O),!(w===46||w>=48&&w<=57||w===101||w===69||w===45||w===43))break;O++,P++}return y.len=O-y.offset,y.value===null&&(y.value=k.substr(y.offset,y.len)),S.pos=O,S.line=L,S.char=P,!0}},787:function(l,t,c){var a=this&&this.__createBinding||(Object.create?function(R,L,P,N){N===void 0&&(N=P),Object.defineProperty(R,N,{enumerable:!0,get:function(){return L[P]}})}:function(R,L,P,N){N===void 0&&(N=P),R[N]=L[P]}),_=this&&this.__exportStar||function(R,L){for(var P in R)P==="default"||Object.prototype.hasOwnProperty.call(L,P)||a(L,R,P)};Object.defineProperty(t,"__esModule",{value:!0}),t.applyStateStackDiff=t.diffStateStacksRefEq=t.parseRawGrammar=t.INITIAL=t.Registry=void 0;const f=c(391),S=c(50),y=c(652),w=c(583),k=c(965),O=c(442);Object.defineProperty(t,"applyStateStackDiff",{enumerable:!0,get:function(){return O.applyStateStackDiff}}),Object.defineProperty(t,"diffStateStacksRefEq",{enumerable:!0,get:function(){return O.diffStateStacksRefEq}}),_(c(44),t),t.Registry=class{constructor(R){this._options=R,this._syncRegistry=new y.SyncRegistry(w.Theme.createFromRawTheme(R.theme,R.colorMap),R.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(R,L){this._syncRegistry.setTheme(w.Theme.createFromRawTheme(R,L))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(R,L,P){return this.loadGrammarWithConfiguration(R,L,{embeddedLanguages:P})}loadGrammarWithConfiguration(R,L,P){return this._loadGrammar(R,L,P.embeddedLanguages,P.tokenTypes,new f.BalancedBracketSelectors(P.balancedBracketSelectors||[],P.unbalancedBracketSelectors||[]))}loadGrammar(R){return this._loadGrammar(R,0,null,null,null)}async _loadGrammar(R,L,P,N,v){const C=new k.ScopeDependencyProcessor(this._syncRegistry,R);for(;C.Q.length>0;)await Promise.all(C.Q.map(h=>this._loadSingleGrammar(h.scopeName))),C.processQueue();return this._grammarForScopeName(R,L,P,N,v)}async _loadSingleGrammar(R){return this._ensureGrammarCache.has(R)||this._ensureGrammarCache.set(R,this._doLoadSingleGrammar(R)),this._ensureGrammarCache.get(R)}async _doLoadSingleGrammar(R){const L=await this._options.loadGrammar(R);if(L){const P=typeof this._options.getInjections=="function"?this._options.getInjections(R):void 0;this._syncRegistry.addGrammar(L,P)}}async addGrammar(R,L=[],P=0,N=null){return this._syncRegistry.addGrammar(R,L),await this._grammarForScopeName(R.scopeName,P,N)}_grammarForScopeName(R,L=0,P=null,N=null,v=null){return this._syncRegistry.grammarForScopeName(R,L,P,N,v)}},t.INITIAL=f.StateStackImpl.NULL,t.parseRawGrammar=S.parseRawGrammar},736:(l,t)=>{function c(a){return!!a&&!!a.match(/[\w\.:]+/)}Object.defineProperty(t,"__esModule",{value:!0}),t.createMatchers=void 0,t.createMatchers=function(a,_){const f=[],S=function(O){let R=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,L=R.exec(O);return{next:()=>{if(!L)return null;const P=L[0];return L=R.exec(O),P}}}(a);let y=S.next();for(;y!==null;){let O=0;if(y.length===2&&y.charAt(1)===":"){switch(y.charAt(0)){case"R":O=1;break;case"L":O=-1;break;default:console.log(`Unknown priority ${y} in scope selector`)}y=S.next()}let R=k();if(f.push({matcher:R,priority:O}),y!==",")break;y=S.next()}return f;function w(){if(y==="-"){y=S.next();const O=w();return R=>!!O&&!O(R)}if(y==="("){y=S.next();const O=function(){const R=[];let L=k();for(;L&&(R.push(L),y==="|"||y===",");){do y=S.next();while(y==="|"||y===",");L=k()}return P=>R.some(N=>N(P))}();return y===")"&&(y=S.next()),O}if(c(y)){const O=[];do O.push(y),y=S.next();while(c(y));return R=>_(O,R)}return null}function k(){const O=[];let R=w();for(;R;)O.push(R),R=w();return L=>O.every(P=>P(L))}}},44:(l,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disposeOnigString=void 0,t.disposeOnigString=function(c){typeof c.dispose=="function"&&c.dispose()}},50:(l,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseRawGrammar=void 0;const a=c(69),_=c(350),f=c(974);t.parseRawGrammar=function(S,y=null){return y!==null&&/\.json$/.test(y)?(w=S,k=y,_.DebugFlags.InDebugMode?f.parseJSON(w,k,!0):JSON.parse(w)):function(O,R){return _.DebugFlags.InDebugMode?a.parseWithLocation(O,R,"$vscodeTextmateLocation"):a.parsePLIST(O)}(S,y);var w,k}},69:(l,t)=>{function c(a,_,f){const S=a.length;let y=0,w=1,k=0;function O(F){if(f===null)y+=F;else for(;F>0;)a.charCodeAt(y)===10?(y++,w++,k=0):(y++,k++),F--}function R(F){f===null?y=F:O(F-y)}function L(){for(;y<S;){let F=a.charCodeAt(y);if(F!==32&&F!==9&&F!==13&&F!==10)break;O(1)}}function P(F){return a.substr(y,F.length)===F&&(O(F.length),!0)}function N(F){let te=a.indexOf(F,y);R(te!==-1?te+F.length:S)}function v(F){let te=a.indexOf(F,y);if(te!==-1){let ee=a.substring(y,te);return R(te+F.length),ee}{let ee=a.substr(y);return R(S),ee}}S>0&&a.charCodeAt(0)===65279&&(y=1);let C=0,h=null,i=[],p=[],g=null;function u(F,te){i.push(C),p.push(h),C=F,h=te}function b(){if(i.length===0)return m("illegal state stack");C=i.pop(),h=p.pop()}function m(F){throw new Error("Near offset "+y+": "+F+" ~~~"+a.substr(y,50)+"~~~")}const E=function(){if(g===null)return m("missing <key>");let F={};f!==null&&(F[f]={filename:_,line:w,char:k}),h[g]=F,g=null,u(1,F)},d=function(){if(g===null)return m("missing <key>");let F=[];h[g]=F,g=null,u(2,F)},A=function(){let F={};f!==null&&(F[f]={filename:_,line:w,char:k}),h.push(F),u(1,F)},x=function(){let F=[];h.push(F),u(2,F)};function I(){if(C!==1)return m("unexpected </dict>");b()}function M(){return C===1||C!==2?m("unexpected </array>"):void b()}function U(F){if(C===1){if(g===null)return m("missing <key>");h[g]=F,g=null}else C===2?h.push(F):h=F}function W(F){if(isNaN(F))return m("cannot parse float");if(C===1){if(g===null)return m("missing <key>");h[g]=F,g=null}else C===2?h.push(F):h=F}function X(F){if(isNaN(F))return m("cannot parse integer");if(C===1){if(g===null)return m("missing <key>");h[g]=F,g=null}else C===2?h.push(F):h=F}function J(F){if(C===1){if(g===null)return m("missing <key>");h[g]=F,g=null}else C===2?h.push(F):h=F}function Z(F){if(C===1){if(g===null)return m("missing <key>");h[g]=F,g=null}else C===2?h.push(F):h=F}function Y(F){if(C===1){if(g===null)return m("missing <key>");h[g]=F,g=null}else C===2?h.push(F):h=F}function Q(){let F=v(">"),te=!1;return F.charCodeAt(F.length-1)===47&&(te=!0,F=F.substring(0,F.length-1)),{name:F.trim(),isClosed:te}}function V(F){if(F.isClosed)return"";let te=v("</");return N(">"),te.replace(/&#([0-9]+);/g,function(ee,de){return String.fromCodePoint(parseInt(de,10))}).replace(/&#x([0-9a-f]+);/g,function(ee,de){return String.fromCodePoint(parseInt(de,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(ee){switch(ee){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return ee})}for(;y<S&&(L(),!(y>=S));){const F=a.charCodeAt(y);if(O(1),F!==60)return m("expected <");if(y>=S)return m("unexpected end of input");const te=a.charCodeAt(y);if(te===63){O(1),N("?>");continue}if(te===33){if(O(1),P("--")){N("-->");continue}N(">");continue}if(te===47){if(O(1),L(),P("plist")){N(">");continue}if(P("dict")){N(">"),I();continue}if(P("array")){N(">"),M();continue}return m("unexpected closed tag")}let ee=Q();switch(ee.name){case"dict":C===1?E():C===2?A():(h={},f!==null&&(h[f]={filename:_,line:w,char:k}),u(1,h)),ee.isClosed&&I();continue;case"array":C===1?d():C===2?x():(h=[],u(2,h)),ee.isClosed&&M();continue;case"key":oe=V(ee),C!==1?m("unexpected <key>"):g!==null?m("too many <key>"):g=oe;continue;case"string":U(V(ee));continue;case"real":W(parseFloat(V(ee)));continue;case"integer":X(parseInt(V(ee),10));continue;case"date":J(new Date(V(ee)));continue;case"data":Z(V(ee));continue;case"true":V(ee),Y(!0);continue;case"false":V(ee),Y(!1);continue}if(!/^plist/.test(ee.name))return m("unexpected opened tag "+ee.name)}var oe;return h}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePLIST=t.parseWithLocation=void 0,t.parseWithLocation=function(a,_,f){return c(a,_,f)},t.parsePLIST=function(a){return c(a,null,null)}},652:(l,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncRegistry=void 0;const a=c(391);t.SyncRegistry=class{constructor(_,f){this._onigLibPromise=f,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=_}dispose(){for(const _ of this._grammars.values())_.dispose()}setTheme(_){this._theme=_}getColorMap(){return this._theme.getColorMap()}addGrammar(_,f){this._rawGrammars.set(_.scopeName,_),f&&this._injectionGrammars.set(_.scopeName,f)}lookup(_){return this._rawGrammars.get(_)}injections(_){return this._injectionGrammars.get(_)}getDefaults(){return this._theme.getDefaults()}themeMatch(_){return this._theme.match(_)}async grammarForScopeName(_,f,S,y,w){if(!this._grammars.has(_)){let k=this._rawGrammars.get(_);if(!k)return null;this._grammars.set(_,a.createGrammar(_,k,f,S,y,w,this,await this._onigLibPromise))}return this._grammars.get(_)}}},792:(l,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompiledRule=t.RegExpSourceList=t.RegExpSource=t.RuleFactory=t.BeginWhileRule=t.BeginEndRule=t.IncludeOnlyRule=t.MatchRule=t.CaptureRule=t.Rule=t.ruleIdToNumber=t.ruleIdFromNumber=t.whileRuleId=t.endRuleId=void 0;const a=c(878),_=c(965),f=/\\(\d+)/,S=/\\(\d+)/g;t.endRuleId=-1,t.whileRuleId=-2,t.ruleIdFromNumber=function(h){return h},t.ruleIdToNumber=function(h){return h};class y{constructor(i,p,g,u){this.$location=i,this.id=p,this._name=g||null,this._nameIsCapturing=a.RegexSource.hasCaptures(this._name),this._contentName=u||null,this._contentNameIsCapturing=a.RegexSource.hasCaptures(this._contentName)}get debugName(){const i=this.$location?`${a.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${i}`}getName(i,p){return this._nameIsCapturing&&this._name!==null&&i!==null&&p!==null?a.RegexSource.replaceCaptures(this._name,i,p):this._name}getContentName(i,p){return this._contentNameIsCapturing&&this._contentName!==null?a.RegexSource.replaceCaptures(this._contentName,i,p):this._contentName}}t.Rule=y;class w extends y{constructor(i,p,g,u,b){super(i,p,g,u),this.retokenizeCapturedWithRuleId=b}dispose(){}collectPatterns(i,p){throw new Error("Not supported!")}compile(i,p){throw new Error("Not supported!")}compileAG(i,p,g,u){throw new Error("Not supported!")}}t.CaptureRule=w;class k extends y{constructor(i,p,g,u,b){super(i,p,g,null),this._match=new N(u,this.id),this.captures=b,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(i,p){p.push(this._match)}compile(i,p){return this._getCachedCompiledPatterns(i).compile(i)}compileAG(i,p,g,u){return this._getCachedCompiledPatterns(i).compileAG(i,g,u)}_getCachedCompiledPatterns(i){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new v,this.collectPatterns(i,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}t.MatchRule=k;class O extends y{constructor(i,p,g,u,b){super(i,p,g,u),this.patterns=b.patterns,this.hasMissingPatterns=b.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(i,p){for(const g of this.patterns)i.getRule(g).collectPatterns(i,p)}compile(i,p){return this._getCachedCompiledPatterns(i).compile(i)}compileAG(i,p,g,u){return this._getCachedCompiledPatterns(i).compileAG(i,g,u)}_getCachedCompiledPatterns(i){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new v,this.collectPatterns(i,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}t.IncludeOnlyRule=O;class R extends y{constructor(i,p,g,u,b,m,E,d,A,x){super(i,p,g,u),this._begin=new N(b,this.id),this.beginCaptures=m,this._end=new N(E||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=d,this.applyEndPatternLast=A||!1,this.patterns=x.patterns,this.hasMissingPatterns=x.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(i,p){return this._end.resolveBackReferences(i,p)}collectPatterns(i,p){p.push(this._begin)}compile(i,p){return this._getCachedCompiledPatterns(i,p).compile(i)}compileAG(i,p,g,u){return this._getCachedCompiledPatterns(i,p).compileAG(i,g,u)}_getCachedCompiledPatterns(i,p){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new v;for(const g of this.patterns)i.getRule(g).collectPatterns(i,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,p):this._cachedCompiledPatterns.setSource(0,p)),this._cachedCompiledPatterns}}t.BeginEndRule=R;class L extends y{constructor(i,p,g,u,b,m,E,d,A){super(i,p,g,u),this._begin=new N(b,this.id),this.beginCaptures=m,this.whileCaptures=d,this._while=new N(E,t.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=A.patterns,this.hasMissingPatterns=A.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(i,p){return this._while.resolveBackReferences(i,p)}collectPatterns(i,p){p.push(this._begin)}compile(i,p){return this._getCachedCompiledPatterns(i).compile(i)}compileAG(i,p,g,u){return this._getCachedCompiledPatterns(i).compileAG(i,g,u)}_getCachedCompiledPatterns(i){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new v;for(const p of this.patterns)i.getRule(p).collectPatterns(i,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(i,p){return this._getCachedCompiledWhilePatterns(i,p).compile(i)}compileWhileAG(i,p,g,u){return this._getCachedCompiledWhilePatterns(i,p).compileAG(i,g,u)}_getCachedCompiledWhilePatterns(i,p){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new v,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,p||""),this._cachedCompiledWhilePatterns}}t.BeginWhileRule=L;class P{static createCaptureRule(i,p,g,u,b){return i.registerRule(m=>new w(p,m,g,u,b))}static getCompiledRuleId(i,p,g){return i.id||p.registerRule(u=>{if(i.id=u,i.match)return new k(i.$vscodeTextmateLocation,i.id,i.name,i.match,P._compileCaptures(i.captures,p,g));if(i.begin===void 0){i.repository&&(g=a.mergeObjects({},g,i.repository));let b=i.patterns;return b===void 0&&i.include&&(b=[{include:i.include}]),new O(i.$vscodeTextmateLocation,i.id,i.name,i.contentName,P._compilePatterns(b,p,g))}return i.while?new L(i.$vscodeTextmateLocation,i.id,i.name,i.contentName,i.begin,P._compileCaptures(i.beginCaptures||i.captures,p,g),i.while,P._compileCaptures(i.whileCaptures||i.captures,p,g),P._compilePatterns(i.patterns,p,g)):new R(i.$vscodeTextmateLocation,i.id,i.name,i.contentName,i.begin,P._compileCaptures(i.beginCaptures||i.captures,p,g),i.end,P._compileCaptures(i.endCaptures||i.captures,p,g),i.applyEndPatternLast,P._compilePatterns(i.patterns,p,g))}),i.id}static _compileCaptures(i,p,g){let u=[];if(i){let b=0;for(const m in i){if(m==="$vscodeTextmateLocation")continue;const E=parseInt(m,10);E>b&&(b=E)}for(let m=0;m<=b;m++)u[m]=null;for(const m in i){if(m==="$vscodeTextmateLocation")continue;const E=parseInt(m,10);let d=0;i[m].patterns&&(d=P.getCompiledRuleId(i[m],p,g)),u[E]=P.createCaptureRule(p,i[m].$vscodeTextmateLocation,i[m].name,i[m].contentName,d)}}return u}static _compilePatterns(i,p,g){let u=[];if(i)for(let b=0,m=i.length;b<m;b++){const E=i[b];let d=-1;if(E.include){const A=_.parseInclude(E.include);switch(A.kind){case 0:case 1:d=P.getCompiledRuleId(g[E.include],p,g);break;case 2:let x=g[A.ruleName];x&&(d=P.getCompiledRuleId(x,p,g));break;case 3:case 4:const I=A.scopeName,M=A.kind===4?A.ruleName:null,U=p.getExternalGrammar(I,g);if(U)if(M){let W=U.repository[M];W&&(d=P.getCompiledRuleId(W,p,U.repository))}else d=P.getCompiledRuleId(U.repository.$self,p,U.repository)}}else d=P.getCompiledRuleId(E,p,g);if(d!==-1){const A=p.getRule(d);let x=!1;if((A instanceof O||A instanceof R||A instanceof L)&&A.hasMissingPatterns&&A.patterns.length===0&&(x=!0),x)continue;u.push(d)}}return{patterns:u,hasMissingPatterns:(i?i.length:0)!==u.length}}}t.RuleFactory=P;class N{constructor(i,p){if(i){const g=i.length;let u=0,b=[],m=!1;for(let E=0;E<g;E++)if(i.charAt(E)==="\\"&&E+1<g){const d=i.charAt(E+1);d==="z"?(b.push(i.substring(u,E)),b.push("$(?!\\n)(?<!\\n)"),u=E+2):d!=="A"&&d!=="G"||(m=!0),E++}this.hasAnchor=m,u===0?this.source=i:(b.push(i.substring(u,g)),this.source=b.join(""))}else this.hasAnchor=!1,this.source=i;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=p,this.hasBackReferences=f.test(this.source)}clone(){return new N(this.source,this.ruleId)}setSource(i){this.source!==i&&(this.source=i,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(i,p){let g=p.map(u=>i.substring(u.start,u.end));return S.lastIndex=0,this.source.replace(S,(u,b)=>a.escapeRegExpCharacters(g[parseInt(b,10)]||""))}_buildAnchorCache(){let i,p,g,u,b=[],m=[],E=[],d=[];for(i=0,p=this.source.length;i<p;i++)g=this.source.charAt(i),b[i]=g,m[i]=g,E[i]=g,d[i]=g,g==="\\"&&i+1<p&&(u=this.source.charAt(i+1),u==="A"?(b[i+1]="",m[i+1]="",E[i+1]="A",d[i+1]="A"):u==="G"?(b[i+1]="",m[i+1]="G",E[i+1]="",d[i+1]="G"):(b[i+1]=u,m[i+1]=u,E[i+1]=u,d[i+1]=u),i++);return{A0_G0:b.join(""),A0_G1:m.join(""),A1_G0:E.join(""),A1_G1:d.join("")}}resolveAnchors(i,p){return this.hasAnchor&&this._anchorCache?i?p?this._anchorCache.A1_G1:this._anchorCache.A1_G0:p?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}t.RegExpSource=N;class v{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(i){this._items.push(i),this._hasAnchors=this._hasAnchors||i.hasAnchor}unshift(i){this._items.unshift(i),this._hasAnchors=this._hasAnchors||i.hasAnchor}length(){return this._items.length}setSource(i,p){this._items[i].source!==p&&(this._disposeCaches(),this._items[i].setSource(p))}compile(i){if(!this._cached){let p=this._items.map(g=>g.source);this._cached=new C(i,p,this._items.map(g=>g.ruleId))}return this._cached}compileAG(i,p,g){return this._hasAnchors?p?g?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(i,p,g)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(i,p,g)),this._anchorCache.A1_G0):g?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(i,p,g)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(i,p,g)),this._anchorCache.A0_G0):this.compile(i)}_resolveAnchors(i,p,g){let u=this._items.map(b=>b.resolveAnchors(p,g));return new C(i,u,this._items.map(b=>b.ruleId))}}t.RegExpSourceList=v;class C{constructor(i,p,g){this.regExps=p,this.rules=g,this.scanner=i.createOnigScanner(p)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const i=[];for(let p=0,g=this.rules.length;p<g;p++)i.push("   - "+this.rules[p]+": "+this.regExps[p]);return i.join(`
`)}findNextMatchSync(i,p,g){const u=this.scanner.findNextMatchSync(i,p,g);return u?{ruleId:this.rules[u.index],captureIndices:u.captureIndices}:null}}t.CompiledRule=C},583:(l,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeTrieElement=t.ThemeTrieElementRule=t.ColorMap=t.fontStyleToString=t.ParsedThemeRule=t.parseTheme=t.StyleAttributes=t.ScopeStack=t.Theme=void 0;const a=c(878);class _{constructor(v,C,h){this._colorMap=v,this._defaults=C,this._root=h,this._cachedMatchRoot=new a.CachedFn(i=>this._root.match(i))}static createFromRawTheme(v,C){return this.createFromParsedTheme(w(v),C)}static createFromParsedTheme(v,C){return function(h,i){h.sort((d,A)=>{let x=a.strcmp(d.scope,A.scope);return x!==0?x:(x=a.strArrCmp(d.parentScopes,A.parentScopes),x!==0?x:d.index-A.index)});let p=0,g="#000000",u="#ffffff";for(;h.length>=1&&h[0].scope==="";){let d=h.shift();d.fontStyle!==-1&&(p=d.fontStyle),d.foreground!==null&&(g=d.foreground),d.background!==null&&(u=d.background)}let b=new O(i),m=new y(p,b.getId(g),b.getId(u)),E=new P(new L(0,null,-1,0,0),[]);for(let d=0,A=h.length;d<A;d++){let x=h[d];E.insert(0,x.scope,x.parentScopes,x.fontStyle,b.getId(x.foreground),b.getId(x.background))}return new _(b,m,E)}(v,C)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(v){if(v===null)return this._defaults;const C=v.scopeName,h=this._cachedMatchRoot.get(C).find(i=>function(p,g){if(g.length===0)return!0;for(let u=0;u<g.length;u++){let b=g[u],m=!1;if(b===">"){if(u===g.length-1)return!1;b=g[++u],m=!0}for(;p&&!S(p.scopeName,b);){if(m)return!1;p=p.parent}if(!p)return!1;p=p.parent}return!0}(v.parent,i.parentScopes));return h?new y(h.fontStyle,h.foreground,h.background):null}}t.Theme=_;class f{constructor(v,C){this.parent=v,this.scopeName=C}static push(v,C){for(const h of C)v=new f(v,h);return v}static from(...v){let C=null;for(let h=0;h<v.length;h++)C=new f(C,v[h]);return C}push(v){return new f(this,v)}getSegments(){let v=this;const C=[];for(;v;)C.push(v.scopeName),v=v.parent;return C.reverse(),C}toString(){return this.getSegments().join(" ")}extends(v){return this===v||this.parent!==null&&this.parent.extends(v)}getExtensionIfDefined(v){const C=[];let h=this;for(;h&&h!==v;)C.push(h.scopeName),h=h.parent;return h===v?C.reverse():void 0}}function S(N,v){return v===N||N.startsWith(v)&&N[v.length]==="."}t.ScopeStack=f;class y{constructor(v,C,h){this.fontStyle=v,this.foregroundId=C,this.backgroundId=h}}function w(N){if(!N)return[];if(!N.settings||!Array.isArray(N.settings))return[];let v=N.settings,C=[],h=0;for(let i=0,p=v.length;i<p;i++){let g,u=v[i];if(!u.settings)continue;if(typeof u.scope=="string"){let d=u.scope;d=d.replace(/^[,]+/,""),d=d.replace(/[,]+$/,""),g=d.split(",")}else g=Array.isArray(u.scope)?u.scope:[""];let b=-1;if(typeof u.settings.fontStyle=="string"){b=0;let d=u.settings.fontStyle.split(" ");for(let A=0,x=d.length;A<x;A++)switch(d[A]){case"italic":b|=1;break;case"bold":b|=2;break;case"underline":b|=4;break;case"strikethrough":b|=8}}let m=null;typeof u.settings.foreground=="string"&&a.isValidHexColor(u.settings.foreground)&&(m=u.settings.foreground);let E=null;typeof u.settings.background=="string"&&a.isValidHexColor(u.settings.background)&&(E=u.settings.background);for(let d=0,A=g.length;d<A;d++){let x=g[d].trim().split(" "),I=x[x.length-1],M=null;x.length>1&&(M=x.slice(0,x.length-1),M.reverse()),C[h++]=new k(I,M,i,b,m,E)}}return C}t.StyleAttributes=y,t.parseTheme=w;class k{constructor(v,C,h,i,p,g){this.scope=v,this.parentScopes=C,this.index=h,this.fontStyle=i,this.foreground=p,this.background=g}}t.ParsedThemeRule=k,t.fontStyleToString=function(N){if(N===-1)return"not set";let v="";return 1&N&&(v+="italic "),2&N&&(v+="bold "),4&N&&(v+="underline "),8&N&&(v+="strikethrough "),v===""&&(v="none"),v.trim()};class O{constructor(v){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(v)){this._isFrozen=!0;for(let C=0,h=v.length;C<h;C++)this._color2id[v[C]]=C,this._id2color[C]=v[C]}else this._isFrozen=!1}getId(v){if(v===null)return 0;v=v.toUpperCase();let C=this._color2id[v];if(C)return C;if(this._isFrozen)throw new Error(`Missing color in color map - ${v}`);return C=++this._lastColorId,this._color2id[v]=C,this._id2color[C]=v,C}getColorMap(){return this._id2color.slice(0)}}t.ColorMap=O;const R=Object.freeze([]);class L{constructor(v,C,h,i,p){this.scopeDepth=v,this.parentScopes=C||R,this.fontStyle=h,this.foreground=i,this.background=p}clone(){return new L(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(v){let C=[];for(let h=0,i=v.length;h<i;h++)C[h]=v[h].clone();return C}acceptOverwrite(v,C,h,i){this.scopeDepth>v?console.log("how did this happen?"):this.scopeDepth=v,C!==-1&&(this.fontStyle=C),h!==0&&(this.foreground=h),i!==0&&(this.background=i)}}t.ThemeTrieElementRule=L;class P{constructor(v,C=[],h={}){this._mainRule=v,this._children=h,this._rulesWithParentScopes=C}static _cmpBySpecificity(v,C){if(v.scopeDepth!==C.scopeDepth)return C.scopeDepth-v.scopeDepth;let h=0,i=0;for(;v.parentScopes[h]===">"&&h++,C.parentScopes[i]===">"&&i++,!(h>=v.parentScopes.length||i>=C.parentScopes.length);){const p=C.parentScopes[i].length-v.parentScopes[h].length;if(p!==0)return p;h++,i++}return C.parentScopes.length-v.parentScopes.length}match(v){if(v!==""){let h,i,p=v.indexOf(".");if(p===-1?(h=v,i=""):(h=v.substring(0,p),i=v.substring(p+1)),this._children.hasOwnProperty(h))return this._children[h].match(i)}const C=this._rulesWithParentScopes.concat(this._mainRule);return C.sort(P._cmpBySpecificity),C}insert(v,C,h,i,p,g){if(C==="")return void this._doInsertHere(v,h,i,p,g);let u,b,m,E=C.indexOf(".");E===-1?(u=C,b=""):(u=C.substring(0,E),b=C.substring(E+1)),this._children.hasOwnProperty(u)?m=this._children[u]:(m=new P(this._mainRule.clone(),L.cloneArr(this._rulesWithParentScopes)),this._children[u]=m),m.insert(v+1,b,h,i,p,g)}_doInsertHere(v,C,h,i,p){if(C!==null){for(let g=0,u=this._rulesWithParentScopes.length;g<u;g++){let b=this._rulesWithParentScopes[g];if(a.strArrCmp(b.parentScopes,C)===0)return void b.acceptOverwrite(v,h,i,p)}h===-1&&(h=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),p===0&&(p=this._mainRule.background),this._rulesWithParentScopes.push(new L(v,C,h,i,p))}else this._mainRule.acceptOverwrite(v,h,i,p)}}t.ThemeTrieElement=P},878:(l,t)=>{function c(f){return Array.isArray(f)?function(S){let y=[];for(let w=0,k=S.length;w<k;w++)y[w]=c(S[w]);return y}(f):typeof f=="object"?function(S){let y={};for(let w in S)y[w]=c(S[w]);return y}(f):f}Object.defineProperty(t,"__esModule",{value:!0}),t.performanceNow=t.CachedFn=t.escapeRegExpCharacters=t.isValidHexColor=t.strArrCmp=t.strcmp=t.RegexSource=t.basename=t.mergeObjects=t.clone=void 0,t.clone=function(f){return c(f)},t.mergeObjects=function(f,...S){return S.forEach(y=>{for(let w in y)f[w]=y[w]}),f},t.basename=function f(S){const y=~S.lastIndexOf("/")||~S.lastIndexOf("\\");return y===0?S:~y==S.length-1?f(S.substring(0,S.length-1)):S.substr(1+~y)};let a=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function _(f,S){return f<S?-1:f>S?1:0}t.RegexSource=class{static hasCaptures(f){return f!==null&&(a.lastIndex=0,a.test(f))}static replaceCaptures(f,S,y){return f.replace(a,(w,k,O,R)=>{let L=y[parseInt(k||O,10)];if(!L)return w;{let P=S.substring(L.start,L.end);for(;P[0]===".";)P=P.substring(1);switch(R){case"downcase":return P.toLowerCase();case"upcase":return P.toUpperCase();default:return P}}})}},t.strcmp=_,t.strArrCmp=function(f,S){if(f===null&&S===null)return 0;if(!f)return-1;if(!S)return 1;let y=f.length,w=S.length;if(y===w){for(let k=0;k<y;k++){let O=_(f[k],S[k]);if(O!==0)return O}return 0}return y-w},t.isValidHexColor=function(f){return!!(/^#[0-9a-f]{6}$/i.test(f)||/^#[0-9a-f]{8}$/i.test(f)||/^#[0-9a-f]{3}$/i.test(f)||/^#[0-9a-f]{4}$/i.test(f))},t.escapeRegExpCharacters=function(f){return f.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},t.CachedFn=class{constructor(f){this.fn=f,this.cache=new Map}get(f){if(this.cache.has(f))return this.cache.get(f);const S=this.fn(f);return this.cache.set(f,S),S}},t.performanceNow=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()}}},o={};return function l(t){var c=o[t];if(c!==void 0)return c.exports;var a=o[t]={exports:{}};return s[t].call(a.exports,a,a.exports,l),a.exports}(787)})())})(main);var mainExports=main.exports;function applyStyle(e,n,s){let o;createRenderEffect(()=>{var l;const t=(l=n.style)==null?void 0:l[s];t!==o&&((o=t)!=null?e.style.setProperty(s,typeof t>"u"?null:t.toString()):e.style.removeProperty(s))})}function hexToRgb(e){let n=parseInt(e.slice(1),16),s=n>>16&255,o=n>>8&255,l=n&255;return[s,o,l]}function luminance(e,n,s){const o=[e,n,s].map(l=>(l/=255,l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4)));return o[0]*.2126+o[1]*.7152+o[2]*.0722}function once(e,n,s){const o=typeof e=="function"?e():e;return o?n(o):s?s():void 0}function when(e,n,s){return()=>once(e,n,s)}function every(...e){function n(){const s=new Array(e.length);for(let o=0;o<e.length;o++){const l=typeof e[o]=="function"?e[o]():e[o];if(!l)return;s[o]=l}return s}return n}function countDigits(e){return e===0?1:Math.floor(Math.log10(Math.abs(e)))+1}function escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getLongestLineSize(e){let n=0;for(const s of e)s.length>n&&(n=s.length);return n}class Stack{constructor(){__privateAdd(this,_array,[])}peek(){return __privateGet(this,_array)[__privateGet(this,_array).length-1]}push(n){__privateGet(this,_array).push(n)}pop(){return __privateGet(this,_array).pop()}}_array=new WeakMap;var _tmpl$$3=template("<pre part=line>"),_tmpl$2$1=template("<div part=root><code part=code></code><textarea part=textarea autocomplete=off inputmode=none></textarea><code aria-hidden>&nbsp;");const SEGMENT_SIZE=100,WINDOW=50,TOKENIZER_CACHE={},REGISTRY=new mainExports.Registry({onigLib:oniguruma,loadGrammar:e=>fetchFromCDN("grammar",e).then(n=>(n.scopeName=e,n))}),[WASM_LOADED]=createRoot(()=>createResource(async()=>fetch(urlFromCDN("oniguruma",null)).then(e=>e.arrayBuffer()).then(e=>mainExports$1.loadWASM(e)).then(()=>!0)));class ThemeManager{constructor(n){__publicField(this,"themeData"),__privateAdd(this,_scopes,{}),this.themeData=n}resolveScope(n){const s=n.join("-");if(__privateGet(this,_scopes)[s])return __privateGet(this,_scopes)[s];let o={};for(let l=0;l<n.length;l++){const t=n[l];for(const c of this.themeData.tokenColors){const a=Array.isArray(c.scope)?c.scope:[c.scope];for(const _ of a)t.startsWith(_||"")&&(o={...o,...c.settings})}}return __privateGet(this,_scopes)[s]=o}getBackgroundColor(){var n;return((n=this.themeData.colors)==null?void 0:n["editor.background"])||void 0}getForegroundColor(){var n;return((n=this.themeData.colors)==null?void 0:n["editor.foreground"])||void 0}}_scopes=new WeakMap;function compareStacks(e,n){let s=!1;return e===n?!0:!e||!n?!1:(e.ruleId!==n.ruleId&&(s=!0),e.depth!==n.depth&&(s=!0),compareScopes(e.nameScopesList,n.nameScopesList)||(s=!0),compareScopes(e.contentNameScopesList,n.contentNameScopesList)||(s=!0),!s)}function compareScopes(e,n){var s,o;return!e&&!n?!0:!(!e||!n||((s=e.scopePath)==null?void 0:s.scopeName)!==((o=n.scopePath)==null?void 0:o.scopeName)||e.tokenAttributes!==n.tokenAttributes)}const TmTextareaContext=createContext(null);function useTmTextarea(){const e=useContext(TmTextareaContext);if(!e)throw"useTextarea should be used in a descendant of TmTextarea";return e}function createTmTextarea(e){function n(s){const o=useTmTextarea(),l=o.segments.peek(),[t,c]=createSignal(l?.stack||mainExports.INITIAL,{equals:compareStacks}),a=s.index*SEGMENT_SIZE,_=a+SEGMENT_SIZE,f=createLazyMemo(when(every(()=>o.tokenizer,()=>o.theme),([S,y])=>{let w=l?.stack||mainExports.INITIAL;const k=o.lines.slice(a,_).map(O=>{const{ruleStack:R,tokens:L}=S.tokenizeLine(O,w);return w=R,L.map(P=>{const N=y.resolveScope(P.scopes),v=O.slice(P.startIndex,P.endIndex);return`<span style="${N.foreground?`color:${N.foreground};`:""}${N.fontStyle?`text-decoration:${N.fontStyle}`:""}">${escapeHTML(v)}</span>`}).join("")});return c(w),k},()=>o.lines.slice(a,_).map(escapeHTML)));return o.segments.push({get stack(){return t()}}),onCleanup(()=>o.segments.pop()),createComponent(Show,{get when(){return o.isSegmentVisible(s.index*SEGMENT_SIZE)},get children(){return createComponent(For,{get each(){return f()},children:(S,y)=>createComponent(Show,{get when(){return o.isVisible(s.index*SEGMENT_SIZE+y())},get children(){var w=_tmpl$$3();return w.innerHTML=S,createRenderEffect(k=>{var O=e.line,R=s.index*SEGMENT_SIZE+y();return O!==k.e&&className(w,k.e=O),R!==k.t&&((k.t=R)!=null?w.style.setProperty("--tm-line-number",R):w.style.removeProperty("--tm-line-number")),k},{e:void 0,t:void 0}),w}})})}})}return function(o){const[l,t]=splitProps(mergeProps({editable:!0},o),["class","grammar","onInput","value","style","theme","editable","onScroll","textareaRef"]),[c,a]=splitProps(t,["onKeyDown","onKeyPress","onKeyUp","onChange"]);let _;const[f,S]=createSignal(),[y,w]=createSignal(),[k,O]=createSignal(0),[R,L]=createSignal(o.value),[P]=createResource(every(()=>o.grammar,WASM_LOADED),async([m])=>m in TOKENIZER_CACHE?TOKENIZER_CACHE[m]:TOKENIZER_CACHE[m]=await REGISTRY.loadGrammar(m)),[N]=createResource(()=>o.theme,async m=>fetchFromCDN("theme",m).then(E=>new ThemeManager(E))),v=createMemo(()=>R().split(`
`)),C=createMemo(()=>getLongestLineSize(v())),h=createMemo(()=>{var m;return Math.floor(k()/(((m=f())==null?void 0:m.height)||1))}),i=createMemo(()=>{var m,E;return Math.floor((k()+(((m=y())==null?void 0:m.height)||0))/(((E=f())==null?void 0:E.height)||1))}),p=createMemo(()=>Math.floor(h()/SEGMENT_SIZE)),g=createMemo(()=>Math.ceil(i()/SEGMENT_SIZE)),u=when(N,m=>{const E=m.getBackgroundColor(),d=luminance(...hexToRgb(E));return`rgba(98, 114, 164, ${d>.9?.1:d<.1?.25:.175})`}),b=when(()=>l.style,m=>splitProps(m,["width","height"])[1]);return onMount(()=>new ResizeObserver(([m])=>w(m?.contentRect)).observe(_)),createRenderEffect(()=>L(o.value)),createRenderEffect(()=>{var m;return console.log((m=N())==null?void 0:m.getForegroundColor())}),createComponent(TmTextareaContext.Provider,{get value(){return{get viewport(){return y()},get character(){return f()},get scrollTop(){return k()},get lines(){return v()},get theme(){return N()},get tokenizer(){return P()},segments:new Stack,isVisible:createSelector(()=>[h(),i()],(m,[E,d])=>m>v().length-1?!1:m+WINDOW>E&&m-WINDOW<d),isSegmentVisible:createSelector(()=>[p(),g()],m=>{const E=Math.floor((m-WINDOW)/SEGMENT_SIZE),d=Math.ceil((m+WINDOW)/SEGMENT_SIZE);return E<=p()&&d>=g()||E>=p()&&E<=g()||d>=p()&&d<=g()})}},get children(){var m=_tmpl$2$1(),E=m.firstChild,d=E.nextSibling,A=d.nextSibling;m.addEventListener("scroll",I=>{var M;O(I.currentTarget.scrollTop),(M=o.onScroll)==null||M.call(o,I)}),use(I=>{_=I,applyStyle(I,o,"width"),applyStyle(I,o,"height")},m),spread(m,mergeProps({get class(){return clsx(e.container,l.class)},get style(){var I,M,U,W;return{"--tm-background-color":(I=N())==null?void 0:I.getBackgroundColor(),"--tm-char-height":`${((M=f())==null?void 0:M.height)||0}px`,"--tm-char-width":`${((U=f())==null?void 0:U.width)||0}px`,"--tm-foreground-color":(W=N())==null?void 0:W.getForegroundColor(),"--tm-line-count":v().length,"--tm-line-size":C(),"--tm-selection-color":u(),"--tm-line-digits":countDigits(v().length),...b()}}},a),!1,!0),insert(E,createComponent(Index,{get each(){return Array.from({length:Math.ceil(v().length/SEGMENT_SIZE)})},children:(I,M)=>createComponent(n,{index:M})})),d.addEventListener("scroll",I=>{I.preventDefault(),I.stopPropagation()});var x=l.textareaRef;return typeof x=="function"?use(x,d):l.textareaRef=d,setAttribute(d,"spellcheck",!1),d.addEventListener("input",I=>{var M;const W=I.currentTarget.value;L(W),(M=l.onInput)==null||M.call(l,I)}),spread(d,mergeProps({get class(){return e.textarea},get disabled(){return!l.editable},get value(){return l.value},get rows(){return v().length}},c),!1,!1),use(I=>{new ResizeObserver(([M])=>{const{height:U,width:W}=getComputedStyle(M.target);S({height:Number(U.replace("px","")),width:Number(W.replace("px",""))})}).observe(I)},A),createRenderEffect(I=>{var M=e.code,U=e.character;return M!==I.e&&className(E,I.e=M),U!==I.t&&className(A,I.t=U),I},{e:void 0,t:void 0}),m}})}}const container$1="index-module__container___GdQY1",code="index-module__code___B9PCM",line="index-module__line___n1EGr",character="index-module__character___mhd0f",textarea$1="index-module__textarea___cMW-q",styles$2={container:container$1,code,line,character,textarea:textarea$1},TmTextarea=createTmTextarea(styles$2),$RAW=Symbol("store-raw"),$NODE=Symbol("store-node"),$HAS=Symbol("store-has"),$SELF=Symbol("store-self");function wrap$1(e){let n=e[$PROXY];if(!n&&(Object.defineProperty(e,$PROXY,{value:n=new Proxy(e,proxyTraps$1)}),!Array.isArray(e))){const s=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let l=0,t=s.length;l<t;l++){const c=s[l];o[c].get&&Object.defineProperty(e,c,{enumerable:o[c].enumerable,get:o[c].get.bind(n)})}}return n}function isWrappable(e){let n;return e!=null&&typeof e=="object"&&(e[$PROXY]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function unwrap(e,n=new Set){let s,o,l,t;if(s=e!=null&&e[$RAW])return s;if(!isWrappable(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let c=0,a=e.length;c<a;c++)l=e[c],(o=unwrap(l,n))!==l&&(e[c]=o)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const c=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let _=0,f=c.length;_<f;_++)t=c[_],!a[t].get&&(l=e[t],(o=unwrap(l,n))!==l&&(e[t]=o))}return e}function getNodes(e,n){let s=e[n];return s||Object.defineProperty(e,n,{value:s=Object.create(null)}),s}function getNode(e,n,s){if(e[n])return e[n];const[o,l]=createSignal(s,{equals:!1,internal:!0});return o.$=l,e[n]=o}function proxyDescriptor$1(e,n){const s=Reflect.getOwnPropertyDescriptor(e,n);return!s||s.get||!s.configurable||n===$PROXY||n===$NODE||(delete s.value,delete s.writable,s.get=()=>e[$PROXY][n]),s}function trackSelf(e){getListener()&&getNode(getNodes(e,$NODE),$SELF)()}function ownKeys(e){return trackSelf(e),Reflect.ownKeys(e)}const proxyTraps$1={get(e,n,s){if(n===$RAW)return e;if(n===$PROXY)return s;if(n===$TRACK)return trackSelf(e),s;const o=getNodes(e,$NODE),l=o[n];let t=l?l():e[n];if(n===$NODE||n===$HAS||n==="__proto__")return t;if(!l){const c=Object.getOwnPropertyDescriptor(e,n);getListener()&&(typeof t!="function"||e.hasOwnProperty(n))&&!(c&&c.get)&&(t=getNode(o,n,t)())}return isWrappable(t)?wrap$1(t):t},has(e,n){return n===$RAW||n===$PROXY||n===$TRACK||n===$NODE||n===$HAS||n==="__proto__"?!0:(getListener()&&getNode(getNodes(e,$HAS),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys,getOwnPropertyDescriptor:proxyDescriptor$1};function setProperty(e,n,s,o=!1){if(!o&&e[n]===s)return;const l=e[n],t=e.length;s===void 0?(delete e[n],e[$HAS]&&e[$HAS][n]&&l!==void 0&&e[$HAS][n].$()):(e[n]=s,e[$HAS]&&e[$HAS][n]&&l===void 0&&e[$HAS][n].$());let c=getNodes(e,$NODE),a;if((a=getNode(c,n,l))&&a.$(()=>s),Array.isArray(e)&&e.length!==t){for(let _=e.length;_<t;_++)(a=c[_])&&a.$();(a=getNode(c,"length",t))&&a.$(e.length)}(a=c[$SELF])&&a.$()}function mergeStoreNode(e,n){const s=Object.keys(n);for(let o=0;o<s.length;o+=1){const l=s[o];setProperty(e,l,n[l])}}function updateArray(e,n){if(typeof n=="function"&&(n=n(e)),n=unwrap(n),Array.isArray(n)){if(e===n)return;let s=0,o=n.length;for(;s<o;s++){const l=n[s];e[s]!==l&&setProperty(e,s,l)}setProperty(e,"length",o)}else mergeStoreNode(e,n)}function updatePath(e,n,s=[]){let o,l=e;if(n.length>1){o=n.shift();const c=typeof o,a=Array.isArray(e);if(Array.isArray(o)){for(let _=0;_<o.length;_++)updatePath(e,[o[_]].concat(n),s);return}else if(a&&c==="function"){for(let _=0;_<e.length;_++)o(e[_],_)&&updatePath(e,[_].concat(n),s);return}else if(a&&c==="object"){const{from:_=0,to:f=e.length-1,by:S=1}=o;for(let y=_;y<=f;y+=S)updatePath(e,[y].concat(n),s);return}else if(n.length>1){updatePath(e[o],n,[o].concat(s));return}l=e[o],s=[o].concat(s)}let t=n[0];typeof t=="function"&&(t=t(l,s),t===l)||o===void 0&&t==null||(t=unwrap(t),o===void 0||isWrappable(l)&&isWrappable(t)&&!Array.isArray(t)?mergeStoreNode(l,t):setProperty(e,o,t))}function createStore(...[e,n]){const s=unwrap(e||{}),o=Array.isArray(s),l=wrap$1(s);function t(...c){batch(()=>{o&&c.length===1?updateArray(s,c[0]):updatePath(s,c)})}return[l,t]}const producers=new WeakMap,setterTraps={get(e,n){if(n===$RAW)return e;const s=e[n];let o;return isWrappable(s)?producers.get(s)||(producers.set(s,o=new Proxy(s,setterTraps)),o):s},set(e,n,s){return setProperty(e,n,unwrap(s)),!0},deleteProperty(e,n){return setProperty(e,n,void 0,!0),!0}};function produce(e){return n=>{if(isWrappable(n)){let s;(s=producers.get(n))||producers.set(n,s=new Proxy(n,setterTraps)),e(s)}return n}}function createFile(e){const[n,s]=createSignal(e);return{type:"file",get:n,set:s}}function createFileSystem(){const[e,n]=createStore({});function s(t){const c=t.split("/");if(!c.map((_,f)=>c.slice(0,f+1).join("/")).filter(Boolean).every(_=>_ in e))throw`Path is invalid ${t}`}function o(t,c){return t=PathUtils.normalize(t),s(t),c?.withFileTypes?Object.entries(e).filter(([a])=>PathUtils.getParent(a)===t&&a!==t).map(([a,_])=>({type:_.type,path:a})):Object.keys(e).filter(a=>PathUtils.getParent(a)===t)}const l={exists(t){return t in e},getType(t){return t=PathUtils.normalize(t),s(t),e[t].type},readdir:o,mkdir(t,c){if(t=PathUtils.normalize(t),c?.recursive){const a=t.split("/");a.forEach((_,f)=>{n(a.slice(0,f).join("/"),{type:"dir"})});return}s(PathUtils.getParent(t)),n(t,{type:"dir"})},readFile(t){t=PathUtils.normalize(t),s(t);const c=e[t];if(c.type==="dir")throw`Path is not a file ${t}`;return c.get()},rename(t,c){if(t=PathUtils.normalize(t),c=PathUtils.normalize(c),l.exists(c))throw console.error(e),`Path ${c} already exists.`;if(!l.exists(t)){console.error(`Path does not exist: ${t}`);return}n(produce(a=>{Object.keys(e).forEach(_=>{if(_.startsWith(t)){const f=_.replace(t,c),S=a[_];a[f]=S,delete a[_]}})}))},rm(t,c){if(t=PathUtils.normalize(t),(!c||!c.force)&&s(t),!c||!c.recursive){const a=Object.keys(e).filter(_=>_===t?!1:_.includes(t));if(a.length>0)throw`Directory is not empty ${a}`}n(produce(a=>{Object.keys(a).filter(_=>_.includes(t)).forEach(_=>delete a[_])}))},writeFile(t,c){t=PathUtils.normalize(t),s(PathUtils.getParent(t));const a=e[t];if(a?.type==="dir")throw`A directory already exist with the same name: ${t}`;a?a.set(c):n(t,createFile(c))}};return l}const FALLBACK=Symbol("fallback");function dispose(e){for(const n of e)n.dispose()}function keyArray(e,n,s,o={}){const l=new Map;return onCleanup(()=>dispose(l.values())),()=>{const c=e()||[];return c[$TRACK],untrack(()=>{if(!c.length)return dispose(l.values()),l.clear(),o.fallback?[createRoot(y=>(l.set(FALLBACK,{dispose:y}),o.fallback()))]:[];const a=new Array(c.length),_=l.get(FALLBACK);if(!l.size||_){_?.dispose(),l.delete(FALLBACK);for(let S=0;S<c.length;S++){const y=c[S],w=n(y,S);t(a,y,S,w)}return a}const f=new Set(l.keys());for(let S=0;S<c.length;S++){const y=c[S],w=n(y,S);f.delete(w);const k=l.get(w);k?(a[S]=k.mapped,k.setIndex?.(S),k.setItem(()=>y)):t(a,y,S,w)}for(const S of f)l.get(S)?.dispose(),l.delete(S);return a})};function t(c,a,_,f){createRoot(S=>{const[y,w]=createSignal(a),k={setItem:w,dispose:S};if(s.length>1){const[O,R]=createSignal(_);k.setIndex=R,k.mapped=s(y,O)}else k.mapped=s(y);l.set(f,k),c[_]=k.mapped})}}function Key(e){const{by:n}=e;return createMemo(keyArray(()=>e.each,typeof n=="function"?n:s=>s[n],e.children,"fallback"in e?{fallback:()=>e.fallback}:void 0))}const toFunction=e=>(...n)=>{const s=e();return typeof s=="function"?s(...n):s};function repeat(e,n,s={}){let o=[],l=[],t=0;onCleanup(()=>o.forEach(f=>f()));const c=f=>{if(f===0)return o.forEach(S=>S()),s.fallback?createRoot(S=>(o=[S],l=[s.fallback()])):(o=[],l=[]);if(t===0){o[0]&&o[0]();for(let S=0;S<f;S++)l[S]=createRoot(a.bind(void 0,S));return l}{const S=t-f;if(S>0){for(let y=t-1;y>=f;y--)o[y]();return l.splice(f,S),o.splice(f,S),l}}for(let S=t;S<f;S++)l[S]=createRoot(a.bind(void 0,S));return l},a=(f,S)=>(o[f]=S,n(f)),_=createMemo(()=>Math.floor(Math.max(e(),0)));return()=>{const f=_();return untrack(()=>{const S=c(f);return t=f,S})}}function Repeat(e){return createMemo(repeat(()=>e.times,toFunction(()=>e.children),"fallback"in e?{fallback:()=>e.fallback}:void 0))}var _tmpl$$2=template("<div>"),_tmpl$2=template("<button>"),_tmpl$3=template("<span>"),_tmpl$4=template("<input>");const FileTreeContext=createContext();function useFileTree(){const e=useContext(FileTreeContext);if(!e)throw"FileTreeContext is undefined";return e}const DirEntContext=createContext();function useDirEnt(){const e=useContext(DirEntContext);if(!e)throw"DirEntContext is undefined";return e}const IndentGuideContext=createContext();function useIndentGuide(){const e=useContext(IndentGuideContext);if(!e)throw"IndentGuideContext is undefined";return e}function FileTree(e){const[n,s]=splitProps(mergeProps({base:""},e),["fs","base"]),[o,l]=createSignal(),t=createSelector(o);function c(d){l(d)}function a(d){o()===d&&l()}const[_,f]=createSignal([],{equals:!1}),S=createMemo(()=>_().flatMap(([d,A])=>{if(A){const x=g().findIndex(M=>M.path===d),I=g().findIndex(M=>M.path===A);return g().slice(Math.min(x,I),Math.max(x,I)+1).map(M=>M.path)}return d}).sort((d,A)=>d<A?-1:1)),y=createSelector(S,(d,A)=>A.includes(d));function w(d){f(A=>[...A,[d]])}function k(d){f(A=>A.map(x=>x.filter(I=>I!==d)).filter(x=>x.length>0))}function O(d){f(A=>A.length>0?(A[A.length-1]=[A[A.length-1][0],d],[...A]):[[d]])}function R(){f([])}createEffect(()=>e.onSelection?.(S())),createEffect(()=>{batch(()=>{e.selection&&f(e.selection.filter(d=>e.fs.exists(d)).map(d=>[d]))})});const[L,P]=createSignal(new Array,{equals:!1}),N=createSelector(L,(d,A)=>A.includes(d));function v(d){P(A=>A.filter(x=>x!==d))}function C(d){d!==n.base&&!L().includes(d)&&P(A=>[...A,d])}const[h,i]=createStore({});function p(d){return h[d]?.()||[]}createEffect(mapArray(()=>[n.base,...L()],d=>{const A=createMemo(keyArray(()=>e.fs.readdir(d,{withFileTypes:!0}),I=>I.path,I=>{const M={path:I().path,indentation:u(I().path),name:PathUtils.getName(I().path),select(){w(I().path)},deselect(){k(I().path)},shiftSelect(){O(I().path)},get selected(){return y(I().path)},rename(U){b(I().path,U)},focus(){c(I().path)},blur(){a(I().path)},get focused(){return t(I().path)}};return mergeProps(M,()=>I().type==="dir"?{type:"dir",expand(){C(I().path)},collapse(){v(I().path)},get expanded(){return N(I().path)}}:{type:"file"})})),x=createMemo(()=>A().toSorted(e.sort??((I,M)=>I.type!==M.type?I.type==="dir"?-1:1:I.path.toLowerCase()<M.path.toLowerCase()?-1:1)));i(d,()=>x),onCleanup(()=>i(d,void 0)),createRenderEffect(()=>{e.fs.exists(d)||P(I=>I.filter(M=>M!==d))})}));const g=createMemo(()=>{const d=new Array,A=[n.base];for(;A.length>0;){const x=A.shift(),I=p(x);A.push(...I.filter(M=>M.type==="dir"&&N(M.path)).map(M=>M.path)),d.splice(d.findIndex(M=>M.path===x)+1,0,...I)}return d});function u(d){return d.split("/").length-n.base.split("/").length}function b(d,A){batch(()=>{e.fs.rename(d,A),e.onRename?.(d,A),P(x=>x.map(I=>I===d?A:PathUtils.rebase(I,d,A))),f(x=>x.map(([I,M])=>(I=PathUtils.rebase(I,d,A),M?[I,PathUtils.rebase(M,d,A)]:[I]))),c(A)})}function m(d){const A=S();for(const M of A){if(M===d)throw`Cannot move ${M} into itself.`;if(PathUtils.isAncestor(d,M))throw`Cannot move because ${M} is ancestor of ${d}.`}const x=new Array,I=A.sort((M,U)=>M.toLowerCase()<U.toLowerCase()?-1:1).map((M,U,W)=>{const X=W.slice(0,U).find(Z=>PathUtils.isAncestor(M,Z)),J=(X?[d,PathUtils.getName(X),M.replace(`${X}/`,"")]:[d,PathUtils.getName(M)]).filter(Boolean).join("/");return e.fs.exists(J)&&x.push({oldPath:M,newPath:J}),{oldPath:M,newPath:J,shouldRename:!X}});if(x.length>0)throw`Paths already exist: ${x.map(({newPath:M})=>M)}`;batch(()=>{P(M=>M.map(U=>{const W=I.find(({oldPath:X})=>X===U);return W?W.newPath:U})),f(()=>I.map(({newPath:M})=>[M])),I.forEach(({oldPath:M,newPath:U,shouldRename:W})=>{W&&b(M,U)}),N(d)||C(d)})}const E={get fs(){return n.fs},get base(){return n.base},expandDir:C,collapseDir:v,isDirExpanded:N,moveSelectedDirEnts:m,resetSelectedDirEnts:R,selectDirEnt:w,deselectDirEnt:k,shiftSelectDirEnt:O,getDirEntsOfDir:p,focusDirEnt:c,blurDirEnt:a,isDirEntFocused:t};return(()=>{var d=_tmpl$$2();return spread(d,mergeProps(s,{onDragOver:A=>{A.preventDefault(),e.onDragOver?.(A)},onDrop:A=>{m(n.base),e.onDrop?.(A)}}),!1,!0),insert(d,createComponent(FileTreeContext.Provider,{value:E,get children(){return createComponent(Key,{get each(){return g()},by:A=>A.path,children:A=>createComponent(DirEntContext.Provider,{get value(){return A()},get children(){return untrack(()=>e.children(A(),E))}})})}})),d})()}FileTree.DirEnt=function(e){const n=mergeProps({draggable:!0},e),s=useFileTree(),o=useDirEnt(),l={onPointerDown(t){t.shiftKey?o.shiftSelect():o.selected?t[CTRL_KEY]&&o.deselect():batch(()=>{t[CTRL_KEY]||s.resetSelectedDirEnts(),o.select()}),e.onPointerDown?.(t)},onPointerUp(t){o.type==="dir"&&(o.expanded?o.collapse():o.expand()),e.onPointerUp?.(t)},onDragOver:t=>{t.preventDefault(),e.onDragOver?.(t)},onDrop:t=>{if(t.preventDefault(),t.stopPropagation(),o.type==="dir")s.moveSelectedDirEnts(o.path);else{const c=o.path.split("/").slice(0,-1).join("/");s.moveSelectedDirEnts(c)}e.onDrop?.(t)},onFocus(t){o.focus(),e.onFocus?.(t)},onBlur(t){o.blur(),e.onBlur?.(t)},ref(t){onMount(()=>{o.focused&&t.focus()}),e.ref?.(t)}};return createComponent(Show,{get when(){return o.type==="dir"},get fallback(){return(()=>{var t=_tmpl$2();return spread(t,mergeProps(n,l),!1,!1),t})()},children:t=>createComponent(Show,{get when(){return o.path},get children(){var c=_tmpl$2();return spread(c,mergeProps(n,l),!1,!0),insert(c,()=>e.children),c}})})};FileTree.IndentGuides=function(e){const n=useDirEnt(),s=useFileTree();function o(c){const a=PathUtils.getParent(c);if(a===s.base)return!1;const _=s.getDirEntsOfDir(a);return _.findIndex(S=>S.path===c)===_.length-1}function l(c){return n.path.split("/").slice(0,c+2).join("/")}function t(c){const a=n.indentation-c===1;return a&&o(n.path)?"elbow":o(l(c))?"spacer":a?"tee":"pipe"}return createComponent(Repeat,{get times(){return n.indentation},children:c=>{const a=()=>t(c);return createComponent(IndentGuideContext.Provider,{value:a,get children(){return e.render(a)}})}})};FileTree.Expanded=function(e){const[,n]=splitProps(e,["expanded","collapsed"]),s=useDirEnt(),o=useFileTree();return createComponent(Show,{get when(){return s.type==="dir"},get children(){var l=_tmpl$3();return spread(l,n,!1,!0),insert(l,createComponent(Show,{get when(){return o.isDirExpanded(s.path)},get fallback(){return e.expanded},get children(){return e.collapsed}})),l}})};FileTree.Name=function(e){const n=useDirEnt(),s=useFileTree();function o(l){const t=[...n.path.split("/").slice(0,-1),l.value].join("/");if(t!==n.path){if(s.fs.exists(t))throw l.value=n.name,`Path ${t} already exists.`;n.rename(t)}}return createComponent(Show,{get when(){return e.editable},get fallback(){return(()=>{var l=_tmpl$3();return insert(l,()=>n.name),createRenderEffect(t=>{var c=e.class,a=e.style;return c!==t.e&&className(l,t.e=c),t.t=style(l,a,t.t),t},{e:void 0,t:void 0}),l})()},get children(){var l=_tmpl$4();return l.addEventListener("blur",t=>{s.fs.exists(n.path)&&o(t.currentTarget),e.onBlur?.(t)}),l.$$keydown=t=>{t.code==="Enter"&&o(t.currentTarget)},use(t=>{onMount(()=>{t.focus();const c=t.value,a=c.indexOf("."),_=a===-1?c.length:a;t.setSelectionRange(0,_)})},l),setAttribute(l,"spellcheck",!1),createRenderEffect(t=>{var c=e.class,a={all:"unset",...e.style};return c!==t.e&&className(l,t.e=c),t.t=style(l,a,t.t),t},{e:void 0,t:void 0}),createRenderEffect(()=>l.value=n.name),l}})};delegateEvents(["keydown"]);const container="_container_1y72d_1",elbow="_elbow_1y72d_5",pipe="_pipe_1y72d_15",arm="_arm_1y72d_23",styles$1={container,elbow,pipe,arm};var _tmpl$$1=template("<span>");function DefaultIndentGuide(e){const n=useIndentGuide();return(()=>{var s=_tmpl$$1();return insert(s,createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return n()==="elbow"},get children(){var o=_tmpl$$1();return createRenderEffect(()=>className(o,styles$1.elbow)),o}}),createComponent(Match,{get when(){return n()==="tee"},get children(){return[(()=>{var o=_tmpl$$1();return createRenderEffect(()=>className(o,styles$1.pipe)),o})(),(()=>{var o=_tmpl$$1();return createRenderEffect(()=>className(o,styles$1.arm)),o})()]}}),createComponent(Match,{get when(){return n()==="pipe"},get children(){var o=_tmpl$$1();return createRenderEffect(()=>className(o,styles$1.pipe)),o}})]}})),createRenderEffect(o=>{var l=styles$1.container,t=e.color,c=`${e.width}px`;return l!==o.e&&className(s,o.e=l),t!==o.t&&((o.t=t)!=null?s.style.setProperty("--color",t):s.style.removeProperty("--color")),c!==o.a&&((o.a=c)!=null?s.style.setProperty("width",c):s.style.removeProperty("width")),o},{e:void 0,t:void 0,a:void 0}),s})()}const app="_app_1q6ko_6",custom="_custom_1q6ko_17",dirEnt="_dirEnt_1q6ko_29",textarea="_textarea_1q6ko_46",input="_input_1q6ko_50",styles={app,default:"_default_1q6ko_13",custom,dirEnt,textarea,input};var _tmpl$=template(`<input placeholder="p.ex fs.writeFile('test2.ts', 'Hello World!')">`);const App=()=>{const[selectedFile,setSelectedFile]=createSignal("index0.ts"),fs=createFileSystem();function mockData(e){if(!(e.length>5)){fs.mkdir(e.join("/"));for(let n=0;n<Math.floor(Math.random()*3);n++){const s=`${e.join("/")}/index${n}.ts`;fs.writeFile(s,`export const value = 'Hello World from ${s}'`)}for(let n=0;n<Math.floor(Math.random()*3+1);n++)mockData([...e,"test"+n])}}mockData(["test"]);for(let e=0;e<3;e++){const n=`index${e}.ts`;fs.writeFile(n,`export const value = 'Hello World from ${n}'`)}const grammar=()=>{const e=selectedFile();return e?.endsWith("css")?"css":e?.endsWith("html")?"html":"tsx"},currentFile=()=>{const e=selectedFile();return e&&fs.exists(e)?fs.readFile(e):""};return createComponent(Split,{get class(){return styles.app},get children(){return[createComponent(Split.Pane,{size:"175px",get children(){return createComponent(FileTree,{fs,get class(){return styles.custom},onRename:(e,n)=>setSelectedFile(s=>PathUtils.rebase(s,e,n)),children:e=>{const[n,s]=createSignal(!1);return onMount(()=>{e.focused&&e.type==="file"&&setSelectedFile(e.path)}),createComponent(FileTree.DirEnt,{get class(){return styles.dirEnt},get style(){return{background:e.selected?"#484f6c":void 0}},onDblClick:()=>s(!0),onMouseDown:()=>{e.type==="file"&&setSelectedFile(e.path)},onKeyDown:o=>{switch(o.code){case"Enter":s(l=>!l);break;case"Space":e.type==="dir"?e.expanded?e.collapse():e.expand():setSelectedFile(e.path);break}},get children(){return[createComponent(FileTree.IndentGuides,{render:()=>createComponent(DefaultIndentGuide,{color:"white",width:15})}),createComponent(FileTree.Expanded,{collapsed:"-",expanded:"+",style:{width:"15px","text-align":"center"}}),createComponent(FileTree.Name,{get editable(){return n()},get style(){return{"margin-left":e.type==="file"?"7.5px":void 0}},onBlur:()=>s(!1)})]}})}})}}),createComponent(Split.Handle,{size:"5px",style:{background:"lightgrey",cursor:"ew-resize"}}),createComponent(Split.Pane,{size:"1fr",style:{display:"grid","grid-template-rows":"1fr auto"},get children(){return[createComponent(TmTextarea,{get value(){return currentFile()},get grammar(){return grammar()},get class(){return styles.textarea},theme:"andromeeda",onInput:e=>fs.writeFile(selectedFile(),e.currentTarget.value)}),(()=>{var _el$=_tmpl$();return _el$.$$keydown=event=>{event.code==="Enter"&&(eval(event.currentTarget.value),event.currentTarget.value="")},createRenderEffect(()=>className(_el$,styles.input)),_el$})()]}})]}})};delegateEvents(["keydown"]);render(()=>createComponent(App,{}),document.getElementById("root"));
