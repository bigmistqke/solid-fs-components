(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const t of u)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(u){const t={};return u.integrity&&(t.integrity=u.integrity),u.referrerPolicy&&(t.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?t.credentials="include":u.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(u){if(u.ep)return;u.ep=!0;const t=s(u);fetch(u.href,t)}})();const equalFn=(e,n)=>e===n,$PROXY=Symbol("solid-proxy"),$TRACK=Symbol("solid-track"),signalOptions={equals:equalFn};let runEffects=runQueue;const STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null},NO_INIT={};var Owner=null;let Transition=null,ExternalSourceConfig=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createRoot(e,n){const s=Listener,o=Owner,u=e.length===0,t=n===void 0?o:n,c=u?UNOWNED:{owned:null,cleanups:null,context:t?t.context:null,owner:t},a=u?e:()=>e(()=>untrack(()=>cleanNode(c)));Owner=c,Listener=null;try{return runUpdates(a,!0)}finally{Listener=s,Owner=o}}function createSignal(e,n){n=n?Object.assign({},signalOptions,n):signalOptions;const s={value:e,observers:null,observerSlots:null,comparator:n.equals||void 0},o=u=>(typeof u=="function"&&(u=u(s.value)),writeSignal(s,u));return[readSignal.bind(s),o]}function createComputed(e,n,s){const o=createComputation(e,n,!0,STALE);updateComputation(o)}function createRenderEffect(e,n,s){const o=createComputation(e,n,!1,STALE);updateComputation(o)}function createEffect(e,n,s){runEffects=runUserEffects;const o=createComputation(e,n,!1,STALE);o.user=!0,Effects?Effects.push(o):updateComputation(o)}function createMemo(e,n,s){s=s?Object.assign({},signalOptions,s):signalOptions;const o=createComputation(e,n,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=s.equals||void 0,updateComputation(o),readSignal.bind(o)}function isPromise(e){return e&&typeof e=="object"&&"then"in e}function createResource(e,n,s){let o,u,t;arguments.length===2&&typeof n=="object"||arguments.length===1?(o=!0,u=e,t=n||{}):(o=e,u=n,t={});let c=null,a=NO_INIT,_=!1,f="initialValue"in t,S=typeof o=="function"&&createMemo(o);const y=new Set,[b,I]=(t.storage||createSignal)(t.initialValue),[E,x]=createSignal(void 0),[R,P]=createSignal(void 0,{equals:!1}),[O,w]=createSignal(f?"ready":"unresolved");function A(d,l,g,p){return c===d&&(c=null,p!==void 0&&(f=!0),(d===a||l===a)&&t.onHydrated&&queueMicrotask(()=>t.onHydrated(p,{value:l})),a=NO_INIT,m(l,g)),l}function m(d,l){runUpdates(()=>{l===void 0&&I(()=>d),w(l!==void 0?"errored":f?"ready":"unresolved"),x(l);for(const g of y.keys())g.decrement();y.clear()},!1)}function i(){const d=SuspenseContext,l=b(),g=E();if(g!==void 0&&!c)throw g;return Listener&&!Listener.user&&d&&createComputed(()=>{R(),c&&(d.resolved||y.has(d)||(d.increment(),y.add(d)))}),l}function h(d=!0){if(d!==!1&&_)return;_=!1;const l=S?S():o;if(l==null||l===!1){A(c,untrack(b));return}const g=a!==NO_INIT?a:untrack(()=>u(l,{value:b(),refetching:d}));return isPromise(g)?(c=g,"value"in g?(g.status==="success"?A(c,g.value,void 0,l):A(c,void 0,void 0,l),g):(_=!0,queueMicrotask(()=>_=!1),runUpdates(()=>{w(f?"refreshing":"pending"),P()},!1),g.then(p=>A(g,p,void 0,l),p=>A(g,void 0,castError(p),l)))):(A(c,g,void 0,l),g)}return Object.defineProperties(i,{state:{get:()=>O()},error:{get:()=>E()},loading:{get(){const d=O();return d==="pending"||d==="refreshing"}},latest:{get(){if(!f)return i();const d=E();if(d&&!c)throw d;return b()}}}),S?createComputed(()=>h(!1)):h(!1),[i,{refetch:h,mutate:I}]}function createSelector(e,n=equalFn,s){const o=new Map,u=createComputation(t=>{const c=e();for(const[a,_]of o.entries())if(n(a,c)!==n(a,t))for(const f of _.values())f.state=STALE,f.pure?Updates.push(f):Effects.push(f);return c},void 0,!0,STALE);return updateComputation(u),t=>{const c=Listener;if(c){let a;(a=o.get(t))?a.add(c):o.set(t,a=new Set([c])),onCleanup(()=>{a.delete(c),!a.size&&o.delete(t)})}return n(t,u.value)}}function batch(e){return runUpdates(e,!1)}function untrack(e){if(Listener===null)return e();const n=Listener;Listener=null;try{return e()}finally{Listener=n}}function on(e,n,s){const o=Array.isArray(e);let u;return t=>{let c;if(o){c=Array(e.length);for(let _=0;_<e.length;_++)c[_]=e[_]()}else c=e();const a=untrack(()=>n(c,u,t));return u=c,a}}function onMount(e){createEffect(()=>untrack(e))}function onCleanup(e){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[e]:Owner.cleanups.push(e)),e}function getListener(){return Listener}function createContext(e,n){const s=Symbol("context");return{id:s,Provider:createProvider(s),defaultValue:e}}function useContext(e){return Owner&&Owner.context&&Owner.context[e.id]!==void 0?Owner.context[e.id]:e.defaultValue}function children(e){const n=createMemo(e),s=createMemo(()=>resolveChildren(n()));return s.toArray=()=>{const o=s();return Array.isArray(o)?o:o!=null?[o]:[]},s}let SuspenseContext;function readSignal(){if(this.sources&&this.state)if(this.state===STALE)updateComputation(this);else{const e=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=e}if(Listener){const e=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(e)):(Listener.sources=[this],Listener.sourceSlots=[e]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(e,n,s){let o=e.value;return(!e.comparator||!e.comparator(o,n))&&(e.value=n,e.observers&&e.observers.length&&runUpdates(()=>{for(let u=0;u<e.observers.length;u+=1){const t=e.observers[u],c=Transition&&Transition.running;c&&Transition.disposed.has(t),(c?!t.tState:!t.state)&&(t.pure?Updates.push(t):Effects.push(t),t.observers&&markDownstream(t)),c||(t.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)),n}function updateComputation(e){if(!e.fn)return;cleanNode(e);const n=ExecCount;runComputation(e,e.value,n)}function runComputation(e,n,s){let o;const u=Owner,t=Listener;Listener=Owner=e;try{o=e.fn(n)}catch(c){return e.pure&&(e.state=STALE,e.owned&&e.owned.forEach(cleanNode),e.owned=null),e.updatedAt=s+1,handleError(c)}finally{Listener=t,Owner=u}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?writeSignal(e,o):e.value=o,e.updatedAt=s)}function createComputation(e,n,s,o=STALE,u){const t={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:Owner,context:Owner?Owner.context:null,pure:s};return Owner===null||Owner!==UNOWNED&&(Owner.owned?Owner.owned.push(t):Owner.owned=[t]),t}function runTop(e){if(e.state===0)return;if(e.state===PENDING)return lookUpstream(e);if(e.suspense&&untrack(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ExecCount);)e.state&&n.push(e);for(let s=n.length-1;s>=0;s--)if(e=n[s],e.state===STALE)updateComputation(e);else if(e.state===PENDING){const o=Updates;Updates=null,runUpdates(()=>lookUpstream(e,n[0]),!1),Updates=o}}function runUpdates(e,n){if(Updates)return e();let s=!1;n||(Updates=[]),Effects?s=!0:Effects=[],ExecCount++;try{const o=e();return completeUpdates(s),o}catch(o){s||(Effects=null),Updates=null,handleError(o)}}function completeUpdates(e){if(Updates&&(runQueue(Updates),Updates=null),e)return;const n=Effects;Effects=null,n.length&&runUpdates(()=>runEffects(n),!1)}function runQueue(e){for(let n=0;n<e.length;n++)runTop(e[n])}function runUserEffects(e){let n,s=0;for(n=0;n<e.length;n++){const o=e[n];o.user?e[s++]=o:runTop(o)}for(n=0;n<s;n++)runTop(e[n])}function lookUpstream(e,n){e.state=0;for(let s=0;s<e.sources.length;s+=1){const o=e.sources[s];if(o.sources){const u=o.state;u===STALE?o!==n&&(!o.updatedAt||o.updatedAt<ExecCount)&&runTop(o):u===PENDING&&lookUpstream(o,n)}}}function markDownstream(e){for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];s.state||(s.state=PENDING,s.pure?Updates.push(s):Effects.push(s),s.observers&&markDownstream(s))}}function cleanNode(e){let n;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),o=e.sourceSlots.pop(),u=s.observers;if(u&&u.length){const t=u.pop(),c=s.observerSlots.pop();o<u.length&&(t.sourceSlots[c]=o,u[o]=t,s.observerSlots[o]=c)}}if(e.owned){for(n=e.owned.length-1;n>=0;n--)cleanNode(e.owned[n]);e.owned=null}if(e.cleanups){for(n=e.cleanups.length-1;n>=0;n--)e.cleanups[n]();e.cleanups=null}e.state=0}function castError(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function handleError(e,n=Owner){throw castError(e)}function resolveChildren(e){if(typeof e=="function"&&!e.length)return resolveChildren(e());if(Array.isArray(e)){const n=[];for(let s=0;s<e.length;s++){const o=resolveChildren(e[s]);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return n}return e}function createProvider(e,n){return function(o){let u;return createRenderEffect(()=>u=untrack(()=>(Owner.context={...Owner.context,[e]:o.value},children(()=>o.children))),void 0),u}}const FALLBACK$1=Symbol("fallback");function dispose$1(e){for(let n=0;n<e.length;n++)e[n]()}function mapArray(e,n,s={}){let o=[],u=[],t=[],c=0,a=n.length>1?[]:null;return onCleanup(()=>dispose$1(t)),()=>{let _=e()||[],f,S;return _[$TRACK],untrack(()=>{let b=_.length,I,E,x,R,P,O,w,A,m;if(b===0)c!==0&&(dispose$1(t),t=[],o=[],u=[],c=0,a&&(a=[])),s.fallback&&(o=[FALLBACK$1],u[0]=createRoot(i=>(t[0]=i,s.fallback())),c=1);else if(c===0){for(u=new Array(b),S=0;S<b;S++)o[S]=_[S],u[S]=createRoot(y);c=b}else{for(x=new Array(b),R=new Array(b),a&&(P=new Array(b)),O=0,w=Math.min(c,b);O<w&&o[O]===_[O];O++);for(w=c-1,A=b-1;w>=O&&A>=O&&o[w]===_[A];w--,A--)x[A]=u[w],R[A]=t[w],a&&(P[A]=a[w]);for(I=new Map,E=new Array(A+1),S=A;S>=O;S--)m=_[S],f=I.get(m),E[S]=f===void 0?-1:f,I.set(m,S);for(f=O;f<=w;f++)m=o[f],S=I.get(m),S!==void 0&&S!==-1?(x[S]=u[f],R[S]=t[f],a&&(P[S]=a[f]),S=E[S],I.set(m,S)):t[f]();for(S=O;S<b;S++)S in x?(u[S]=x[S],t[S]=R[S],a&&(a[S]=P[S],a[S](S))):u[S]=createRoot(y);u=u.slice(0,c=b),o=_.slice(0)}return u});function y(b){if(t[S]=b,a){const[I,E]=createSignal(S);return a[S]=E,n(_[S],I)}return n(_[S])}}}function indexArray(e,n,s={}){let o=[],u=[],t=[],c=[],a=0,_;return onCleanup(()=>dispose$1(t)),()=>{const f=e()||[];return f[$TRACK],untrack(()=>{if(f.length===0)return a!==0&&(dispose$1(t),t=[],o=[],u=[],a=0,c=[]),s.fallback&&(o=[FALLBACK$1],u[0]=createRoot(y=>(t[0]=y,s.fallback())),a=1),u;for(o[0]===FALLBACK$1&&(t[0](),t=[],o=[],u=[],a=0),_=0;_<f.length;_++)_<o.length&&o[_]!==f[_]?c[_](()=>f[_]):_>=o.length&&(u[_]=createRoot(S));for(;_<o.length;_++)t[_]();return a=c.length=t.length=f.length,o=f.slice(0),u=u.slice(0,a)});function S(y){t[_]=y;const[b,I]=createSignal(f[_]);return c[_]=I,n(b,_)}}}function createComponent(e,n){return untrack(()=>e(n||{}))}function trueFn(){return!0}const propTraps={get(e,n,s){return n===$PROXY?s:e.get(n)},has(e,n){return n===$PROXY?!0:e.has(n)},set:trueFn,deleteProperty:trueFn,getOwnPropertyDescriptor(e,n){return{configurable:!0,enumerable:!0,get(){return e.get(n)},set:trueFn,deleteProperty:trueFn}},ownKeys(e){return e.keys()}};function resolveSource(e){return(e=typeof e=="function"?e():e)?e:{}}function resolveSources(){for(let e=0,n=this.length;e<n;++e){const s=this[e]();if(s!==void 0)return s}}function mergeProps(...e){let n=!1;for(let c=0;c<e.length;c++){const a=e[c];n=n||!!a&&$PROXY in a,e[c]=typeof a=="function"?(n=!0,createMemo(a)):a}if(n)return new Proxy({get(c){for(let a=e.length-1;a>=0;a--){const _=resolveSource(e[a])[c];if(_!==void 0)return _}},has(c){for(let a=e.length-1;a>=0;a--)if(c in resolveSource(e[a]))return!0;return!1},keys(){const c=[];for(let a=0;a<e.length;a++)c.push(...Object.keys(resolveSource(e[a])));return[...new Set(c)]}},propTraps);const s={},o=Object.create(null);for(let c=e.length-1;c>=0;c--){const a=e[c];if(!a)continue;const _=Object.getOwnPropertyNames(a);for(let f=_.length-1;f>=0;f--){const S=_[f];if(S==="__proto__"||S==="constructor")continue;const y=Object.getOwnPropertyDescriptor(a,S);if(!o[S])o[S]=y.get?{enumerable:!0,configurable:!0,get:resolveSources.bind(s[S]=[y.get.bind(a)])}:y.value!==void 0?y:void 0;else{const b=s[S];b&&(y.get?b.push(y.get.bind(a)):y.value!==void 0&&b.push(()=>y.value))}}}const u={},t=Object.keys(o);for(let c=t.length-1;c>=0;c--){const a=t[c],_=o[a];_&&_.get?Object.defineProperty(u,a,_):u[a]=_?_.value:void 0}return u}function splitProps(e,...n){if($PROXY in e){const u=new Set(n.length>1?n.flat():n[0]),t=n.map(c=>new Proxy({get(a){return c.includes(a)?e[a]:void 0},has(a){return c.includes(a)&&a in e},keys(){return c.filter(a=>a in e)}},propTraps));return t.push(new Proxy({get(c){return u.has(c)?void 0:e[c]},has(c){return u.has(c)?!1:c in e},keys(){return Object.keys(e).filter(c=>!u.has(c))}},propTraps)),t}const s={},o=n.map(()=>({}));for(const u of Object.getOwnPropertyNames(e)){const t=Object.getOwnPropertyDescriptor(e,u),c=!t.get&&!t.set&&t.enumerable&&t.writable&&t.configurable;let a=!1,_=0;for(const f of n)f.includes(u)&&(a=!0,c?o[_][u]=t.value:Object.defineProperty(o[_],u,t)),++_;a||(c?s[u]=t.value:Object.defineProperty(s,u,t))}return[...o,s]}const narrowedError=e=>`Stale read from <${e}>.`;function For(e){const n="fallback"in e&&{fallback:()=>e.fallback};return createMemo(mapArray(()=>e.each,e.children,n||void 0))}function Index(e){const n="fallback"in e&&{fallback:()=>e.fallback};return createMemo(indexArray(()=>e.each,e.children,n||void 0))}function Show(e){const n=e.keyed,s=createMemo(()=>e.when,void 0,{equals:(o,u)=>n?o===u:!o==!u});return createMemo(()=>{const o=s();if(o){const u=e.children;return typeof u=="function"&&u.length>0?untrack(()=>u(n?o:()=>{if(!untrack(s))throw narrowedError("Show");return e.when})):u}return e.fallback},void 0,void 0)}function Switch(e){let n=!1;const s=(t,c)=>(n?t[1]===c[1]:!t[1]==!c[1])&&t[2]===c[2],o=children(()=>e.children),u=createMemo(()=>{let t=o();Array.isArray(t)||(t=[t]);for(let c=0;c<t.length;c++){const a=t[c].when;if(a)return n=!!t[c].keyed,[c,a,t[c]]}return[-1]},void 0,{equals:s});return createMemo(()=>{const[t,c,a]=u();if(t<0)return e.fallback;const _=a.children;return typeof _=="function"&&_.length>0?untrack(()=>_(n?c:()=>{if(untrack(u)[0]!==t)throw narrowedError("Match");return a.when})):_},void 0,void 0)}function Match(e){return e}const booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function getPropAlias(e,n){const s=PropAliases[e];return typeof s=="object"?s[n]?s.$:void 0:s}const DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function reconcileArrays(e,n,s){let o=s.length,u=n.length,t=o,c=0,a=0,_=n[u-1].nextSibling,f=null;for(;c<u||a<t;){if(n[c]===s[a]){c++,a++;continue}for(;n[u-1]===s[t-1];)u--,t--;if(u===c){const S=t<o?a?s[a-1].nextSibling:s[t-a]:_;for(;a<t;)e.insertBefore(s[a++],S)}else if(t===a)for(;c<u;)(!f||!f.has(n[c]))&&n[c].remove(),c++;else if(n[c]===s[t-1]&&s[a]===n[u-1]){const S=n[--u].nextSibling;e.insertBefore(s[a++],n[c++].nextSibling),e.insertBefore(s[--t],S),n[u]=s[t]}else{if(!f){f=new Map;let y=a;for(;y<t;)f.set(s[y],y++)}const S=f.get(n[c]);if(S!=null)if(a<S&&S<t){let y=c,b=1,I;for(;++y<u&&y<t&&!((I=f.get(n[y]))==null||I!==S+b);)b++;if(b>S-a){const E=n[c];for(;a<S;)e.insertBefore(s[a++],E)}else e.replaceChild(s[a++],n[c++])}else c++;else n[c++].remove()}}}const $$EVENTS="_$DX_DELEGATE";function render(e,n,s,o={}){let u;return createRoot(t=>{u=t,n===document?e():insert(n,e(),n.firstChild?null:void 0,s)},o.owner),()=>{u(),n.textContent=""}}function template(e,n,s){let o;const u=()=>{const c=document.createElement("template");return c.innerHTML=e,c.content.firstChild},t=()=>(o||(o=u())).cloneNode(!0);return t.cloneNode=t,t}function delegateEvents(e,n=window.document){const s=n[$$EVENTS]||(n[$$EVENTS]=new Set);for(let o=0,u=e.length;o<u;o++){const t=e[o];s.has(t)||(s.add(t),n.addEventListener(t,eventHandler))}}function setAttribute(e,n,s){s==null?e.removeAttribute(n):e.setAttribute(n,s)}function className(e,n){n==null?e.removeAttribute("class"):e.className=n}function addEventListener(e,n,s,o){if(o)Array.isArray(s)?(e[`$$${n}`]=s[0],e[`$$${n}Data`]=s[1]):e[`$$${n}`]=s;else if(Array.isArray(s)){const u=s[0];e.addEventListener(n,s[0]=t=>u.call(e,s[1],t))}else e.addEventListener(n,s)}function classList(e,n,s={}){const o=Object.keys(n||{}),u=Object.keys(s);let t,c;for(t=0,c=u.length;t<c;t++){const a=u[t];!a||a==="undefined"||n[a]||(toggleClassKey(e,a,!1),delete s[a])}for(t=0,c=o.length;t<c;t++){const a=o[t],_=!!n[a];!a||a==="undefined"||s[a]===_||!_||(toggleClassKey(e,a,!0),s[a]=_)}return s}function style(e,n,s){if(!n)return s?setAttribute(e,"style"):n;const o=e.style;if(typeof n=="string")return o.cssText=n;typeof s=="string"&&(o.cssText=s=void 0),s||(s={}),n||(n={});let u,t;for(t in s)n[t]==null&&o.removeProperty(t),delete s[t];for(t in n)u=n[t],u!==s[t]&&(o.setProperty(t,u),s[t]=u);return s}function spread(e,n={},s,o){const u={};return o||createRenderEffect(()=>u.children=insertExpression(e,n.children,u.children)),createRenderEffect(()=>typeof n.ref=="function"?use(n.ref,e):n.ref=e),createRenderEffect(()=>assign(e,n,s,!0,u,!0)),u}function use(e,n,s){return untrack(()=>e(n,s))}function insert(e,n,s,o){if(s!==void 0&&!o&&(o=[]),typeof n!="function")return insertExpression(e,n,o,s);createRenderEffect(u=>insertExpression(e,n(),u,s),o)}function assign(e,n,s,o,u={},t=!1){n||(n={});for(const c in u)if(!(c in n)){if(c==="children")continue;u[c]=assignProp(e,c,null,u[c],s,t)}for(const c in n){if(c==="children")continue;const a=n[c];u[c]=assignProp(e,c,a,u[c],s,t)}}function toPropertyName(e){return e.toLowerCase().replace(/-([a-z])/g,(n,s)=>s.toUpperCase())}function toggleClassKey(e,n,s){const o=n.trim().split(/\s+/);for(let u=0,t=o.length;u<t;u++)e.classList.toggle(o[u],s)}function assignProp(e,n,s,o,u,t){let c,a,_,f,S;if(n==="style")return style(e,s,o);if(n==="classList")return classList(e,s,o);if(s===o)return o;if(n==="ref")t||s(e);else if(n.slice(0,3)==="on:"){const y=n.slice(3);o&&e.removeEventListener(y,o),s&&e.addEventListener(y,s)}else if(n.slice(0,10)==="oncapture:"){const y=n.slice(10);o&&e.removeEventListener(y,o,!0),s&&e.addEventListener(y,s,!0)}else if(n.slice(0,2)==="on"){const y=n.slice(2).toLowerCase(),b=DelegatedEvents.has(y);if(!b&&o){const I=Array.isArray(o)?o[0]:o;e.removeEventListener(y,I)}(b||s)&&(addEventListener(e,y,s,b),b&&delegateEvents([y]))}else n.slice(0,5)==="attr:"?setAttribute(e,n.slice(5),s):(S=n.slice(0,5)==="prop:")||(_=ChildProperties.has(n))||(f=getPropAlias(n,e.tagName))||(a=Properties.has(n))||(c=e.nodeName.includes("-"))?(S&&(n=n.slice(5),a=!0),n==="class"||n==="className"?className(e,s):c&&!a&&!_?e[toPropertyName(n)]=s:e[f||n]=s):setAttribute(e,Aliases[n]||n,s);return s}function eventHandler(e){const n=`$$${e.type}`;let s=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==s&&Object.defineProperty(e,"target",{configurable:!0,value:s}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return s||document}});s;){const o=s[n];if(o&&!s.disabled){const u=s[`${n}Data`];if(u!==void 0?o.call(s,u,e):o.call(s,e),e.cancelBubble)return}s=s._$host||s.parentNode||s.host}}function insertExpression(e,n,s,o,u){for(;typeof s=="function";)s=s();if(n===s)return s;const t=typeof n,c=o!==void 0;if(e=c&&s[0]&&s[0].parentNode||e,t==="string"||t==="number")if(t==="number"&&(n=n.toString()),c){let a=s[0];a&&a.nodeType===3?a.data!==n&&(a.data=n):a=document.createTextNode(n),s=cleanChildren(e,s,o,a)}else s!==""&&typeof s=="string"?s=e.firstChild.data=n:s=e.textContent=n;else if(n==null||t==="boolean")s=cleanChildren(e,s,o);else{if(t==="function")return createRenderEffect(()=>{let a=n();for(;typeof a=="function";)a=a();s=insertExpression(e,a,s,o)}),()=>s;if(Array.isArray(n)){const a=[],_=s&&Array.isArray(s);if(normalizeIncomingArray(a,n,s,u))return createRenderEffect(()=>s=insertExpression(e,a,s,o,!0)),()=>s;if(a.length===0){if(s=cleanChildren(e,s,o),c)return s}else _?s.length===0?appendNodes(e,a,o):reconcileArrays(e,s,a):(s&&cleanChildren(e),appendNodes(e,a));s=a}else if(n.nodeType){if(Array.isArray(s)){if(c)return s=cleanChildren(e,s,o,n);cleanChildren(e,s,null,n)}else s==null||s===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);s=n}}return s}function normalizeIncomingArray(e,n,s,o){let u=!1;for(let t=0,c=n.length;t<c;t++){let a=n[t],_=s&&s[e.length],f;if(!(a==null||a===!0||a===!1))if((f=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))u=normalizeIncomingArray(e,a,_)||u;else if(f==="function")if(o){for(;typeof a=="function";)a=a();u=normalizeIncomingArray(e,Array.isArray(a)?a:[a],Array.isArray(_)?_:[_])||u}else e.push(a),u=!0;else{const S=String(a);_&&_.nodeType===3&&_.data===S?e.push(_):e.push(document.createTextNode(S))}}return u}function appendNodes(e,n,s=null){for(let o=0,u=n.length;o<u;o++)e.insertBefore(n[o],s)}function cleanChildren(e,n,s,o){if(s===void 0)return e.textContent="";const u=o||document.createTextNode("");if(n.length){let t=!1;for(let c=n.length-1;c>=0;c--){const a=n[c];if(u!==a){const _=a.parentNode===e;!t&&!c?_?e.replaceChild(u,a):e.insertBefore(u,s):_&&a.remove()}else t=!0}}else e.insertBefore(u,s);return[u]}var _tmpl$$4=template("<span>"),cursor=(e,n)=>new Promise(s=>{const o={x:e.clientX,y:e.clientY};let u=o;const t=performance.now();function c(_){const f={x:_.clientX,y:_.clientY},S={x:f.x-u.x,y:f.y-u.y},y={x:o.x-f.x,y:o.y-f.y};u=f;const b={total:y,delta:S,event:_,timespan:performance.now()-t};return n(b),b}const a=_=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",a),s(c(_))};window.addEventListener("mousemove",c),window.addEventListener("mouseup",a)});function mergeRefs(...e){return n=>{e.forEach(s=>{typeof s=="function"?s(n):"ref"in s&&s.ref&&(typeof s.ref=="function"?s.ref(n):s.ref=n)})}}function withContext(e,n,s){let o;return n.Provider({value:s,children:()=>(o=e(),"")}),()=>o}var propsMap=new WeakMap,handleSet=new WeakSet,NO_OVERFLOW=Symbol("no-overflow"),isPercentageSize=e=>e.endsWith("%"),isFractionSize=e=>e.endsWith("fr"),isPixelSize=e=>e.endsWith("px"),isPixelProps=e=>isPixelSize(e.size),isFractionProps=e=>isFractionSize(e.size),getProps=e=>propsMap.get(e),isNotHandle=e=>!handleSet.has(e);function resolveNode(e){if(typeof e=="function"){const n=e();return resolveNode(n)}return e}function getNeigboringPanes(e,n){const s=e.indexOf(n);if(s===-1||s===0||s===e.length-1)return;const o=e.slice(0,s).findLast(isNotHandle),u=e.slice(s).find(isNotHandle);if(!(!o||!u))return[o,u]}function Base(e){const n=useSplit(),s=mergeProps({size:"1fr"},e),[,o]=splitProps(e,["size","min","max","style","ref"]);let u;const t=(()=>{var c=_tmpl$$4(),a=mergeRefs(e,_=>u=_);return typeof a=="function"&&use(a,c),spread(c,mergeProps({get style(){return{overflow:"hidden",...e.style}}},o,{get"data-active-pane"(){return n?.isActivePane(u)||void 0}}),!1,!0),insert(c,()=>e.children),c})();return propsMap.set(t,s),t}var splitContext=createContext();function useSplit(){return useContext(splitContext)}function Split(e){const n=mergeProps({type:"column"},e),[,s]=splitProps(e,["type","style","ref"]),[o,u]=createSignal(),[t,c]=createSignal(void 0),[a,_]=createSignal(new WeakMap,{equals:!1}),[f,S]=createSignal(),y=()=>(n.type==="column"?o()?.width:o()?.height)||0;function b(v,T){_(k=>(k.set(v,(k.get(v)||0)-T),k))}function I(v,T=0){return isPercentageSize(v)?(parseFloat(v)-T)/100*y():parseFloat(v)-T}function E(v){const T=getProps(v),k=P(v);return!T||isFractionProps(T)?0:I(T.size,k)}function x(){const v=w(),T=g().reduce((k,$)=>k+parseFloat(getProps($).size),0);if(T===0)return 0;if(T<1){const k=v-v*T;return v/(T+k/v)}else return v/T}function R(v){const T=getProps(v),k=P(v);return!T||!isFractionProps(T)?0:(parseFloat(T.size)-k)*x()}function P(v){return a().get(v)||0}function O(){return p().reduce((v,T)=>v+E(T),0)}function w(){return y()-O()}function A(v,T,k){const $=g(),U=$.indexOf(v),z=$.map(R);let W=isPixelProps(getProps(T))?k:k/y()*100;b(T,W),(z[U]-=k)<0&&(b(T,-W),z[U]=0);const ee=z.reduce((V,oe)=>V+oe,0),Z=$.map(getProps).reduce((V,oe)=>V+parseFloat(oe.size),0),Y=z.map(V=>V*Z/ee).map((V,oe)=>parseFloat(getProps($[oe]).size)-V);_(V=>(Y.forEach((oe,D)=>{V.set($[D],oe)}),V))}function m(v,T){const k=getProps(v),$=P(v);if(!isFractionProps(k))return 0;const U=parseFloat(k.size)-$+T;return U<0?U:0}function i(v,T){const k=getProps(v),$=P(v);if(isFractionProps(k))return 0;const z=I(k.size,$)+T;if(k.max){const W=I(k.max);if(z<W)return z-W}if(k.min){const W=I(k.min);if(z>W)return z-W}return z>0?0:z}const h={isActivePane:createSelector(t,(v,T)=>isNotHandle(v)&&!!T?.includes(v)),get type(){return n.type},dragHandleStart(v){return c(getNeigboringPanes(l(),v))},dragHandle([v,T],k){if(k===0)return NO_OVERFLOW;const $=getProps(v),U=getProps(T),z=isFractionProps($),W=isFractionProps(U);let Q=k/x();const ee=z?m(v,Q)*x():i(v,k),Z=W?m(T,-Q)*x():i(T,-k);return k=ee?k-ee:Z?k+Z:k,Q=k/x(),z&&W?(b(v,Q),b(T,-Q)):!z&&!W?(b(v,isPixelProps($)?k:k/y()*100),b(T,isPixelProps(U)?-k:-k/y()*100)):z?A(v,T,-k):A(T,v,k),!ee&&!Z?NO_OVERFLOW:Math.abs(ee)>Math.abs(Z)?ee:-Z},dragHandleEnd(){c(void 0)}},d=children(withContext(()=>e.children,splitContext,h)),l=createMemo(()=>d.toArray().filter(v=>propsMap.has(v))),g=()=>l().filter(v=>isFractionProps(getProps(v))),p=()=>l().filter(v=>!isFractionProps(getProps(v))),C=()=>l().map(v=>{const T=getProps(v),k=P(v);if(isFractionProps(T))return k?`${parseFloat(T.size)-k}fr`:T.size;const $=k?`calc(${parseFloat(T.size)-k}${isPixelProps(T)?"px":"%"})`:T.size;return T.min?T.max?`min(${T.min}, max(${T.max}, ${$}))`:`min(${T.min}, ${$})`:T.max?`max(${T.max}, ${$})`:$}).join(" ");return createEffect(()=>{const v=f();if(!v)return;const T=new ResizeObserver(k=>{for(let $ of k)u($.contentRect),e.onResize?.($.contentRect,v)});T.observe(v),onCleanup(()=>T.disconnect())}),createSignal(mapArray(l,v=>{createEffect(on(()=>getProps(v)?.size,()=>{_(T=>(T.set(v,0),T))}))})),createEffect(()=>e.onTemplate?.(C())),createComponent(Base,mergeProps({ref(v){var T=mergeRefs(S,e);typeof T=="function"&&T(v)},get style(){return{display:"grid",...e.style,[`grid-template-${n.type}s`]:C()}}},s,{get children(){return l()}}))}function Pane(e){if(!useSplit())throw"Split.Pane should be used within a Split-component";return createComponent(Base,e)}function Handle(e){const n=useSplit();if(!n)throw"Split.Handle should be used within a Split-component";const[s,o]=createSignal(!1),u=createComponent(Base,mergeProps(e,{get"data-active-handle"(){return s()||void 0},onPointerDown:async t=>{let c={x:0,y:0};o(!0);const a=n.dragHandleStart(resolveNode(u));a&&(await cursor(t,({delta:_})=>{const f=n.dragHandle(a,n.type==="column"?_.x+c.x:_.y+c.y);f===NO_OVERFLOW?c={x:0,y:0}:(c.x+=n.type==="column"?_.x:f,c.y+=n.type!=="column"?_.y:f)}),n.dragHandleEnd(),o(!1))}}));return handleSet.add(resolveNode(u)),u}Split.Handle=Handle;Split.Pane=Pane;const $RAW=Symbol("store-raw"),$NODE=Symbol("store-node"),$HAS=Symbol("store-has"),$SELF=Symbol("store-self");function wrap$1(e){let n=e[$PROXY];if(!n&&(Object.defineProperty(e,$PROXY,{value:n=new Proxy(e,proxyTraps$1)}),!Array.isArray(e))){const s=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let u=0,t=s.length;u<t;u++){const c=s[u];o[c].get&&Object.defineProperty(e,c,{enumerable:o[c].enumerable,get:o[c].get.bind(n)})}}return n}function isWrappable(e){let n;return e!=null&&typeof e=="object"&&(e[$PROXY]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function unwrap(e,n=new Set){let s,o,u,t;if(s=e!=null&&e[$RAW])return s;if(!isWrappable(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let c=0,a=e.length;c<a;c++)u=e[c],(o=unwrap(u,n))!==u&&(e[c]=o)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const c=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let _=0,f=c.length;_<f;_++)t=c[_],!a[t].get&&(u=e[t],(o=unwrap(u,n))!==u&&(e[t]=o))}return e}function getNodes(e,n){let s=e[n];return s||Object.defineProperty(e,n,{value:s=Object.create(null)}),s}function getNode(e,n,s){if(e[n])return e[n];const[o,u]=createSignal(s,{equals:!1,internal:!0});return o.$=u,e[n]=o}function proxyDescriptor$1(e,n){const s=Reflect.getOwnPropertyDescriptor(e,n);return!s||s.get||!s.configurable||n===$PROXY||n===$NODE||(delete s.value,delete s.writable,s.get=()=>e[$PROXY][n]),s}function trackSelf(e){getListener()&&getNode(getNodes(e,$NODE),$SELF)()}function ownKeys(e){return trackSelf(e),Reflect.ownKeys(e)}const proxyTraps$1={get(e,n,s){if(n===$RAW)return e;if(n===$PROXY)return s;if(n===$TRACK)return trackSelf(e),s;const o=getNodes(e,$NODE),u=o[n];let t=u?u():e[n];if(n===$NODE||n===$HAS||n==="__proto__")return t;if(!u){const c=Object.getOwnPropertyDescriptor(e,n);getListener()&&(typeof t!="function"||e.hasOwnProperty(n))&&!(c&&c.get)&&(t=getNode(o,n,t)())}return isWrappable(t)?wrap$1(t):t},has(e,n){return n===$RAW||n===$PROXY||n===$TRACK||n===$NODE||n===$HAS||n==="__proto__"?!0:(getListener()&&getNode(getNodes(e,$HAS),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys,getOwnPropertyDescriptor:proxyDescriptor$1};function setProperty(e,n,s,o=!1){if(!o&&e[n]===s)return;const u=e[n],t=e.length;s===void 0?(delete e[n],e[$HAS]&&e[$HAS][n]&&u!==void 0&&e[$HAS][n].$()):(e[n]=s,e[$HAS]&&e[$HAS][n]&&u===void 0&&e[$HAS][n].$());let c=getNodes(e,$NODE),a;if((a=getNode(c,n,u))&&a.$(()=>s),Array.isArray(e)&&e.length!==t){for(let _=e.length;_<t;_++)(a=c[_])&&a.$();(a=getNode(c,"length",t))&&a.$(e.length)}(a=c[$SELF])&&a.$()}function mergeStoreNode(e,n){const s=Object.keys(n);for(let o=0;o<s.length;o+=1){const u=s[o];setProperty(e,u,n[u])}}function updateArray(e,n){if(typeof n=="function"&&(n=n(e)),n=unwrap(n),Array.isArray(n)){if(e===n)return;let s=0,o=n.length;for(;s<o;s++){const u=n[s];e[s]!==u&&setProperty(e,s,u)}setProperty(e,"length",o)}else mergeStoreNode(e,n)}function updatePath(e,n,s=[]){let o,u=e;if(n.length>1){o=n.shift();const c=typeof o,a=Array.isArray(e);if(Array.isArray(o)){for(let _=0;_<o.length;_++)updatePath(e,[o[_]].concat(n),s);return}else if(a&&c==="function"){for(let _=0;_<e.length;_++)o(e[_],_)&&updatePath(e,[_].concat(n),s);return}else if(a&&c==="object"){const{from:_=0,to:f=e.length-1,by:S=1}=o;for(let y=_;y<=f;y+=S)updatePath(e,[y].concat(n),s);return}else if(n.length>1){updatePath(e[o],n,[o].concat(s));return}u=e[o],s=[o].concat(s)}let t=n[0];typeof t=="function"&&(t=t(u,s),t===u)||o===void 0&&t==null||(t=unwrap(t),o===void 0||isWrappable(u)&&isWrappable(t)&&!Array.isArray(t)?mergeStoreNode(u,t):setProperty(e,o,t))}function createStore(...[e,n]){const s=unwrap(e||{}),o=Array.isArray(s),u=wrap$1(s);function t(...c){batch(()=>{o&&c.length===1?updateArray(s,c[0]):updatePath(s,c)})}return[u,t]}const producers=new WeakMap,setterTraps={get(e,n){if(n===$RAW)return e;const s=e[n];let o;return isWrappable(s)?producers.get(s)||(producers.set(s,o=new Proxy(s,setterTraps)),o):s},set(e,n,s){return setProperty(e,n,unwrap(s)),!0},deleteProperty(e,n){return setProperty(e,n,void 0,!0),!0}};function produce(e){return n=>{if(isWrappable(n)){let s;(s=producers.get(n))||producers.set(n,s=new Proxy(n,setterTraps)),e(s)}return n}}const PathUtils={normalize(e){return e.replace(/^\/+/,"")},getParent(e){return e.split("/").slice(0,-1).join("/")},getName(e){return lastItem(e.split("/"))},isAncestor(e,n){if(e===n)return!1;const s=e.split("/");return n.split("/").every((u,t)=>u===s[t])}};function lastItem(e){return e[e.length-1]}const isMac=navigator.platform.startsWith("Mac");function createFile(e){const[n,s]=createSignal(e);return{type:"file",get:n,set:s}}function createFileSystem(){const[e,n]=createStore({});function s(t){const c=t.split("/");if(!c.map((_,f)=>c.slice(0,f+1).join("/")).filter(Boolean).every(_=>_ in e))throw`Path is invalid ${t}`}function o(t,c){return t=PathUtils.normalize(t),s(t),c?.withFileTypes?Object.entries(e).filter(([a])=>PathUtils.getParent(a)===t&&a!==t).map(([a,_])=>({type:_.type,path:a})):Object.keys(e).filter(a=>PathUtils.getParent(a)===t)}const u={exists(t){return t in e},getType(t){return t=PathUtils.normalize(t),s(t),e[t].type},readdir:o,mkdir(t,c){if(t=PathUtils.normalize(t),c?.recursive){const a=t.split("/");a.forEach((_,f)=>{n(a.slice(0,f).join("/"),{type:"dir"})});return}s(PathUtils.getParent(t)),n(t,{type:"dir"})},readFile(t){t=PathUtils.normalize(t),s(t);const c=e[t];if(c.type==="dir")throw`Path is not a file ${t}`;return c.get()},rename(t,c){if(t=PathUtils.normalize(t),c=PathUtils.normalize(c),u.exists(c))throw console.error(e),`Path ${c} already exists.`;if(!u.exists(t)){console.error(`Path does not exist: ${t}`);return}n(produce(a=>{Object.keys(e).forEach(_=>{if(_.startsWith(t)){const f=_.replace(t,c),S=a[_];a[f]=S,delete a[_]}})}))},rm(t,c){if(t=PathUtils.normalize(t),(!c||!c.force)&&s(t),!c||!c.recursive){const a=Object.keys(e).filter(_=>_===t?!1:_.includes(t));if(a.length>0)throw`Directory is not empty ${a}`}n(produce(a=>{Object.keys(a).filter(_=>_.includes(t)).forEach(_=>delete a[_])}))},writeFile(t,c){t=PathUtils.normalize(t),s(PathUtils.getParent(t));const a=e[t];if(a?.type==="dir")throw`A directory already exist with the same name: ${t}`;a?a.set(c):n(t,createFile(c))}};return u}const FALLBACK=Symbol("fallback");function dispose(e){for(const n of e)n.dispose()}function keyArray(e,n,s,o={}){const u=new Map;return onCleanup(()=>dispose(u.values())),()=>{const c=e()||[];return c[$TRACK],untrack(()=>{if(!c.length)return dispose(u.values()),u.clear(),o.fallback?[createRoot(y=>(u.set(FALLBACK,{dispose:y}),o.fallback()))]:[];const a=new Array(c.length),_=u.get(FALLBACK);if(!u.size||_){_?.dispose(),u.delete(FALLBACK);for(let S=0;S<c.length;S++){const y=c[S],b=n(y,S);t(a,y,S,b)}return a}const f=new Set(u.keys());for(let S=0;S<c.length;S++){const y=c[S],b=n(y,S);f.delete(b);const I=u.get(b);I?(a[S]=I.mapped,I.setIndex?.(S),I.setItem(()=>y)):t(a,y,S,b)}for(const S of f)u.get(S)?.dispose(),u.delete(S);return a})};function t(c,a,_,f){createRoot(S=>{const[y,b]=createSignal(a),I={setItem:b,dispose:S};if(s.length>1){const[E,x]=createSignal(_);I.setIndex=x,I.mapped=s(y,E)}else I.mapped=s(y);u.set(f,I),c[_]=I.mapped})}}function Key(e){const{by:n}=e;return createMemo(keyArray(()=>e.each,typeof n=="function"?n:s=>s[n],e.children,"fallback"in e?{fallback:()=>e.fallback}:void 0))}const toFunction=e=>(...n)=>{const s=e();return typeof s=="function"?s(...n):s};function repeat(e,n,s={}){let o=[],u=[],t=0;onCleanup(()=>o.forEach(f=>f()));const c=f=>{if(f===0)return o.forEach(S=>S()),s.fallback?createRoot(S=>(o=[S],u=[s.fallback()])):(o=[],u=[]);if(t===0){o[0]&&o[0]();for(let S=0;S<f;S++)u[S]=createRoot(a.bind(void 0,S));return u}{const S=t-f;if(S>0){for(let y=t-1;y>=f;y--)o[y]();return u.splice(f,S),o.splice(f,S),u}}for(let S=t;S<f;S++)u[S]=createRoot(a.bind(void 0,S));return u},a=(f,S)=>(o[f]=S,n(f)),_=createMemo(()=>Math.floor(Math.max(e(),0)));return()=>{const f=_();return untrack(()=>{const S=c(f);return t=f,S})}}function Repeat(e){return createMemo(repeat(()=>e.times,toFunction(()=>e.children),"fallback"in e?{fallback:()=>e.fallback}:void 0))}var _tmpl$$3=template("<div>"),_tmpl$2$1=template("<button>"),_tmpl$3=template("<span>"),_tmpl$4=template("<input>");const FileTreeContext=createContext();function useFileTree(){const e=useContext(FileTreeContext);if(!e)throw"FileTreeContext is undefined";return e}const DirEntContext=createContext();function useDirEnt(){const e=useContext(DirEntContext);if(!e)throw"DirEntContext is undefined";return e}const IndentGuideContext=createContext();function useIndentGuide(){const e=useContext(IndentGuideContext);if(!e)throw"IndentGuideContext is undefined";return e}function FileTree(e){const[n,s]=splitProps(mergeProps({base:""},e),["fs","base"]),[o,u]=createSignal([],{equals:!1});function t(h){u(d=>[...d,[h]])}function c(h){u(d=>d.map(l=>l.filter(g=>g!==h)).filter(l=>l.length>0))}function a(h){u(d=>d.length>0?(d[d.length-1]=[d[d.length-1][0],h],[...d]):[[h]])}function _(){u([])}const f=createMemo(()=>o().flatMap(([h,d])=>{if(d){const l=w().findIndex(p=>p.path===h),g=w().findIndex(p=>p.path===d);return w().slice(Math.min(l,g),Math.max(l,g)+1).map(p=>p.path)}return h}).sort((h,d)=>h<d?-1:1)),S=createSelector(f,(h,d)=>d.includes(h));createEffect(()=>e.onSelection?.(f())),createEffect(()=>{batch(()=>{if(!e.selection)return;_();const h=e.selection.filter(d=>e.fs.exists(d)).map(d=>[d]);u(h)})});const[y,b]=createSignal(new Array,{equals:!1}),I=createSelector(y,(h,d)=>d.includes(h));function E(h){b(d=>d.filter(l=>l!==h))}function x(h){b(d=>[...d,h])}const[R,P]=createStore({});function O(h){return R[h]?.()||[]}createEffect(mapArray(()=>[n.base,...y()],h=>{const d=createMemo(keyArray(()=>e.fs.readdir(h,{withFileTypes:!0}),g=>g.path,g=>({path:g().path,indentation:A(g().path),name:PathUtils.getName(g().path),get type(){return g().type},open(){x(g().path)},close(){E(g().path)},get opened(){return I(g().path)},select(){t(g().path)},deselect(){c(g().path)},shiftSelect(){a(g().path)},get selected(){return S(g().path)},rename(p){e.fs.rename(g().path,p)}}))),l=createMemo(()=>d().toSorted(e.sort??((g,p)=>g.type!==p.type?g.type==="dir"?-1:1:g.path<p.path?-1:1)));P(h,()=>l),onCleanup(()=>P(h,void 0)),createRenderEffect(()=>{e.fs.exists(h)||b(g=>g.filter(p=>p!==h))})}));const w=createMemo(()=>{const h=new Array,d=[n.base];for(;d.length>0;){const l=d.shift(),g=O(l);d.push(...g.filter(p=>p.type==="dir"&&I(p.path)).map(p=>p.path)),h.splice(h.findIndex(p=>p.path===l)+1,0,...g)}return h});function A(h){return h.split("/").length-n.base.split("/").length}function m(h){const d=f();for(const p of d){if(p===h)throw`Cannot move ${p} into itself.`;if(PathUtils.isAncestor(h,p))throw`Cannot move because ${p} is ancestor of ${h}.`}const l=new Array,g=d.sort((p,C)=>p<C?-1:1).map((p,C,v)=>{const T=v.slice(0,C).find($=>PathUtils.isAncestor(p,$)),k=(T?[h,lastItem(T.split("/")),p.replace(`${T}/`,"")]:[h,lastItem(p.split("/"))]).filter(Boolean).join("/");return e.fs.exists(k)&&l.push({oldPath:p,newPath:k}),{oldPath:p,newPath:k,shouldRename:!T}});if(l.length>0)throw`Paths already exist: ${l.map(({newPath:p})=>p)}`;batch(()=>{b(p=>p.map(C=>{const v=g.find(({oldPath:T})=>T===C);return v?v.newPath:C})),u(()=>g.map(({newPath:p})=>[p])),g.forEach(({oldPath:p,newPath:C,shouldRename:v})=>{v&&e.fs.rename(p,C)}),I(h)||x(h)})}const i=mergeProps(n,{openDir:x,closeDir:E,indentationFromPath:A,isDirOpened:I,moveSelection:m,resetSelection:_,selectDirEnt:t,deselectDirEnt:c,shiftSelectDirEnt:a,getDirEntsOfDir:O,flatTree:w});return(()=>{var h=_tmpl$$3();return spread(h,mergeProps(s,{onDragOver:d=>{d.preventDefault(),e.onDragOver?.(d)},onDrop:d=>{m(n.base),e.onDrop?.(d)}}),!1,!0),insert(h,createComponent(FileTreeContext.Provider,{value:i,get children(){return createComponent(Key,{get each(){return w()},by:d=>d.path,children:d=>createComponent(DirEntContext.Provider,{get value(){return d()},get children(){return e.children(d(),i)}})})}})),h})()}FileTree.DirEnt=function(e){const n=mergeProps({draggable:!0},e),s=useFileTree(),o=useDirEnt(),u={onPointerDown(t){t.shiftKey?o.shiftSelect():o.selected||batch(()=>{(isMac?!t.metaKey:!t.ctrlKey)&&s.resetSelection(),o.select()}),e.onPointerDown?.(t)},onPointerUp(t){o.type==="dir"&&(s.isDirOpened(o.path)?o.close():o.open()),e.onPointerUp?.(t)},onDragOver:t=>{t.preventDefault(),e.onDragOver?.(t)},onDrop:t=>{if(t.preventDefault(),t.stopPropagation(),o.type==="dir")s.moveSelection(o.path);else{const c=o.path.split("/").slice(0,-1).join("/");s.moveSelection(c)}e.onDrop?.(t)}};return createComponent(Show,{get when(){return o.type==="dir"},get fallback(){return(()=>{var t=_tmpl$2$1();return spread(t,mergeProps(n,u),!1,!1),t})()},children:t=>createComponent(Show,{get when(){return o.path},get children(){var c=_tmpl$2$1();return spread(c,mergeProps(n,u),!1,!0),insert(c,()=>e.children),c}})})};FileTree.IndentGuides=function(e){const n=useDirEnt(),s=useFileTree();function o(c){const a=PathUtils.getParent(c);if(a===s.base)return!1;const _=s.getDirEntsOfDir(a),f=_.findIndex(S=>S.path===c);return!_[f+1]}function u(c){return n.path.split("/").slice(0,c+2).join("/")}function t(c){const a=n.indentation-c===1;return a&&o(n.path)?"elbow":o(u(c))?"spacer":a?"tee":"pipe"}return createComponent(Repeat,{get times(){return n.indentation},children:c=>{const a=t(c);return createComponent(IndentGuideContext.Provider,{value:a,get children(){return e.guide(a)}})}})};FileTree.Opened=function(e){const[,n]=splitProps(e,["closed","opened"]),s=useDirEnt(),o=useFileTree();return createComponent(Show,{get when(){return s.type==="dir"},get children(){var u=_tmpl$3();return spread(u,n,!1,!0),insert(u,createComponent(Show,{get when(){return o.isDirOpened(s.path)},get fallback(){return e.opened},get children(){return e.closed}})),u}})};FileTree.Name=function(e){splitProps(e,["editable","style"]);const n=useDirEnt(),s=useFileTree();function o(u){const t=[...n.path.split("/").slice(0,-1),u.value].join("/");if(t!==n.path){if(s.fs.exists(t))throw u.value=n.path,`Path ${t} already exists.`;n.rename(t),s.resetSelection(),s.selectDirEnt(t)}}return createComponent(Show,{get when(){return e.editable},get fallback(){return(()=>{var u=_tmpl$3();return insert(u,()=>n.name),createRenderEffect(t=>{var c=e.class,a=e.style;return c!==t.e&&className(u,t.e=c),t.t=style(u,a,t.t),t},{e:void 0,t:void 0}),u})()},get children(){var u=_tmpl$4();return u.addEventListener("blur",t=>{o(t.currentTarget),e.onBlur?.(t)}),u.$$keydown=t=>{t.code==="Enter"&&o(t.currentTarget)},use(t=>{onMount(()=>{t.focus();const c=t.value,a=c.indexOf("."),_=a===-1?c.length:a;t.setSelectionRange(0,_)})},u),createRenderEffect(t=>{var c=e.class,a={all:"unset",...e.style};return c!==t.e&&className(u,t.e=c),t.t=style(u,a,t.t),t},{e:void 0,t:void 0}),createRenderEffect(()=>u.value=n.name),u}})};delegateEvents(["keydown"]);const elbow="_elbow_1gifb_1",pipe="_pipe_1gifb_11",arm="_arm_1gifb_19",styles$2={elbow,pipe,arm};var _tmpl$$2=template("<span>");function DefaultIndentGuide(e){const n=useIndentGuide();return(()=>{var s=_tmpl$$2();return s.style.setProperty("position","relative"),insert(s,createComponent(Switch,{get children(){return[createComponent(Match,{when:n==="elbow",get children(){var o=_tmpl$$2();return createRenderEffect(()=>className(o,styles$2.elbow)),o}}),createComponent(Match,{when:n==="tee",get children(){return[(()=>{var o=_tmpl$$2();return createRenderEffect(()=>className(o,styles$2.pipe)),o})(),(()=>{var o=_tmpl$$2();return createRenderEffect(()=>className(o,styles$2.arm)),o})()]}}),createComponent(Match,{when:n==="pipe",get children(){var o=_tmpl$$2();return createRenderEffect(()=>className(o,styles$2.pipe)),o}})]}})),createRenderEffect(o=>{var u=e.color,t=`${e.width}px`;return u!==o.e&&((o.e=u)!=null?s.style.setProperty("--color",u):s.style.removeProperty("--color")),t!==o.t&&((o.t=t)!=null?s.style.setProperty("width",t):s.style.removeProperty("width")),o},{e:void 0,t:void 0}),s})()}let CDN="https://esm.sh";const CACHE={theme:{},grammar:{}};function urlFromCDN(e,n){switch(e){case"theme":return`${CDN}/tm-themes/themes/${n}.json`;case"grammar":return`${CDN}/tm-grammars/grammars/${n}.json`;case"oniguruma":return`${CDN}/vscode-oniguruma/release/onig.wasm`}}async function fetchFromCDN(e,n){if(n in CACHE[e])return CACHE[e][n];const s=urlFromCDN(e,n);return CACHE[e][n]=typeof s!="string"?s:fetch(s).then(o=>o.ok?o.json():null).catch(console.error)}var define_process_env_default={},__defProp=Object.defineProperty,__defNormalProp=(e,n,s)=>n in e?__defProp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,__publicField=(e,n,s)=>(__defNormalProp(e,n+"",s),s),__accessCheck=(e,n,s)=>{if(!n.has(e))throw TypeError("Cannot "+s)},__privateGet=(e,n,s)=>(__accessCheck(e,n,"read from private field"),s?s.call(e):n.get(e)),__privateAdd=(e,n,s)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,s)},_array,_scopes;function _mergeNamespaces(e,n){for(var s=0;s<n.length;s++){const o=n[s];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in e)){const t=Object.getOwnPropertyDescriptor(o,u);t&&Object.defineProperty(e,u,t.get?t:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var EQUALS_FALSE_OPTIONS={equals:!1};function createLazyMemo(e,n,s){let o=!1,u=!0;const[t,c]=createSignal(void 0,EQUALS_FALSE_OPTIONS),a=createMemo(_=>o?e(_):(u=!t(),_),n,EQUALS_FALSE_OPTIONS);return()=>{o=!0,u&&(u=c());const _=a();return o=!1,_}}function r(e){var n,s,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(n=0;n<u;n++)e[n]&&(s=r(e[n]))&&(o&&(o+=" "),o+=s)}else for(s in e)e[s]&&(o&&(o+=" "),o+=s);return o}function clsx(){for(var e,n,s=0,o="",u=arguments.length;s<u;s++)(e=arguments[s])&&(n=r(e))&&(o&&(o+=" "),o+=n);return o}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var main$2={exports:{}};(function(e,n){(function(s,o){e.exports=o()})(commonjsGlobal,()=>{return s={770:function(u,t,c){var a=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultDebugCall=t.createOnigScanner=t.createOnigString=t.loadWASM=t.OnigScanner=t.OnigString=void 0;const _=a(c(418));let f=null,S=!1;class y{static _utf8ByteLength(P){let O=0;for(let w=0,A=P.length;w<A;w++){const m=P.charCodeAt(w);let i=m,h=!1;if(m>=55296&&m<=56319&&w+1<A){const d=P.charCodeAt(w+1);d>=56320&&d<=57343&&(i=65536+(m-55296<<10)|d-56320,h=!0)}O+=i<=127?1:i<=2047?2:i<=65535?3:4,h&&w++}return O}constructor(P){const O=P.length,w=y._utf8ByteLength(P),A=w!==O,m=A?new Uint32Array(O+1):null;A&&(m[O]=w);const i=A?new Uint32Array(w+1):null;A&&(i[w]=O);const h=new Uint8Array(w);let d=0;for(let l=0;l<O;l++){const g=P.charCodeAt(l);let p=g,C=!1;if(g>=55296&&g<=56319&&l+1<O){const v=P.charCodeAt(l+1);v>=56320&&v<=57343&&(p=65536+(g-55296<<10)|v-56320,C=!0)}A&&(m[l]=d,C&&(m[l+1]=d),p<=127?i[d+0]=l:p<=2047?(i[d+0]=l,i[d+1]=l):p<=65535?(i[d+0]=l,i[d+1]=l,i[d+2]=l):(i[d+0]=l,i[d+1]=l,i[d+2]=l,i[d+3]=l)),p<=127?h[d++]=p:p<=2047?(h[d++]=192|(1984&p)>>>6,h[d++]=128|(63&p)>>>0):p<=65535?(h[d++]=224|(61440&p)>>>12,h[d++]=128|(4032&p)>>>6,h[d++]=128|(63&p)>>>0):(h[d++]=240|(1835008&p)>>>18,h[d++]=128|(258048&p)>>>12,h[d++]=128|(4032&p)>>>6,h[d++]=128|(63&p)>>>0),C&&l++}this.utf16Length=O,this.utf8Length=w,this.utf16Value=P,this.utf8Value=h,this.utf16OffsetToUtf8=m,this.utf8OffsetToUtf16=i}createString(P){const O=P._omalloc(this.utf8Length);return P.HEAPU8.set(this.utf8Value,O),O}}class b{constructor(P){if(this.id=++b.LAST_ID,!f)throw new Error("Must invoke loadWASM first.");this._onigBinding=f,this.content=P;const O=new y(P);this.utf16Length=O.utf16Length,this.utf8Length=O.utf8Length,this.utf16OffsetToUtf8=O.utf16OffsetToUtf8,this.utf8OffsetToUtf16=O.utf8OffsetToUtf16,this.utf8Length<1e4&&!b._sharedPtrInUse?(b._sharedPtr||(b._sharedPtr=f._omalloc(1e4)),b._sharedPtrInUse=!0,f.HEAPU8.set(O.utf8Value,b._sharedPtr),this.ptr=b._sharedPtr):this.ptr=O.createString(f)}convertUtf8OffsetToUtf16(P){return this.utf8OffsetToUtf16?P<0?0:P>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[P]:P}convertUtf16OffsetToUtf8(P){return this.utf16OffsetToUtf8?P<0?0:P>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[P]:P}dispose(){this.ptr===b._sharedPtr?b._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}t.OnigString=b,b.LAST_ID=0,b._sharedPtr=0,b._sharedPtrInUse=!1;class I{constructor(P,O){var w,A;if(!f)throw new Error("Must invoke loadWASM first.");const m=[],i=[];for(let C=0,v=P.length;C<v;C++){const T=new y(P[C]);m[C]=T.createString(f),i[C]=T.utf8Length}const h=f._omalloc(4*P.length);f.HEAPU32.set(m,h/4);const d=f._omalloc(4*P.length);f.HEAPU32.set(i,d/4),this._onigBinding=f,this._options=(w=O?.options)!==null&&w!==void 0?w:[10];const l=this.onigOptions(this._options),g=this.onigSyntax((A=O?.syntax)!==null&&A!==void 0?A:0),p=f._createOnigScanner(h,d,P.length,l,g);this._ptr=p;for(let C=0,v=P.length;C<v;C++)f._ofree(m[C]);f._ofree(d),f._ofree(h),p===0&&function(C){throw new Error(C.UTF8ToString(C._getLastOnigError()))}(f)}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(P,O,w){let A=S,m=this._options;if(Array.isArray(w)?(w.includes(25)&&(A=!0),m=m.concat(w)):typeof w=="boolean"&&(A=w),typeof P=="string"){P=new b(P);const i=this._findNextMatchSync(P,O,A,m);return P.dispose(),i}return this._findNextMatchSync(P,O,A,m)}_findNextMatchSync(P,O,w,A){const m=this._onigBinding,i=this.onigOptions(A);let h;if(h=w?m._findNextOnigScannerMatchDbg(this._ptr,P.id,P.ptr,P.utf8Length,P.convertUtf16OffsetToUtf8(O),i):m._findNextOnigScannerMatch(this._ptr,P.id,P.ptr,P.utf8Length,P.convertUtf16OffsetToUtf8(O),i),h===0)return null;const d=m.HEAPU32;let l=h/4;const g=d[l++],p=d[l++];let C=[];for(let v=0;v<p;v++){const T=P.convertUtf8OffsetToUtf16(d[l++]),k=P.convertUtf8OffsetToUtf16(d[l++]);C[v]={start:T,end:k,length:k-T}}return{index:g,captureIndices:C}}onigOptions(P){return P.map(O=>this.onigOption(O)).reduce((O,w)=>O|w,this._onigBinding.ONIG_OPTION_NONE)}onigSyntax(P){switch(P){case 0:return this._onigBinding.ONIG_SYNTAX_DEFAULT;case 1:return this._onigBinding.ONIG_SYNTAX_ASIS;case 2:return this._onigBinding.ONIG_SYNTAX_POSIX_BASIC;case 3:return this._onigBinding.ONIG_SYNTAX_POSIX_EXTENDED;case 4:return this._onigBinding.ONIG_SYNTAX_EMACS;case 5:return this._onigBinding.ONIG_SYNTAX_GREP;case 6:return this._onigBinding.ONIG_SYNTAX_GNU_REGEX;case 7:return this._onigBinding.ONIG_SYNTAX_JAVA;case 8:return this._onigBinding.ONIG_SYNTAX_PERL;case 9:return this._onigBinding.ONIG_SYNTAX_PERL_NG;case 10:return this._onigBinding.ONIG_SYNTAX_RUBY;case 11:return this._onigBinding.ONIG_SYNTAX_PYTHON;case 12:return this._onigBinding.ONIG_SYNTAX_ONIGURUMA}}onigOption(P){switch(P){case 1:return this._onigBinding.ONIG_OPTION_NONE;case 0:case 25:return this._onigBinding.ONIG_OPTION_DEFAULT;case 2:return this._onigBinding.ONIG_OPTION_IGNORECASE;case 3:return this._onigBinding.ONIG_OPTION_EXTEND;case 4:return this._onigBinding.ONIG_OPTION_MULTILINE;case 5:return this._onigBinding.ONIG_OPTION_SINGLELINE;case 6:return this._onigBinding.ONIG_OPTION_FIND_LONGEST;case 7:return this._onigBinding.ONIG_OPTION_FIND_NOT_EMPTY;case 8:return this._onigBinding.ONIG_OPTION_NEGATE_SINGLELINE;case 9:return this._onigBinding.ONIG_OPTION_DONT_CAPTURE_GROUP;case 10:return this._onigBinding.ONIG_OPTION_CAPTURE_GROUP;case 11:return this._onigBinding.ONIG_OPTION_NOTBOL;case 12:return this._onigBinding.ONIG_OPTION_NOTEOL;case 13:return this._onigBinding.ONIG_OPTION_CHECK_VALIDITY_OF_STRING;case 14:return this._onigBinding.ONIG_OPTION_IGNORECASE_IS_ASCII;case 15:return this._onigBinding.ONIG_OPTION_WORD_IS_ASCII;case 16:return this._onigBinding.ONIG_OPTION_DIGIT_IS_ASCII;case 17:return this._onigBinding.ONIG_OPTION_SPACE_IS_ASCII;case 18:return this._onigBinding.ONIG_OPTION_POSIX_IS_ASCII;case 19:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_EXTENDED_GRAPHEME_CLUSTER;case 20:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_WORD;case 21:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_STRING;case 22:return this._onigBinding.ONIG_OPTION_NOT_END_STRING;case 23:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_POSITION;case 24:return this._onigBinding.ONIG_OPTION_CALLBACK_EACH_MATCH}}}t.OnigScanner=I;let E=!1,x=null;t.loadWASM=function(R){if(E)return x;let P,O,w,A;if(E=!0,function(m){return typeof m.instantiator=="function"}(R))P=R.instantiator,O=R.print;else{let m;(function(i){return i.data!==void 0})(R)?(m=R.data,O=R.print):m=R,P=function(i){return typeof Response<"u"&&i instanceof Response}(m)?typeof WebAssembly.instantiateStreaming=="function"?function(i){return h=>WebAssembly.instantiateStreaming(i,h)}(m):function(i){return async h=>{const d=await i.arrayBuffer();return WebAssembly.instantiate(d,h)}}(m):function(i){return h=>WebAssembly.instantiate(i,h)}(m)}return x=new Promise((m,i)=>{w=m,A=i}),function(m,i,h,d){(0,_.default)({print:i,instantiateWasm:(l,g)=>{if(typeof performance>"u"){const p=()=>Date.now();l.env.emscripten_get_now=p,l.wasi_snapshot_preview1.emscripten_get_now=p}return m(l).then(p=>g(p.instance),d),{}}}).then(l=>{f=l,h()})}(P,O,w,A),x},t.createOnigString=function(R){return new b(R)},t.createOnigScanner=function(R){return new I(R)},t.setDefaultDebugCall=function(R){S=R}},418:u=>{var t=(typeof document<"u"&&document.currentScript&&document.currentScript.src,function(c={}){var a,_,f=c;f.ready=new Promise((N,L)=>{a=N,_=L});var S,y=Object.assign({},f);typeof read<"u"&&read,S=N=>{if(typeof readbuffer=="function")return new Uint8Array(readbuffer(N));let L=read(N,"binary");return typeof L=="object"||k(G),L;var G},typeof clearTimeout>"u"&&(globalThis.clearTimeout=N=>{}),typeof setTimeout>"u"&&(globalThis.setTimeout=N=>typeof N=="function"?N():k()),typeof scriptArgs<"u"&&scriptArgs,typeof onig_print<"u"&&(typeof console>"u"&&(console={}),console.log=onig_print,console.warn=console.error=typeof printErr<"u"?printErr:onig_print);var b,I,E=f.print||console.log.bind(console),x=f.printErr||console.error.bind(console);Object.assign(f,y),y=null,f.arguments&&f.arguments,f.thisProgram&&f.thisProgram,f.quit&&f.quit,f.wasmBinary&&(b=f.wasmBinary),f.noExitRuntime,typeof WebAssembly!="object"&&k("no native wasm support detected");var R,P,O,w,A,m,i,h,d=!1;function l(){var N=I.buffer;f.HEAP8=R=new Int8Array(N),f.HEAP16=O=new Int16Array(N),f.HEAPU8=P=new Uint8Array(N),f.HEAPU16=w=new Uint16Array(N),f.HEAP32=A=new Int32Array(N),f.HEAPU32=m=new Uint32Array(N),f.HEAPF32=i=new Float32Array(N),f.HEAPF64=h=new Float64Array(N)}var g=[],p=[],C=[],v=0,T=null;function k(N){f.onAbort&&f.onAbort(N),x(N="Aborted("+N+")"),d=!0,N+=". Build with -sASSERTIONS for more info.";var L=new WebAssembly.RuntimeError(N);throw _(L),L}var $,U;function z(N){return N.startsWith("data:application/octet-stream;base64,")}function W(N){if(N==$&&b)return new Uint8Array(b);if(S)return S(N);throw"both async and sync fetching of the wasm failed"}function Q(N,L,G){return function(M){return Promise.resolve().then(()=>W(M))}(N).then(M=>WebAssembly.instantiate(M,L)).then(M=>M).then(G,M=>{x(`failed to asynchronously prepare wasm: ${M}`),k(M)})}z($="onig.wasm")||(U=$,$=f.locateFile?f.locateFile(U,""):""+U);var ee=N=>{for(;N.length>0;)N.shift()(f)},Z=void 0,X=N=>{for(var L="",G=N;P[G];)L+=Z[P[G++]];return L},Y={},V={},oe={},D=void 0,te=N=>{throw new D(N)},J=void 0,he=(N,L,G)=>{function M(K){var H=G(K);H.length!==N.length&&(ie=>{throw new J(ie)})("Mismatched type converter count");for(var q=0;q<N.length;++q)le(N[q],H[q])}N.forEach(function(K){oe[K]=L});var F=new Array(L.length),B=[],j=0;L.forEach((K,H)=>{V.hasOwnProperty(K)?F[H]=V[K]:(B.push(K),Y.hasOwnProperty(K)||(Y[K]=[]),Y[K].push(()=>{F[H]=V[K],++j===B.length&&M(F)}))}),B.length===0&&M(F)};function le(N,L,G={}){if(!("argPackAdvance"in L))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(M,F,B={}){var j=F.name;if(M||te(`type "${j}" must have a positive integer typeid pointer`),V.hasOwnProperty(M)){if(B.ignoreDuplicateRegistrations)return;te(`Cannot register type '${j}' twice`)}if(V[M]=F,delete oe[M],Y.hasOwnProperty(M)){var K=Y[M];delete Y[M],K.forEach(H=>H())}}(N,L,G)}function ve(){this.allocated=[void 0],this.freelist=[]}var ae=new ve,pe=()=>{for(var N=0,L=ae.reserved;L<ae.allocated.length;++L)ae.allocated[L]!==void 0&&++N;return N},Pe=N=>(N||te("Cannot use deleted val. handle = "+N),ae.get(N).value),ye=N=>{switch(N){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ae.allocate({refcount:1,value:N})}};function ge(N){return this.fromWireType(A[N>>2])}var Se=(N,L)=>{switch(L){case 4:return function(G){return this.fromWireType(i[G>>2])};case 8:return function(G){return this.fromWireType(h[G>>3])};default:throw new TypeError(`invalid float width (${L}): ${N}`)}},me=(N,L,G)=>{switch(L){case 1:return G?M=>R[M>>0]:M=>P[M>>0];case 2:return G?M=>O[M>>1]:M=>w[M>>1];case 4:return G?M=>A[M>>2]:M=>m[M>>2];default:throw new TypeError(`invalid integer width (${L}): ${N}`)}};function fe(N){return this.fromWireType(m[N>>2])}var be,Ae=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ee=(N,L,G)=>{for(var M=L+G,F=L;N[F]&&!(F>=M);)++F;if(F-L>16&&N.buffer&&Ae)return Ae.decode(N.subarray(L,F));for(var B="";L<F;){var j=N[L++];if(128&j){var K=63&N[L++];if((224&j)!=192){var H=63&N[L++];if((j=(240&j)==224?(15&j)<<12|K<<6|H:(7&j)<<18|K<<12|H<<6|63&N[L++])<65536)B+=String.fromCharCode(j);else{var q=j-65536;B+=String.fromCharCode(55296|q>>10,56320|1023&q)}}else B+=String.fromCharCode((31&j)<<6|K)}else B+=String.fromCharCode(j)}return B},we=(N,L)=>N?Ee(P,N,L):"",Oe=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ne=(N,L)=>{for(var G=N,M=G>>1,F=M+L/2;!(M>=F)&&w[M];)++M;if((G=M<<1)-N>32&&Oe)return Oe.decode(P.subarray(N,G));for(var B="",j=0;!(j>=L/2);++j){var K=O[N+2*j>>1];if(K==0)break;B+=String.fromCharCode(K)}return B},Re=(N,L,G)=>{if(G===void 0&&(G=2147483647),G<2)return 0;for(var M=L,F=(G-=2)<2*N.length?G/2:N.length,B=0;B<F;++B){var j=N.charCodeAt(B);O[L>>1]=j,L+=2}return O[L>>1]=0,L-M},Ce=N=>2*N.length,Te=(N,L)=>{for(var G=0,M="";!(G>=L/4);){var F=A[N+4*G>>2];if(F==0)break;if(++G,F>=65536){var B=F-65536;M+=String.fromCharCode(55296|B>>10,56320|1023&B)}else M+=String.fromCharCode(F)}return M},Ge=(N,L,G)=>{if(G===void 0&&(G=2147483647),G<4)return 0;for(var M=L,F=M+G-4,B=0;B<N.length;++B){var j=N.charCodeAt(B);if(j>=55296&&j<=57343&&(j=65536+((1023&j)<<10)|1023&N.charCodeAt(++B)),A[L>>2]=j,(L+=4)+4>F)break}return A[L>>2]=0,L-M},Fe=N=>{for(var L=0,G=0;G<N.length;++G){var M=N.charCodeAt(G);M>=55296&&M<=57343&&++G,L+=4}return L};be=()=>performance.now();var Be=N=>{var L=(N-I.buffer.byteLength+65535)/65536;try{return I.grow(L),l(),1}catch{}},je=[null,[],[]];(()=>{for(var N=new Array(256),L=0;L<256;++L)N[L]=String.fromCharCode(L);Z=N})(),D=f.BindingError=class extends Error{constructor(N){super(N),this.name="BindingError"}},J=f.InternalError=class extends Error{constructor(N){super(N),this.name="InternalError"}},Object.assign(ve.prototype,{get(N){return this.allocated[N]},has(N){return this.allocated[N]!==void 0},allocate(N){var L=this.freelist.pop()||this.allocated.length;return this.allocated[L]=N,L},free(N){this.allocated[N]=void 0,this.freelist.push(N)}}),ae.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),ae.reserved=ae.allocated.length,f.count_emval_handles=pe;var Ie,Me={_embind_register_bigint:(N,L,G,M,F)=>{},_embind_register_bool:(N,L,G,M)=>{le(N,{name:L=X(L),fromWireType:function(F){return!!F},toWireType:function(F,B){return B?G:M},argPackAdvance:8,readValueFromPointer:function(F){return this.fromWireType(P[F])},destructorFunction:null})},_embind_register_constant:(N,L,G)=>{N=X(N),he([],[L],function(M){return M=M[0],f[N]=M.fromWireType(G),[]})},_embind_register_emval:(N,L)=>{le(N,{name:L=X(L),fromWireType:G=>{var M=Pe(G);return(F=>{F>=ae.reserved&&--ae.get(F).refcount==0&&ae.free(F)})(G),M},toWireType:(G,M)=>ye(M),argPackAdvance:8,readValueFromPointer:ge,destructorFunction:null})},_embind_register_float:(N,L,G)=>{le(N,{name:L=X(L),fromWireType:M=>M,toWireType:(M,F)=>F,argPackAdvance:8,readValueFromPointer:Se(L,G),destructorFunction:null})},_embind_register_integer:(N,L,G,M,F)=>{L=X(L);var B=H=>H;if(M===0){var j=32-8*G;B=H=>H<<j>>>j}var K=L.includes("unsigned");le(N,{name:L,fromWireType:B,toWireType:K?function(H,q){return this.name,q>>>0}:function(H,q){return this.name,q},argPackAdvance:8,readValueFromPointer:me(L,G,M!==0),destructorFunction:null})},_embind_register_memory_view:(N,L,G)=>{var M=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][L];function F(B){var j=m[B>>2],K=m[B+4>>2];return new M(R.buffer,K,j)}le(N,{name:G=X(G),fromWireType:F,argPackAdvance:8,readValueFromPointer:F},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:(N,L)=>{var G=(L=X(L))==="std::string";le(N,{name:L,fromWireType:M=>{var F,B=m[M>>2],j=M+4;if(G)for(var K=j,H=0;H<=B;++H){var q=j+H;if(H==B||P[q]==0){var ie=we(K,q-K);F===void 0?F=ie:(F+="\0",F+=ie),K=q+1}}else{var re=new Array(B);for(H=0;H<B;++H)re[H]=String.fromCharCode(P[j+H]);F=re.join("")}return _e(M),F},toWireType:(M,F)=>{var B;F instanceof ArrayBuffer&&(F=new Uint8Array(F));var j=typeof F=="string";j||F instanceof Uint8Array||F instanceof Uint8ClampedArray||F instanceof Int8Array||te("Cannot pass non-string to std::string"),B=G&&j?(re=>{for(var se=0,ne=0;ne<re.length;++ne){var de=re.charCodeAt(ne);de<=127?se++:de<=2047?se+=2:de>=55296&&de<=57343?(se+=4,++ne):se+=3}return se})(F):F.length;var K=Le(4+B+1),H=K+4;if(m[K>>2]=B,G&&j)((re,se,ne,de)=>{if(!(de>0))return 0;for(var $e=ne,xe=ne+de-1,ke=0;ke<re.length;++ke){var ce=re.charCodeAt(ke);if(ce>=55296&&ce<=57343&&(ce=65536+((1023&ce)<<10)|1023&re.charCodeAt(++ke)),ce<=127){if(ne>=xe)break;se[ne++]=ce}else if(ce<=2047){if(ne+1>=xe)break;se[ne++]=192|ce>>6,se[ne++]=128|63&ce}else if(ce<=65535){if(ne+2>=xe)break;se[ne++]=224|ce>>12,se[ne++]=128|ce>>6&63,se[ne++]=128|63&ce}else{if(ne+3>=xe)break;se[ne++]=240|ce>>18,se[ne++]=128|ce>>12&63,se[ne++]=128|ce>>6&63,se[ne++]=128|63&ce}}se[ne]=0})(F,P,H,B+1);else if(j)for(var q=0;q<B;++q){var ie=F.charCodeAt(q);ie>255&&(_e(H),te("String has UTF-16 code units that do not fit in 8 bits")),P[H+q]=ie}else for(q=0;q<B;++q)P[H+q]=F[q];return M!==null&&M.push(_e,K),K},argPackAdvance:8,readValueFromPointer:fe,destructorFunction:M=>_e(M)})},_embind_register_std_wstring:(N,L,G)=>{var M,F,B,j,K;G=X(G),L===2?(M=Ne,F=Re,j=Ce,B=()=>w,K=1):L===4&&(M=Te,F=Ge,j=Fe,B=()=>m,K=2),le(N,{name:G,fromWireType:H=>{for(var q,ie=m[H>>2],re=B(),se=H+4,ne=0;ne<=ie;++ne){var de=H+4+ne*L;if(ne==ie||re[de>>K]==0){var $e=M(se,de-se);q===void 0?q=$e:(q+="\0",q+=$e),se=de+L}}return _e(H),q},toWireType:(H,q)=>{typeof q!="string"&&te(`Cannot pass non-string to C++ string type ${G}`);var ie=j(q),re=Le(4+ie+L);return m[re>>2]=ie>>K,F(q,re+4,ie+L),H!==null&&H.push(_e,re),re},argPackAdvance:8,readValueFromPointer:ge,destructorFunction:H=>_e(H)})},_embind_register_void:(N,L)=>{le(N,{isVoid:!0,name:L=X(L),argPackAdvance:0,fromWireType:()=>{},toWireType:(G,M)=>{}})},emscripten_get_now:be,emscripten_memcpy_big:(N,L,G)=>P.copyWithin(N,L,L+G),emscripten_resize_heap:N=>{var L=P.length,G=2147483648;if((N>>>=0)>G)return!1;for(var M,F=1;F<=4;F*=2){var B=L*(1+.2/F);B=Math.min(B,N+100663296);var j=Math.min(G,(M=Math.max(N,B))+(65536-M%65536)%65536);if(Be(j))return!0}return!1},fd_write:(N,L,G,M)=>{for(var F=0,B=0;B<G;B++){var j=m[L>>2],K=m[L+4>>2];L+=8;for(var H=0;H<K;H++)q=N,ie=P[j+H],re=void 0,re=je[q],ie===0||ie===10?((q===1?E:x)(Ee(re,0)),re.length=0):re.push(ie);F+=K}var q,ie,re;return m[M>>2]=F,0}},ue=function(){var N,L,G,M,F={env:Me,wasi_snapshot_preview1:Me};function B(j,K){var H,q=j.exports;return I=(ue=q).memory,l(),ue.__indirect_function_table,H=ue.__wasm_call_ctors,p.unshift(H),function(ie){if(v--,f.monitorRunDependencies&&f.monitorRunDependencies(v),v==0&&T){var re=T;T=null,re()}}(),q}if(v++,f.monitorRunDependencies&&f.monitorRunDependencies(v),f.instantiateWasm)try{return f.instantiateWasm(F,B)}catch(j){x(`Module.instantiateWasm callback failed with error: ${j}`),_(j)}return(N=b,L=$,G=F,M=function(j){B(j.instance)},N||typeof WebAssembly.instantiateStreaming!="function"||z(L)||typeof fetch!="function"?Q(L,G,M):fetch(L,{credentials:"same-origin"}).then(j=>WebAssembly.instantiateStreaming(j,G).then(M,function(K){return x(`wasm streaming compile failed: ${K}`),x("falling back to ArrayBuffer instantiation"),Q(L,G,M)}))).catch(_),{}}(),Le=N=>(Le=ue.malloc)(N),_e=N=>(_e=ue.free)(N);function De(){function N(){Ie||(Ie=!0,f.calledRun=!0,d||(ee(p),a(f),f.onRuntimeInitialized&&f.onRuntimeInitialized(),function(){if(f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;)L=f.postRun.shift(),C.unshift(L);var L;ee(C)}()))}v>0||(function(){if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)L=f.preRun.shift(),g.unshift(L);var L;ee(g)}(),v>0||(f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),N()},1)):N()))}if(f._omalloc=N=>(f._omalloc=ue.omalloc)(N),f._ofree=N=>(f._ofree=ue.ofree)(N),f._getLastOnigError=()=>(f._getLastOnigError=ue.getLastOnigError)(),f._createOnigScanner=(N,L,G,M,F)=>(f._createOnigScanner=ue.createOnigScanner)(N,L,G,M,F),f._freeOnigScanner=N=>(f._freeOnigScanner=ue.freeOnigScanner)(N),f._findNextOnigScannerMatch=(N,L,G,M,F,B)=>(f._findNextOnigScannerMatch=ue.findNextOnigScannerMatch)(N,L,G,M,F,B),f._findNextOnigScannerMatchDbg=(N,L,G,M,F,B)=>(f._findNextOnigScannerMatchDbg=ue.findNextOnigScannerMatchDbg)(N,L,G,M,F,B),f.__embind_initialize_bindings=()=>(f.__embind_initialize_bindings=ue._embind_initialize_bindings)(),f.dynCall_jiji=(N,L,G,M,F)=>(f.dynCall_jiji=ue.dynCall_jiji)(N,L,G,M,F),f.UTF8ToString=we,T=function N(){Ie||De(),Ie||(T=N)},f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);f.preInit.length>0;)f.preInit.pop()();return De(),c.ready});u.exports=t}},o={},function u(t){var c=o[t];if(c!==void 0)return c.exports;var a=o[t]={exports:{}};return s[t].call(a.exports,a,a.exports,u),a.exports}(770);var s,o})})(main$2);var mainExports$1=main$2.exports;const main$1=getDefaultExportFromCjs(mainExports$1),oniguruma=_mergeNamespaces({__proto__:null,default:main$1},[mainExports$1]);var main={exports:{}};(function(e,n){(function(s,o){e.exports=o()})(commonjsGlobal,()=>(()=>{var s={350:(u,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UseOnigurumaFindOptions=t.DebugFlags=void 0,t.DebugFlags={InDebugMode:typeof process<"u"&&!!define_process_env_default.VSCODE_TEXTMATE_DEBUG},t.UseOnigurumaFindOptions=!1},442:(u,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyStateStackDiff=t.diffStateStacksRefEq=void 0;const a=c(391);t.diffStateStacksRefEq=function(_,f){let S=0;const y=[];let b=_,I=f;for(;b!==I;)b&&(!I||b.depth>=I.depth)?(S++,b=b.parent):(y.push(I.toStateStackFrame()),I=I.parent);return{pops:S,newFrames:y.reverse()}},t.applyStateStackDiff=function(_,f){let S=_;for(let y=0;y<f.pops;y++)S=S.parent;for(const y of f.newFrames)S=a.StateStackImpl.pushFrame(S,y);return S}},36:(u,t)=>{var c;Object.defineProperty(t,"__esModule",{value:!0}),t.toOptionalTokenType=t.EncodedTokenAttributes=void 0,(c=t.EncodedTokenAttributes||(t.EncodedTokenAttributes={})).toBinaryStr=function(a){return a.toString(2).padStart(32,"0")},c.print=function(a){const _=c.getLanguageId(a),f=c.getTokenType(a),S=c.getFontStyle(a),y=c.getForeground(a),b=c.getBackground(a);console.log({languageId:_,tokenType:f,fontStyle:S,foreground:y,background:b})},c.getLanguageId=function(a){return(255&a)>>>0},c.getTokenType=function(a){return(768&a)>>>8},c.containsBalancedBrackets=function(a){return(1024&a)!=0},c.getFontStyle=function(a){return(30720&a)>>>11},c.getForeground=function(a){return(16744448&a)>>>15},c.getBackground=function(a){return(4278190080&a)>>>24},c.set=function(a,_,f,S,y,b,I){let E=c.getLanguageId(a),x=c.getTokenType(a),R=c.containsBalancedBrackets(a)?1:0,P=c.getFontStyle(a),O=c.getForeground(a),w=c.getBackground(a);return _!==0&&(E=_),f!==8&&(x=f),S!==null&&(R=S?1:0),y!==-1&&(P=y),b!==0&&(O=b),I!==0&&(w=I),(E<<0|x<<8|R<<10|P<<11|O<<15|w<<24)>>>0},t.toOptionalTokenType=function(a){return a}},996:(u,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BasicScopeAttributesProvider=t.BasicScopeAttributes=void 0;const a=c(878);class _{constructor(b,I){this.languageId=b,this.tokenType=I}}t.BasicScopeAttributes=_;class f{constructor(b,I){this._getBasicScopeAttributes=new a.CachedFn(E=>{const x=this._scopeToLanguage(E),R=this._toStandardTokenType(E);return new _(x,R)}),this._defaultAttributes=new _(b,8),this._embeddedLanguagesMatcher=new S(Object.entries(I||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(b){return b===null?f._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(b)}_scopeToLanguage(b){return this._embeddedLanguagesMatcher.match(b)||0}_toStandardTokenType(b){const I=b.match(f.STANDARD_TOKEN_TYPE_REGEXP);if(!I)return 8;switch(I[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}t.BasicScopeAttributesProvider=f,f._NULL_SCOPE_METADATA=new _(0,0),f.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class S{constructor(b){if(b.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(b);const I=b.map(([E,x])=>a.escapeRegExpCharacters(E));I.sort(),I.reverse(),this.scopesRegExp=new RegExp(`^((${I.join(")|(")}))($|\\.)`,"")}}match(b){if(!this.scopesRegExp)return;const I=b.match(this.scopesRegExp);return I?this.values.get(I[1]):void 0}}},947:(u,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LineTokens=t.BalancedBracketSelectors=t.StateStackImpl=t.AttributedScopeStack=t.Grammar=t.createGrammar=void 0;const a=c(350),_=c(36),f=c(736),S=c(44),y=c(792),b=c(583),I=c(878),E=c(996),x=c(47);function R(d,l,g,p,C){const v=f.createMatchers(l,P),T=y.RuleFactory.getCompiledRuleId(g,p,C.repository);for(const k of v)d.push({debugSelector:l,matcher:k.matcher,ruleId:T,grammar:C,priority:k.priority})}function P(d,l){if(l.length<d.length)return!1;let g=0;return d.every(p=>{for(let C=g;C<l.length;C++)if(O(l[C],p))return g=C+1,!0;return!1})}function O(d,l){if(!d)return!1;if(d===l)return!0;const g=l.length;return d.length>g&&d.substr(0,g)===l&&d[g]==="."}t.createGrammar=function(d,l,g,p,C,v,T,k){return new w(d,l,g,p,C,v,T,k)};class w{constructor(l,g,p,C,v,T,k,$){if(this._rootScopeName=l,this.balancedBracketSelectors=T,this._onigLib=$,this._basicScopeAttributesProvider=new E.BasicScopeAttributesProvider(p,C),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=k,this._grammar=A(g,null),this._injections=null,this._tokenTypeMatchers=[],v)for(const U of Object.keys(v)){const z=f.createMatchers(U,P);for(const W of z)this._tokenTypeMatchers.push({matcher:W.matcher,type:v[U]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const l of this._ruleId2desc)l&&l.dispose()}createOnigScanner(l){return this._onigLib.createOnigScanner(l)}createOnigString(l){return this._onigLib.createOnigString(l)}getMetadataForScope(l){return this._basicScopeAttributesProvider.getBasicScopeAttributes(l)}_collectInjections(){const l=[],g=this._rootScopeName,p=(C=>C===this._rootScopeName?this._grammar:this.getExternalGrammar(C))(g);if(p){const C=p.injections;if(C)for(let T in C)R(l,T,C[T],this,p);const v=this._grammarRepository.injections(g);v&&v.forEach(T=>{const k=this.getExternalGrammar(T);if(k){const $=k.injectionSelector;$&&R(l,$,k,this,k)}})}return l.sort((C,v)=>C.priority-v.priority),l}getInjections(){if(this._injections===null&&(this._injections=this._collectInjections(),a.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const l of this._injections)console.log(`  - ${l.debugSelector}`)}return this._injections}registerRule(l){const g=++this._lastRuleId,p=l(y.ruleIdFromNumber(g));return this._ruleId2desc[g]=p,p}getRule(l){return this._ruleId2desc[y.ruleIdToNumber(l)]}getExternalGrammar(l,g){if(this._includedGrammars[l])return this._includedGrammars[l];if(this._grammarRepository){const p=this._grammarRepository.lookup(l);if(p)return this._includedGrammars[l]=A(p,g&&g.$base),this._includedGrammars[l]}}tokenizeLine(l,g,p=0){const C=this._tokenize(l,g,!1,p);return{tokens:C.lineTokens.getResult(C.ruleStack,C.lineLength),ruleStack:C.ruleStack,stoppedEarly:C.stoppedEarly}}tokenizeLine2(l,g,p=0){const C=this._tokenize(l,g,!0,p);return{tokens:C.lineTokens.getBinaryResult(C.ruleStack,C.lineLength),ruleStack:C.ruleStack,stoppedEarly:C.stoppedEarly}}_tokenize(l,g,p,C){let v;if(this._rootId===-1&&(this._rootId=y.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),g&&g!==i.NULL)v=!1,g.reset();else{v=!0;const z=this._basicScopeAttributesProvider.getDefaultAttributes(),W=this.themeProvider.getDefaults(),Q=_.EncodedTokenAttributes.set(0,z.languageId,z.tokenType,null,W.fontStyle,W.foregroundId,W.backgroundId),ee=this.getRule(this._rootId).getName(null,null);let Z;Z=ee?m.createRootAndLookUpScopeName(ee,Q,this):m.createRoot("unknown",Q),g=new i(null,this._rootId,-1,-1,!1,null,Z,Z)}l+=`
`;const T=this.createOnigString(l),k=T.content.length,$=new h(p,l,this._tokenTypeMatchers,this.balancedBracketSelectors),U=x._tokenizeString(this,T,v,0,g,$,!0,C);return S.disposeOnigString(T),{lineLength:k,lineTokens:$,ruleStack:U.stack,stoppedEarly:U.stoppedEarly}}}function A(d,l){return(d=I.clone(d)).repository=d.repository||{},d.repository.$self={$vscodeTextmateLocation:d.$vscodeTextmateLocation,patterns:d.patterns,name:d.scopeName},d.repository.$base=l||d.repository.$self,d}t.Grammar=w;class m{constructor(l,g,p){this.parent=l,this.scopePath=g,this.tokenAttributes=p}static fromExtension(l,g){let p=l,C=l?.scopePath??null;for(const v of g)C=b.ScopeStack.push(C,v.scopeNames),p=new m(p,C,v.encodedTokenAttributes);return p}static createRoot(l,g){return new m(null,new b.ScopeStack(null,l),g)}static createRootAndLookUpScopeName(l,g,p){const C=p.getMetadataForScope(l),v=new b.ScopeStack(null,l),T=p.themeProvider.themeMatch(v),k=m.mergeAttributes(g,C,T);return new m(null,v,k)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(l){return m.equals(this,l)}static equals(l,g){for(;;){if(l===g||!l&&!g)return!0;if(!l||!g||l.scopeName!==g.scopeName||l.tokenAttributes!==g.tokenAttributes)return!1;l=l.parent,g=g.parent}}static mergeAttributes(l,g,p){let C=-1,v=0,T=0;return p!==null&&(C=p.fontStyle,v=p.foregroundId,T=p.backgroundId),_.EncodedTokenAttributes.set(l,g.languageId,g.tokenType,null,C,v,T)}pushAttributed(l,g){if(l===null)return this;if(l.indexOf(" ")===-1)return m._pushAttributed(this,l,g);const p=l.split(/ /g);let C=this;for(const v of p)C=m._pushAttributed(C,v,g);return C}static _pushAttributed(l,g,p){const C=p.getMetadataForScope(g),v=l.scopePath.push(g),T=p.themeProvider.themeMatch(v),k=m.mergeAttributes(l.tokenAttributes,C,T);return new m(l,v,k)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(l){var g;const p=[];let C=this;for(;C&&C!==l;)p.push({encodedTokenAttributes:C.tokenAttributes,scopeNames:C.scopePath.getExtensionIfDefined(((g=C.parent)==null?void 0:g.scopePath)??null)}),C=C.parent;return C===l?p.reverse():void 0}}t.AttributedScopeStack=m;class i{constructor(l,g,p,C,v,T,k,$){this.parent=l,this.ruleId=g,this.beginRuleCapturedEOL=v,this.endRule=T,this.nameScopesList=k,this.contentNameScopesList=$,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=p,this._anchorPos=C}equals(l){return l!==null&&i._equals(this,l)}static _equals(l,g){return l===g||!!this._structuralEquals(l,g)&&m.equals(l.contentNameScopesList,g.contentNameScopesList)}static _structuralEquals(l,g){for(;;){if(l===g||!l&&!g)return!0;if(!l||!g||l.depth!==g.depth||l.ruleId!==g.ruleId||l.endRule!==g.endRule)return!1;l=l.parent,g=g.parent}}clone(){return this}static _reset(l){for(;l;)l._enterPos=-1,l._anchorPos=-1,l=l.parent}reset(){i._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(l,g,p,C,v,T,k){return new i(this,l,g,p,C,v,T,k)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(l){return l.getRule(this.ruleId)}toString(){const l=[];return this._writeString(l,0),"["+l.join(",")+"]"}_writeString(l,g){var p,C;return this.parent&&(g=this.parent._writeString(l,g)),l[g++]=`(${this.ruleId}, ${(p=this.nameScopesList)==null?void 0:p.toString()}, ${(C=this.contentNameScopesList)==null?void 0:C.toString()})`,g}withContentNameScopesList(l){return this.contentNameScopesList===l?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,l)}withEndRule(l){return this.endRule===l?this:new i(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,l,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(l){let g=this;for(;g&&g._enterPos===l._enterPos;){if(g.ruleId===l.ruleId)return!0;g=g.parent}return!1}toStateStackFrame(){var l,g,p;return{ruleId:y.ruleIdToNumber(this.ruleId),beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((g=this.nameScopesList)==null?void 0:g.getExtensionIfDefined(((l=this.parent)==null?void 0:l.nameScopesList)??null))??[],contentNameScopesList:((p=this.contentNameScopesList)==null?void 0:p.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(l,g){const p=m.fromExtension(l?.nameScopesList??null,g.nameScopesList);return new i(l,y.ruleIdFromNumber(g.ruleId),g.enterPos??-1,g.anchorPos??-1,g.beginRuleCapturedEOL,g.endRule,p,m.fromExtension(p,g.contentNameScopesList))}}t.StateStackImpl=i,i.NULL=new i(null,0,0,0,!1,null,null,null),t.BalancedBracketSelectors=class{constructor(d,l){this.allowAny=!1,this.balancedBracketScopes=d.flatMap(g=>g==="*"?(this.allowAny=!0,[]):f.createMatchers(g,P).map(p=>p.matcher)),this.unbalancedBracketScopes=l.flatMap(g=>f.createMatchers(g,P).map(p=>p.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(d){for(const l of this.unbalancedBracketScopes)if(l(d))return!1;for(const l of this.balancedBracketScopes)if(l(d))return!0;return this.allowAny}};class h{constructor(l,g,p,C){this.balancedBracketSelectors=C,this._emitBinaryTokens=l,this._tokenTypeOverrides=p,a.DebugFlags.InDebugMode?this._lineText=g:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(l,g){this.produceFromScopes(l.contentNameScopesList,g)}produceFromScopes(l,g){var p;if(this._lastTokenEndIndex>=g)return;if(this._emitBinaryTokens){let v=l?.tokenAttributes??0,T=!1;if((p=this.balancedBracketSelectors)!=null&&p.matchesAlways&&(T=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const k=l?.getScopeNames()??[];for(const $ of this._tokenTypeOverrides)$.matcher(k)&&(v=_.EncodedTokenAttributes.set(v,0,_.toOptionalTokenType($.type),null,-1,0,0));this.balancedBracketSelectors&&(T=this.balancedBracketSelectors.match(k))}if(T&&(v=_.EncodedTokenAttributes.set(v,0,8,T,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===v)return void(this._lastTokenEndIndex=g);if(a.DebugFlags.InDebugMode){const k=l?.getScopeNames()??[];console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,g).replace(/\n$/,"\\n")+"|");for(let $=0;$<k.length;$++)console.log("      * "+k[$])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(v),void(this._lastTokenEndIndex=g)}const C=l?.getScopeNames()??[];if(a.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,g).replace(/\n$/,"\\n")+"|");for(let v=0;v<C.length;v++)console.log("      * "+C[v])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:g,scopes:C}),this._lastTokenEndIndex=g}getResult(l,g){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===g-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(l,g),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(l,g){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===g-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(l,g),this._binaryTokens[this._binaryTokens.length-2]=0);const p=new Uint32Array(this._binaryTokens.length);for(let C=0,v=this._binaryTokens.length;C<v;C++)p[C]=this._binaryTokens[C];return p}}t.LineTokens=h},965:(u,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseInclude=t.TopLevelRepositoryReference=t.TopLevelReference=t.RelativeReference=t.SelfReference=t.BaseReference=t.ScopeDependencyProcessor=t.ExternalReferenceCollector=t.TopLevelRepositoryRuleReference=t.TopLevelRuleReference=void 0;const a=c(878);class _{constructor(i){this.scopeName=i}toKey(){return this.scopeName}}t.TopLevelRuleReference=_;class f{constructor(i,h){this.scopeName=i,this.ruleName=h}toKey(){return`${this.scopeName}#${this.ruleName}`}}t.TopLevelRepositoryRuleReference=f;class S{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(i){const h=i.toKey();this._seenReferenceKeys.has(h)||(this._seenReferenceKeys.add(h),this._references.push(i))}}function y(m,i,h,d){const l=h.lookup(m.scopeName);if(!l){if(m.scopeName===i)throw new Error(`No grammar provided for <${i}>`);return}const g=h.lookup(i);m instanceof _?I({baseGrammar:g,selfGrammar:l},d):b(m.ruleName,{baseGrammar:g,selfGrammar:l,repository:l.repository},d);const p=h.injections(m.scopeName);if(p)for(const C of p)d.add(new _(C))}function b(m,i,h){i.repository&&i.repository[m]&&E([i.repository[m]],i,h)}function I(m,i){m.selfGrammar.patterns&&Array.isArray(m.selfGrammar.patterns)&&E(m.selfGrammar.patterns,{...m,repository:m.selfGrammar.repository},i),m.selfGrammar.injections&&E(Object.values(m.selfGrammar.injections),{...m,repository:m.selfGrammar.repository},i)}function E(m,i,h){for(const d of m){if(h.visitedRule.has(d))continue;h.visitedRule.add(d);const l=d.repository?a.mergeObjects({},i.repository,d.repository):i.repository;Array.isArray(d.patterns)&&E(d.patterns,{...i,repository:l},h);const g=d.include;if(!g)continue;const p=A(g);switch(p.kind){case 0:I({...i,selfGrammar:i.baseGrammar},h);break;case 1:I(i,h);break;case 2:b(p.ruleName,{...i,repository:l},h);break;case 3:case 4:const C=p.scopeName===i.selfGrammar.scopeName?i.selfGrammar:p.scopeName===i.baseGrammar.scopeName?i.baseGrammar:void 0;if(C){const v={baseGrammar:i.baseGrammar,selfGrammar:C,repository:l};p.kind===4?b(p.ruleName,v,h):I(v,h)}else p.kind===4?h.add(new f(p.scopeName,p.ruleName)):h.add(new _(p.scopeName))}}}t.ExternalReferenceCollector=S,t.ScopeDependencyProcessor=class{constructor(m,i){this.repo=m,this.initialScopeName=i,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new _(this.initialScopeName)]}processQueue(){const m=this.Q;this.Q=[];const i=new S;for(const h of m)y(h,this.initialScopeName,this.repo,i);for(const h of i.references)if(h instanceof _){if(this.seenFullScopeRequests.has(h.scopeName))continue;this.seenFullScopeRequests.add(h.scopeName),this.Q.push(h)}else{if(this.seenFullScopeRequests.has(h.scopeName)||this.seenPartialScopeRequests.has(h.toKey()))continue;this.seenPartialScopeRequests.add(h.toKey()),this.Q.push(h)}}};class x{constructor(){this.kind=0}}t.BaseReference=x;class R{constructor(){this.kind=1}}t.SelfReference=R;class P{constructor(i){this.ruleName=i,this.kind=2}}t.RelativeReference=P;class O{constructor(i){this.scopeName=i,this.kind=3}}t.TopLevelReference=O;class w{constructor(i,h){this.scopeName=i,this.ruleName=h,this.kind=4}}function A(m){if(m==="$base")return new x;if(m==="$self")return new R;const i=m.indexOf("#");if(i===-1)return new O(m);if(i===0)return new P(m.substring(1));{const h=m.substring(0,i),d=m.substring(i+1);return new w(h,d)}}t.TopLevelRepositoryReference=w,t.parseInclude=A},391:function(u,t,c){var a=this&&this.__createBinding||(Object.create?function(f,S,y,b){b===void 0&&(b=y),Object.defineProperty(f,b,{enumerable:!0,get:function(){return S[y]}})}:function(f,S,y,b){b===void 0&&(b=y),f[b]=S[y]}),_=this&&this.__exportStar||function(f,S){for(var y in f)y==="default"||Object.prototype.hasOwnProperty.call(S,y)||a(S,f,y)};Object.defineProperty(t,"__esModule",{value:!0}),_(c(947),t)},47:(u,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStackElement=t._tokenizeString=void 0;const a=c(350),_=c(44),f=c(792),S=c(878);class y{constructor(w,A){this.stack=w,this.stoppedEarly=A}}function b(O,w,A,m,i,h,d,l){const g=w.content.length;let p=!1,C=-1;if(d){const k=function($,U,z,W,Q,ee){let Z=Q.beginRuleCapturedEOL?0:-1;const X=[];for(let Y=Q;Y;Y=Y.pop()){const V=Y.getRule($);V instanceof f.BeginWhileRule&&X.push({rule:V,stack:Y})}for(let Y=X.pop();Y;Y=X.pop()){const{ruleScanner:V,findOptions:oe}=E(Y.rule,$,Y.stack.endRule,z,W===Z),D=V.findNextMatchSync(U,W,oe);if(a.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(V.toString())),!D){a.DebugFlags.InDebugMode&&console.log("  popping "+Y.rule.debugName+" - "+Y.rule.debugWhileRegExp),Q=Y.stack.pop();break}if(D.ruleId!==f.whileRuleId){Q=Y.stack.pop();break}D.captureIndices&&D.captureIndices.length&&(ee.produce(Y.stack,D.captureIndices[0].start),R($,U,z,Y.stack,ee,Y.rule.whileCaptures,D.captureIndices),ee.produce(Y.stack,D.captureIndices[0].end),Z=D.captureIndices[0].end,D.captureIndices[0].end>W&&(W=D.captureIndices[0].end,z=!1))}return{stack:Q,linePos:W,anchorPosition:Z,isFirstLine:z}}(O,w,A,m,i,h);i=k.stack,m=k.linePos,A=k.isFirstLine,C=k.anchorPosition}const v=Date.now();for(;!p;){if(l!==0&&Date.now()-v>l)return new y(i,!0);T()}return new y(i,!1);function T(){a.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${m}: |${w.content.substr(m).replace(/\n$/,"\\n")}|`));const k=function(W,Q,ee,Z,X,Y){const V=function(he,le,ve,ae,pe,Pe){const ye=pe.getRule(he),{ruleScanner:ge,findOptions:Se}=I(ye,he,pe.endRule,ve,ae===Pe);let me=0;a.DebugFlags.InDebugMode&&(me=S.performanceNow());const fe=ge.findNextMatchSync(le,ae,Se);if(a.DebugFlags.InDebugMode){const be=S.performanceNow()-me;be>5&&console.warn(`Rule ${ye.debugName} (${ye.id}) matching took ${be} against '${le}'`),console.log(`  scanning for (linePos: ${ae}, anchorPosition: ${Pe})`),console.log(ge.toString()),fe&&console.log(`matched rule id: ${fe.ruleId} from ${fe.captureIndices[0].start} to ${fe.captureIndices[0].end}`)}return fe?{captureIndices:fe.captureIndices,matchedRuleId:fe.ruleId}:null}(W,Q,ee,Z,X,Y),oe=W.getInjections();if(oe.length===0)return V;const D=function(he,le,ve,ae,pe,Pe,ye){let ge,Se=Number.MAX_VALUE,me=null,fe=0;const be=Pe.contentNameScopesList.getScopeNames();for(let Ae=0,Ee=he.length;Ae<Ee;Ae++){const we=he[Ae];if(!we.matcher(be))continue;const Oe=le.getRule(we.ruleId),{ruleScanner:Ne,findOptions:Re}=I(Oe,le,null,ae,pe===ye),Ce=Ne.findNextMatchSync(ve,pe,Re);if(!Ce)continue;a.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${we.debugSelector}`),console.log(Ne.toString()));const Te=Ce.captureIndices[0].start;if(!(Te>=Se)&&(Se=Te,me=Ce.captureIndices,ge=Ce.ruleId,fe=we.priority,Se===pe))break}return me?{priorityMatch:fe===-1,captureIndices:me,matchedRuleId:ge}:null}(oe,W,Q,ee,Z,X,Y);if(!D)return V;if(!V)return D;const te=V.captureIndices[0].start,J=D.captureIndices[0].start;return J<te||D.priorityMatch&&J===te?D:V}(O,w,A,m,i,C);if(!k)return a.DebugFlags.InDebugMode&&console.log("  no more matches."),h.produce(i,g),void(p=!0);const $=k.captureIndices,U=k.matchedRuleId,z=!!($&&$.length>0)&&$[0].end>m;if(U===f.endRuleId){const W=i.getRule(O);a.DebugFlags.InDebugMode&&console.log("  popping "+W.debugName+" - "+W.debugEndRegExp),h.produce(i,$[0].start),i=i.withContentNameScopesList(i.nameScopesList),R(O,w,A,i,h,W.endCaptures,$),h.produce(i,$[0].end);const Q=i;if(i=i.parent,C=Q.getAnchorPos(),!z&&Q.getEnterPos()===m)return a.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),i=Q,h.produce(i,g),void(p=!0)}else{const W=O.getRule(U);h.produce(i,$[0].start);const Q=i,ee=W.getName(w.content,$),Z=i.contentNameScopesList.pushAttributed(ee,O);if(i=i.push(U,m,C,$[0].end===g,null,Z,Z),W instanceof f.BeginEndRule){const X=W;a.DebugFlags.InDebugMode&&console.log("  pushing "+X.debugName+" - "+X.debugBeginRegExp),R(O,w,A,i,h,X.beginCaptures,$),h.produce(i,$[0].end),C=$[0].end;const Y=X.getContentName(w.content,$),V=Z.pushAttributed(Y,O);if(i=i.withContentNameScopesList(V),X.endHasBackReferences&&(i=i.withEndRule(X.getEndWithResolvedBackReferences(w.content,$))),!z&&Q.hasSameRuleAs(i))return a.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),i=i.pop(),h.produce(i,g),void(p=!0)}else if(W instanceof f.BeginWhileRule){const X=W;a.DebugFlags.InDebugMode&&console.log("  pushing "+X.debugName),R(O,w,A,i,h,X.beginCaptures,$),h.produce(i,$[0].end),C=$[0].end;const Y=X.getContentName(w.content,$),V=Z.pushAttributed(Y,O);if(i=i.withContentNameScopesList(V),X.whileHasBackReferences&&(i=i.withEndRule(X.getWhileWithResolvedBackReferences(w.content,$))),!z&&Q.hasSameRuleAs(i))return a.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),i=i.pop(),h.produce(i,g),void(p=!0)}else{const X=W;if(a.DebugFlags.InDebugMode&&console.log("  matched "+X.debugName+" - "+X.debugMatchRegExp),R(O,w,A,i,h,X.captures,$),h.produce(i,$[0].end),i=i.pop(),!z)return a.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),i=i.safePop(),h.produce(i,g),void(p=!0)}}$[0].end>m&&(m=$[0].end,A=!1)}}function I(O,w,A,m,i){return a.UseOnigurumaFindOptions?{ruleScanner:O.compile(w,A),findOptions:x(m,i)}:{ruleScanner:O.compileAG(w,A,m,i),findOptions:0}}function E(O,w,A,m,i){return a.UseOnigurumaFindOptions?{ruleScanner:O.compileWhile(w,A),findOptions:x(m,i)}:{ruleScanner:O.compileWhileAG(w,A,m,i),findOptions:0}}function x(O,w){let A=0;return O||(A|=1),w||(A|=4),A}function R(O,w,A,m,i,h,d){if(h.length===0)return;const l=w.content,g=Math.min(h.length,d.length),p=[],C=d[0].end;for(let v=0;v<g;v++){const T=h[v];if(T===null)continue;const k=d[v];if(k.length===0)continue;if(k.start>C)break;for(;p.length>0&&p[p.length-1].endPos<=k.start;)i.produceFromScopes(p[p.length-1].scopes,p[p.length-1].endPos),p.pop();if(p.length>0?i.produceFromScopes(p[p.length-1].scopes,k.start):i.produce(m,k.start),T.retokenizeCapturedWithRuleId){const U=T.getName(l,d),z=m.contentNameScopesList.pushAttributed(U,O),W=T.getContentName(l,d),Q=z.pushAttributed(W,O),ee=m.push(T.retokenizeCapturedWithRuleId,k.start,-1,!1,null,z,Q),Z=O.createOnigString(l.substring(0,k.end));b(O,Z,A&&k.start===0,k.start,ee,i,!1,0),_.disposeOnigString(Z);continue}const $=T.getName(l,d);if($!==null){const U=(p.length>0?p[p.length-1].scopes:m.contentNameScopesList).pushAttributed($,O);p.push(new P(U,k.end))}}for(;p.length>0;)i.produceFromScopes(p[p.length-1].scopes,p[p.length-1].endPos),p.pop()}t._tokenizeString=b;class P{constructor(w,A){this.scopes=w,this.endPos=A}}t.LocalStackElement=P},974:(u,t)=>{function c(S,y){throw new Error("Near offset "+S.pos+": "+y+" ~~~"+S.source.substr(S.pos,50)+"~~~")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseJSON=void 0,t.parseJSON=function(S,y,b){let I=new a(S),E=new _,x=0,R=null,P=[],O=[];function w(){P.push(x),O.push(R)}function A(){x=P.pop(),R=O.pop()}function m(i){c(I,i)}for(;f(I,E);){if(x===0){if(R!==null&&m("too many constructs in root"),E.type===3){R={},b&&(R.$vscodeTextmateLocation=E.toLocation(y)),w(),x=1;continue}if(E.type===2){R=[],w(),x=4;continue}m("unexpected token in root")}if(x===2){if(E.type===5){A();continue}if(E.type===7){x=3;continue}m("expected , or }")}if(x===1||x===3){if(x===1&&E.type===5){A();continue}if(E.type===1){let i=E.value;if(f(I,E)&&E.type===6||m("expected colon"),f(I,E)||m("expected value"),x=2,E.type===1){R[i]=E.value;continue}if(E.type===8){R[i]=null;continue}if(E.type===9){R[i]=!0;continue}if(E.type===10){R[i]=!1;continue}if(E.type===11){R[i]=parseFloat(E.value);continue}if(E.type===2){let h=[];R[i]=h,w(),x=4,R=h;continue}if(E.type===3){let h={};b&&(h.$vscodeTextmateLocation=E.toLocation(y)),R[i]=h,w(),x=1,R=h;continue}}m("unexpected token in dict")}if(x===5){if(E.type===4){A();continue}if(E.type===7){x=6;continue}m("expected , or ]")}if(x===4||x===6){if(x===4&&E.type===4){A();continue}if(x=5,E.type===1){R.push(E.value);continue}if(E.type===8){R.push(null);continue}if(E.type===9){R.push(!0);continue}if(E.type===10){R.push(!1);continue}if(E.type===11){R.push(parseFloat(E.value));continue}if(E.type===2){let i=[];R.push(i),w(),x=4,R=i;continue}if(E.type===3){let i={};b&&(i.$vscodeTextmateLocation=E.toLocation(y)),R.push(i),w(),x=1,R=i;continue}m("unexpected token in array")}m("unknown state")}return O.length!==0&&m("unclosed constructs"),R};class a{constructor(y){this.source=y,this.pos=0,this.len=y.length,this.line=1,this.char=0}}class _{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(y){return{filename:y,line:this.line,char:this.char}}}function f(S,y){y.value=null,y.type=0,y.offset=-1,y.len=-1,y.line=-1,y.char=-1;let b,I=S.source,E=S.pos,x=S.len,R=S.line,P=S.char;for(;;){if(E>=x)return!1;if(b=I.charCodeAt(E),b!==32&&b!==9&&b!==13){if(b!==10)break;E++,R++,P=0}else E++,P++}if(y.offset=E,y.line=R,y.char=P,b===34){for(y.type=1,E++,P++;;){if(E>=x)return!1;if(b=I.charCodeAt(E),E++,P++,b!==92){if(b===34)break}else E++,P++}y.value=I.substring(y.offset+1,E-1).replace(/\\u([0-9A-Fa-f]{4})/g,(O,w)=>String.fromCodePoint(parseInt(w,16))).replace(/\\(.)/g,(O,w)=>{switch(w){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:c(S,"invalid escape sequence")}throw new Error("unreachable")})}else if(b===91)y.type=2,E++,P++;else if(b===123)y.type=3,E++,P++;else if(b===93)y.type=4,E++,P++;else if(b===125)y.type=5,E++,P++;else if(b===58)y.type=6,E++,P++;else if(b===44)y.type=7,E++,P++;else if(b===110){if(y.type=8,E++,P++,b=I.charCodeAt(E),b!==117||(E++,P++,b=I.charCodeAt(E),b!==108)||(E++,P++,b=I.charCodeAt(E),b!==108))return!1;E++,P++}else if(b===116){if(y.type=9,E++,P++,b=I.charCodeAt(E),b!==114||(E++,P++,b=I.charCodeAt(E),b!==117)||(E++,P++,b=I.charCodeAt(E),b!==101))return!1;E++,P++}else if(b===102){if(y.type=10,E++,P++,b=I.charCodeAt(E),b!==97||(E++,P++,b=I.charCodeAt(E),b!==108)||(E++,P++,b=I.charCodeAt(E),b!==115)||(E++,P++,b=I.charCodeAt(E),b!==101))return!1;E++,P++}else for(y.type=11;;){if(E>=x)return!1;if(b=I.charCodeAt(E),!(b===46||b>=48&&b<=57||b===101||b===69||b===45||b===43))break;E++,P++}return y.len=E-y.offset,y.value===null&&(y.value=I.substr(y.offset,y.len)),S.pos=E,S.line=R,S.char=P,!0}},787:function(u,t,c){var a=this&&this.__createBinding||(Object.create?function(x,R,P,O){O===void 0&&(O=P),Object.defineProperty(x,O,{enumerable:!0,get:function(){return R[P]}})}:function(x,R,P,O){O===void 0&&(O=P),x[O]=R[P]}),_=this&&this.__exportStar||function(x,R){for(var P in x)P==="default"||Object.prototype.hasOwnProperty.call(R,P)||a(R,x,P)};Object.defineProperty(t,"__esModule",{value:!0}),t.applyStateStackDiff=t.diffStateStacksRefEq=t.parseRawGrammar=t.INITIAL=t.Registry=void 0;const f=c(391),S=c(50),y=c(652),b=c(583),I=c(965),E=c(442);Object.defineProperty(t,"applyStateStackDiff",{enumerable:!0,get:function(){return E.applyStateStackDiff}}),Object.defineProperty(t,"diffStateStacksRefEq",{enumerable:!0,get:function(){return E.diffStateStacksRefEq}}),_(c(44),t),t.Registry=class{constructor(x){this._options=x,this._syncRegistry=new y.SyncRegistry(b.Theme.createFromRawTheme(x.theme,x.colorMap),x.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(x,R){this._syncRegistry.setTheme(b.Theme.createFromRawTheme(x,R))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(x,R,P){return this.loadGrammarWithConfiguration(x,R,{embeddedLanguages:P})}loadGrammarWithConfiguration(x,R,P){return this._loadGrammar(x,R,P.embeddedLanguages,P.tokenTypes,new f.BalancedBracketSelectors(P.balancedBracketSelectors||[],P.unbalancedBracketSelectors||[]))}loadGrammar(x){return this._loadGrammar(x,0,null,null,null)}async _loadGrammar(x,R,P,O,w){const A=new I.ScopeDependencyProcessor(this._syncRegistry,x);for(;A.Q.length>0;)await Promise.all(A.Q.map(m=>this._loadSingleGrammar(m.scopeName))),A.processQueue();return this._grammarForScopeName(x,R,P,O,w)}async _loadSingleGrammar(x){return this._ensureGrammarCache.has(x)||this._ensureGrammarCache.set(x,this._doLoadSingleGrammar(x)),this._ensureGrammarCache.get(x)}async _doLoadSingleGrammar(x){const R=await this._options.loadGrammar(x);if(R){const P=typeof this._options.getInjections=="function"?this._options.getInjections(x):void 0;this._syncRegistry.addGrammar(R,P)}}async addGrammar(x,R=[],P=0,O=null){return this._syncRegistry.addGrammar(x,R),await this._grammarForScopeName(x.scopeName,P,O)}_grammarForScopeName(x,R=0,P=null,O=null,w=null){return this._syncRegistry.grammarForScopeName(x,R,P,O,w)}},t.INITIAL=f.StateStackImpl.NULL,t.parseRawGrammar=S.parseRawGrammar},736:(u,t)=>{function c(a){return!!a&&!!a.match(/[\w\.:]+/)}Object.defineProperty(t,"__esModule",{value:!0}),t.createMatchers=void 0,t.createMatchers=function(a,_){const f=[],S=function(E){let x=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,R=x.exec(E);return{next:()=>{if(!R)return null;const P=R[0];return R=x.exec(E),P}}}(a);let y=S.next();for(;y!==null;){let E=0;if(y.length===2&&y.charAt(1)===":"){switch(y.charAt(0)){case"R":E=1;break;case"L":E=-1;break;default:console.log(`Unknown priority ${y} in scope selector`)}y=S.next()}let x=I();if(f.push({matcher:x,priority:E}),y!==",")break;y=S.next()}return f;function b(){if(y==="-"){y=S.next();const E=b();return x=>!!E&&!E(x)}if(y==="("){y=S.next();const E=function(){const x=[];let R=I();for(;R&&(x.push(R),y==="|"||y===",");){do y=S.next();while(y==="|"||y===",");R=I()}return P=>x.some(O=>O(P))}();return y===")"&&(y=S.next()),E}if(c(y)){const E=[];do E.push(y),y=S.next();while(c(y));return x=>_(E,x)}return null}function I(){const E=[];let x=b();for(;x;)E.push(x),x=b();return R=>E.every(P=>P(R))}}},44:(u,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disposeOnigString=void 0,t.disposeOnigString=function(c){typeof c.dispose=="function"&&c.dispose()}},50:(u,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseRawGrammar=void 0;const a=c(69),_=c(350),f=c(974);t.parseRawGrammar=function(S,y=null){return y!==null&&/\.json$/.test(y)?(b=S,I=y,_.DebugFlags.InDebugMode?f.parseJSON(b,I,!0):JSON.parse(b)):function(E,x){return _.DebugFlags.InDebugMode?a.parseWithLocation(E,x,"$vscodeTextmateLocation"):a.parsePLIST(E)}(S,y);var b,I}},69:(u,t)=>{function c(a,_,f){const S=a.length;let y=0,b=1,I=0;function E(D){if(f===null)y+=D;else for(;D>0;)a.charCodeAt(y)===10?(y++,b++,I=0):(y++,I++),D--}function x(D){f===null?y=D:E(D-y)}function R(){for(;y<S;){let D=a.charCodeAt(y);if(D!==32&&D!==9&&D!==13&&D!==10)break;E(1)}}function P(D){return a.substr(y,D.length)===D&&(E(D.length),!0)}function O(D){let te=a.indexOf(D,y);x(te!==-1?te+D.length:S)}function w(D){let te=a.indexOf(D,y);if(te!==-1){let J=a.substring(y,te);return x(te+D.length),J}{let J=a.substr(y);return x(S),J}}S>0&&a.charCodeAt(0)===65279&&(y=1);let A=0,m=null,i=[],h=[],d=null;function l(D,te){i.push(A),h.push(m),A=D,m=te}function g(){if(i.length===0)return p("illegal state stack");A=i.pop(),m=h.pop()}function p(D){throw new Error("Near offset "+y+": "+D+" ~~~"+a.substr(y,50)+"~~~")}const C=function(){if(d===null)return p("missing <key>");let D={};f!==null&&(D[f]={filename:_,line:b,char:I}),m[d]=D,d=null,l(1,D)},v=function(){if(d===null)return p("missing <key>");let D=[];m[d]=D,d=null,l(2,D)},T=function(){let D={};f!==null&&(D[f]={filename:_,line:b,char:I}),m.push(D),l(1,D)},k=function(){let D=[];m.push(D),l(2,D)};function $(){if(A!==1)return p("unexpected </dict>");g()}function U(){return A===1||A!==2?p("unexpected </array>"):void g()}function z(D){if(A===1){if(d===null)return p("missing <key>");m[d]=D,d=null}else A===2?m.push(D):m=D}function W(D){if(isNaN(D))return p("cannot parse float");if(A===1){if(d===null)return p("missing <key>");m[d]=D,d=null}else A===2?m.push(D):m=D}function Q(D){if(isNaN(D))return p("cannot parse integer");if(A===1){if(d===null)return p("missing <key>");m[d]=D,d=null}else A===2?m.push(D):m=D}function ee(D){if(A===1){if(d===null)return p("missing <key>");m[d]=D,d=null}else A===2?m.push(D):m=D}function Z(D){if(A===1){if(d===null)return p("missing <key>");m[d]=D,d=null}else A===2?m.push(D):m=D}function X(D){if(A===1){if(d===null)return p("missing <key>");m[d]=D,d=null}else A===2?m.push(D):m=D}function Y(){let D=w(">"),te=!1;return D.charCodeAt(D.length-1)===47&&(te=!0,D=D.substring(0,D.length-1)),{name:D.trim(),isClosed:te}}function V(D){if(D.isClosed)return"";let te=w("</");return O(">"),te.replace(/&#([0-9]+);/g,function(J,he){return String.fromCodePoint(parseInt(he,10))}).replace(/&#x([0-9a-f]+);/g,function(J,he){return String.fromCodePoint(parseInt(he,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(J){switch(J){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return J})}for(;y<S&&(R(),!(y>=S));){const D=a.charCodeAt(y);if(E(1),D!==60)return p("expected <");if(y>=S)return p("unexpected end of input");const te=a.charCodeAt(y);if(te===63){E(1),O("?>");continue}if(te===33){if(E(1),P("--")){O("-->");continue}O(">");continue}if(te===47){if(E(1),R(),P("plist")){O(">");continue}if(P("dict")){O(">"),$();continue}if(P("array")){O(">"),U();continue}return p("unexpected closed tag")}let J=Y();switch(J.name){case"dict":A===1?C():A===2?T():(m={},f!==null&&(m[f]={filename:_,line:b,char:I}),l(1,m)),J.isClosed&&$();continue;case"array":A===1?v():A===2?k():(m=[],l(2,m)),J.isClosed&&U();continue;case"key":oe=V(J),A!==1?p("unexpected <key>"):d!==null?p("too many <key>"):d=oe;continue;case"string":z(V(J));continue;case"real":W(parseFloat(V(J)));continue;case"integer":Q(parseInt(V(J),10));continue;case"date":ee(new Date(V(J)));continue;case"data":Z(V(J));continue;case"true":V(J),X(!0);continue;case"false":V(J),X(!1);continue}if(!/^plist/.test(J.name))return p("unexpected opened tag "+J.name)}var oe;return m}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePLIST=t.parseWithLocation=void 0,t.parseWithLocation=function(a,_,f){return c(a,_,f)},t.parsePLIST=function(a){return c(a,null,null)}},652:(u,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncRegistry=void 0;const a=c(391);t.SyncRegistry=class{constructor(_,f){this._onigLibPromise=f,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=_}dispose(){for(const _ of this._grammars.values())_.dispose()}setTheme(_){this._theme=_}getColorMap(){return this._theme.getColorMap()}addGrammar(_,f){this._rawGrammars.set(_.scopeName,_),f&&this._injectionGrammars.set(_.scopeName,f)}lookup(_){return this._rawGrammars.get(_)}injections(_){return this._injectionGrammars.get(_)}getDefaults(){return this._theme.getDefaults()}themeMatch(_){return this._theme.match(_)}async grammarForScopeName(_,f,S,y,b){if(!this._grammars.has(_)){let I=this._rawGrammars.get(_);if(!I)return null;this._grammars.set(_,a.createGrammar(_,I,f,S,y,b,this,await this._onigLibPromise))}return this._grammars.get(_)}}},792:(u,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompiledRule=t.RegExpSourceList=t.RegExpSource=t.RuleFactory=t.BeginWhileRule=t.BeginEndRule=t.IncludeOnlyRule=t.MatchRule=t.CaptureRule=t.Rule=t.ruleIdToNumber=t.ruleIdFromNumber=t.whileRuleId=t.endRuleId=void 0;const a=c(878),_=c(965),f=/\\(\d+)/,S=/\\(\d+)/g;t.endRuleId=-1,t.whileRuleId=-2,t.ruleIdFromNumber=function(m){return m},t.ruleIdToNumber=function(m){return m};class y{constructor(i,h,d,l){this.$location=i,this.id=h,this._name=d||null,this._nameIsCapturing=a.RegexSource.hasCaptures(this._name),this._contentName=l||null,this._contentNameIsCapturing=a.RegexSource.hasCaptures(this._contentName)}get debugName(){const i=this.$location?`${a.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${i}`}getName(i,h){return this._nameIsCapturing&&this._name!==null&&i!==null&&h!==null?a.RegexSource.replaceCaptures(this._name,i,h):this._name}getContentName(i,h){return this._contentNameIsCapturing&&this._contentName!==null?a.RegexSource.replaceCaptures(this._contentName,i,h):this._contentName}}t.Rule=y;class b extends y{constructor(i,h,d,l,g){super(i,h,d,l),this.retokenizeCapturedWithRuleId=g}dispose(){}collectPatterns(i,h){throw new Error("Not supported!")}compile(i,h){throw new Error("Not supported!")}compileAG(i,h,d,l){throw new Error("Not supported!")}}t.CaptureRule=b;class I extends y{constructor(i,h,d,l,g){super(i,h,d,null),this._match=new O(l,this.id),this.captures=g,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(i,h){h.push(this._match)}compile(i,h){return this._getCachedCompiledPatterns(i).compile(i)}compileAG(i,h,d,l){return this._getCachedCompiledPatterns(i).compileAG(i,d,l)}_getCachedCompiledPatterns(i){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new w,this.collectPatterns(i,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}t.MatchRule=I;class E extends y{constructor(i,h,d,l,g){super(i,h,d,l),this.patterns=g.patterns,this.hasMissingPatterns=g.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(i,h){for(const d of this.patterns)i.getRule(d).collectPatterns(i,h)}compile(i,h){return this._getCachedCompiledPatterns(i).compile(i)}compileAG(i,h,d,l){return this._getCachedCompiledPatterns(i).compileAG(i,d,l)}_getCachedCompiledPatterns(i){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new w,this.collectPatterns(i,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}t.IncludeOnlyRule=E;class x extends y{constructor(i,h,d,l,g,p,C,v,T,k){super(i,h,d,l),this._begin=new O(g,this.id),this.beginCaptures=p,this._end=new O(C||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=v,this.applyEndPatternLast=T||!1,this.patterns=k.patterns,this.hasMissingPatterns=k.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(i,h){return this._end.resolveBackReferences(i,h)}collectPatterns(i,h){h.push(this._begin)}compile(i,h){return this._getCachedCompiledPatterns(i,h).compile(i)}compileAG(i,h,d,l){return this._getCachedCompiledPatterns(i,h).compileAG(i,d,l)}_getCachedCompiledPatterns(i,h){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new w;for(const d of this.patterns)i.getRule(d).collectPatterns(i,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,h):this._cachedCompiledPatterns.setSource(0,h)),this._cachedCompiledPatterns}}t.BeginEndRule=x;class R extends y{constructor(i,h,d,l,g,p,C,v,T){super(i,h,d,l),this._begin=new O(g,this.id),this.beginCaptures=p,this.whileCaptures=v,this._while=new O(C,t.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=T.patterns,this.hasMissingPatterns=T.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(i,h){return this._while.resolveBackReferences(i,h)}collectPatterns(i,h){h.push(this._begin)}compile(i,h){return this._getCachedCompiledPatterns(i).compile(i)}compileAG(i,h,d,l){return this._getCachedCompiledPatterns(i).compileAG(i,d,l)}_getCachedCompiledPatterns(i){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new w;for(const h of this.patterns)i.getRule(h).collectPatterns(i,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(i,h){return this._getCachedCompiledWhilePatterns(i,h).compile(i)}compileWhileAG(i,h,d,l){return this._getCachedCompiledWhilePatterns(i,h).compileAG(i,d,l)}_getCachedCompiledWhilePatterns(i,h){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new w,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,h||""),this._cachedCompiledWhilePatterns}}t.BeginWhileRule=R;class P{static createCaptureRule(i,h,d,l,g){return i.registerRule(p=>new b(h,p,d,l,g))}static getCompiledRuleId(i,h,d){return i.id||h.registerRule(l=>{if(i.id=l,i.match)return new I(i.$vscodeTextmateLocation,i.id,i.name,i.match,P._compileCaptures(i.captures,h,d));if(i.begin===void 0){i.repository&&(d=a.mergeObjects({},d,i.repository));let g=i.patterns;return g===void 0&&i.include&&(g=[{include:i.include}]),new E(i.$vscodeTextmateLocation,i.id,i.name,i.contentName,P._compilePatterns(g,h,d))}return i.while?new R(i.$vscodeTextmateLocation,i.id,i.name,i.contentName,i.begin,P._compileCaptures(i.beginCaptures||i.captures,h,d),i.while,P._compileCaptures(i.whileCaptures||i.captures,h,d),P._compilePatterns(i.patterns,h,d)):new x(i.$vscodeTextmateLocation,i.id,i.name,i.contentName,i.begin,P._compileCaptures(i.beginCaptures||i.captures,h,d),i.end,P._compileCaptures(i.endCaptures||i.captures,h,d),i.applyEndPatternLast,P._compilePatterns(i.patterns,h,d))}),i.id}static _compileCaptures(i,h,d){let l=[];if(i){let g=0;for(const p in i){if(p==="$vscodeTextmateLocation")continue;const C=parseInt(p,10);C>g&&(g=C)}for(let p=0;p<=g;p++)l[p]=null;for(const p in i){if(p==="$vscodeTextmateLocation")continue;const C=parseInt(p,10);let v=0;i[p].patterns&&(v=P.getCompiledRuleId(i[p],h,d)),l[C]=P.createCaptureRule(h,i[p].$vscodeTextmateLocation,i[p].name,i[p].contentName,v)}}return l}static _compilePatterns(i,h,d){let l=[];if(i)for(let g=0,p=i.length;g<p;g++){const C=i[g];let v=-1;if(C.include){const T=_.parseInclude(C.include);switch(T.kind){case 0:case 1:v=P.getCompiledRuleId(d[C.include],h,d);break;case 2:let k=d[T.ruleName];k&&(v=P.getCompiledRuleId(k,h,d));break;case 3:case 4:const $=T.scopeName,U=T.kind===4?T.ruleName:null,z=h.getExternalGrammar($,d);if(z)if(U){let W=z.repository[U];W&&(v=P.getCompiledRuleId(W,h,z.repository))}else v=P.getCompiledRuleId(z.repository.$self,h,z.repository)}}else v=P.getCompiledRuleId(C,h,d);if(v!==-1){const T=h.getRule(v);let k=!1;if((T instanceof E||T instanceof x||T instanceof R)&&T.hasMissingPatterns&&T.patterns.length===0&&(k=!0),k)continue;l.push(v)}}return{patterns:l,hasMissingPatterns:(i?i.length:0)!==l.length}}}t.RuleFactory=P;class O{constructor(i,h){if(i){const d=i.length;let l=0,g=[],p=!1;for(let C=0;C<d;C++)if(i.charAt(C)==="\\"&&C+1<d){const v=i.charAt(C+1);v==="z"?(g.push(i.substring(l,C)),g.push("$(?!\\n)(?<!\\n)"),l=C+2):v!=="A"&&v!=="G"||(p=!0),C++}this.hasAnchor=p,l===0?this.source=i:(g.push(i.substring(l,d)),this.source=g.join(""))}else this.hasAnchor=!1,this.source=i;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=h,this.hasBackReferences=f.test(this.source)}clone(){return new O(this.source,this.ruleId)}setSource(i){this.source!==i&&(this.source=i,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(i,h){let d=h.map(l=>i.substring(l.start,l.end));return S.lastIndex=0,this.source.replace(S,(l,g)=>a.escapeRegExpCharacters(d[parseInt(g,10)]||""))}_buildAnchorCache(){let i,h,d,l,g=[],p=[],C=[],v=[];for(i=0,h=this.source.length;i<h;i++)d=this.source.charAt(i),g[i]=d,p[i]=d,C[i]=d,v[i]=d,d==="\\"&&i+1<h&&(l=this.source.charAt(i+1),l==="A"?(g[i+1]="",p[i+1]="",C[i+1]="A",v[i+1]="A"):l==="G"?(g[i+1]="",p[i+1]="G",C[i+1]="",v[i+1]="G"):(g[i+1]=l,p[i+1]=l,C[i+1]=l,v[i+1]=l),i++);return{A0_G0:g.join(""),A0_G1:p.join(""),A1_G0:C.join(""),A1_G1:v.join("")}}resolveAnchors(i,h){return this.hasAnchor&&this._anchorCache?i?h?this._anchorCache.A1_G1:this._anchorCache.A1_G0:h?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}t.RegExpSource=O;class w{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(i){this._items.push(i),this._hasAnchors=this._hasAnchors||i.hasAnchor}unshift(i){this._items.unshift(i),this._hasAnchors=this._hasAnchors||i.hasAnchor}length(){return this._items.length}setSource(i,h){this._items[i].source!==h&&(this._disposeCaches(),this._items[i].setSource(h))}compile(i){if(!this._cached){let h=this._items.map(d=>d.source);this._cached=new A(i,h,this._items.map(d=>d.ruleId))}return this._cached}compileAG(i,h,d){return this._hasAnchors?h?d?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(i,h,d)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(i,h,d)),this._anchorCache.A1_G0):d?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(i,h,d)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(i,h,d)),this._anchorCache.A0_G0):this.compile(i)}_resolveAnchors(i,h,d){let l=this._items.map(g=>g.resolveAnchors(h,d));return new A(i,l,this._items.map(g=>g.ruleId))}}t.RegExpSourceList=w;class A{constructor(i,h,d){this.regExps=h,this.rules=d,this.scanner=i.createOnigScanner(h)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const i=[];for(let h=0,d=this.rules.length;h<d;h++)i.push("   - "+this.rules[h]+": "+this.regExps[h]);return i.join(`
`)}findNextMatchSync(i,h,d){const l=this.scanner.findNextMatchSync(i,h,d);return l?{ruleId:this.rules[l.index],captureIndices:l.captureIndices}:null}}t.CompiledRule=A},583:(u,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeTrieElement=t.ThemeTrieElementRule=t.ColorMap=t.fontStyleToString=t.ParsedThemeRule=t.parseTheme=t.StyleAttributes=t.ScopeStack=t.Theme=void 0;const a=c(878);class _{constructor(w,A,m){this._colorMap=w,this._defaults=A,this._root=m,this._cachedMatchRoot=new a.CachedFn(i=>this._root.match(i))}static createFromRawTheme(w,A){return this.createFromParsedTheme(b(w),A)}static createFromParsedTheme(w,A){return function(m,i){m.sort((v,T)=>{let k=a.strcmp(v.scope,T.scope);return k!==0?k:(k=a.strArrCmp(v.parentScopes,T.parentScopes),k!==0?k:v.index-T.index)});let h=0,d="#000000",l="#ffffff";for(;m.length>=1&&m[0].scope==="";){let v=m.shift();v.fontStyle!==-1&&(h=v.fontStyle),v.foreground!==null&&(d=v.foreground),v.background!==null&&(l=v.background)}let g=new E(i),p=new y(h,g.getId(d),g.getId(l)),C=new P(new R(0,null,-1,0,0),[]);for(let v=0,T=m.length;v<T;v++){let k=m[v];C.insert(0,k.scope,k.parentScopes,k.fontStyle,g.getId(k.foreground),g.getId(k.background))}return new _(g,p,C)}(w,A)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(w){if(w===null)return this._defaults;const A=w.scopeName,m=this._cachedMatchRoot.get(A).find(i=>function(h,d){if(d.length===0)return!0;for(let l=0;l<d.length;l++){let g=d[l],p=!1;if(g===">"){if(l===d.length-1)return!1;g=d[++l],p=!0}for(;h&&!S(h.scopeName,g);){if(p)return!1;h=h.parent}if(!h)return!1;h=h.parent}return!0}(w.parent,i.parentScopes));return m?new y(m.fontStyle,m.foreground,m.background):null}}t.Theme=_;class f{constructor(w,A){this.parent=w,this.scopeName=A}static push(w,A){for(const m of A)w=new f(w,m);return w}static from(...w){let A=null;for(let m=0;m<w.length;m++)A=new f(A,w[m]);return A}push(w){return new f(this,w)}getSegments(){let w=this;const A=[];for(;w;)A.push(w.scopeName),w=w.parent;return A.reverse(),A}toString(){return this.getSegments().join(" ")}extends(w){return this===w||this.parent!==null&&this.parent.extends(w)}getExtensionIfDefined(w){const A=[];let m=this;for(;m&&m!==w;)A.push(m.scopeName),m=m.parent;return m===w?A.reverse():void 0}}function S(O,w){return w===O||O.startsWith(w)&&O[w.length]==="."}t.ScopeStack=f;class y{constructor(w,A,m){this.fontStyle=w,this.foregroundId=A,this.backgroundId=m}}function b(O){if(!O)return[];if(!O.settings||!Array.isArray(O.settings))return[];let w=O.settings,A=[],m=0;for(let i=0,h=w.length;i<h;i++){let d,l=w[i];if(!l.settings)continue;if(typeof l.scope=="string"){let v=l.scope;v=v.replace(/^[,]+/,""),v=v.replace(/[,]+$/,""),d=v.split(",")}else d=Array.isArray(l.scope)?l.scope:[""];let g=-1;if(typeof l.settings.fontStyle=="string"){g=0;let v=l.settings.fontStyle.split(" ");for(let T=0,k=v.length;T<k;T++)switch(v[T]){case"italic":g|=1;break;case"bold":g|=2;break;case"underline":g|=4;break;case"strikethrough":g|=8}}let p=null;typeof l.settings.foreground=="string"&&a.isValidHexColor(l.settings.foreground)&&(p=l.settings.foreground);let C=null;typeof l.settings.background=="string"&&a.isValidHexColor(l.settings.background)&&(C=l.settings.background);for(let v=0,T=d.length;v<T;v++){let k=d[v].trim().split(" "),$=k[k.length-1],U=null;k.length>1&&(U=k.slice(0,k.length-1),U.reverse()),A[m++]=new I($,U,i,g,p,C)}}return A}t.StyleAttributes=y,t.parseTheme=b;class I{constructor(w,A,m,i,h,d){this.scope=w,this.parentScopes=A,this.index=m,this.fontStyle=i,this.foreground=h,this.background=d}}t.ParsedThemeRule=I,t.fontStyleToString=function(O){if(O===-1)return"not set";let w="";return 1&O&&(w+="italic "),2&O&&(w+="bold "),4&O&&(w+="underline "),8&O&&(w+="strikethrough "),w===""&&(w="none"),w.trim()};class E{constructor(w){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(w)){this._isFrozen=!0;for(let A=0,m=w.length;A<m;A++)this._color2id[w[A]]=A,this._id2color[A]=w[A]}else this._isFrozen=!1}getId(w){if(w===null)return 0;w=w.toUpperCase();let A=this._color2id[w];if(A)return A;if(this._isFrozen)throw new Error(`Missing color in color map - ${w}`);return A=++this._lastColorId,this._color2id[w]=A,this._id2color[A]=w,A}getColorMap(){return this._id2color.slice(0)}}t.ColorMap=E;const x=Object.freeze([]);class R{constructor(w,A,m,i,h){this.scopeDepth=w,this.parentScopes=A||x,this.fontStyle=m,this.foreground=i,this.background=h}clone(){return new R(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(w){let A=[];for(let m=0,i=w.length;m<i;m++)A[m]=w[m].clone();return A}acceptOverwrite(w,A,m,i){this.scopeDepth>w?console.log("how did this happen?"):this.scopeDepth=w,A!==-1&&(this.fontStyle=A),m!==0&&(this.foreground=m),i!==0&&(this.background=i)}}t.ThemeTrieElementRule=R;class P{constructor(w,A=[],m={}){this._mainRule=w,this._children=m,this._rulesWithParentScopes=A}static _cmpBySpecificity(w,A){if(w.scopeDepth!==A.scopeDepth)return A.scopeDepth-w.scopeDepth;let m=0,i=0;for(;w.parentScopes[m]===">"&&m++,A.parentScopes[i]===">"&&i++,!(m>=w.parentScopes.length||i>=A.parentScopes.length);){const h=A.parentScopes[i].length-w.parentScopes[m].length;if(h!==0)return h;m++,i++}return A.parentScopes.length-w.parentScopes.length}match(w){if(w!==""){let m,i,h=w.indexOf(".");if(h===-1?(m=w,i=""):(m=w.substring(0,h),i=w.substring(h+1)),this._children.hasOwnProperty(m))return this._children[m].match(i)}const A=this._rulesWithParentScopes.concat(this._mainRule);return A.sort(P._cmpBySpecificity),A}insert(w,A,m,i,h,d){if(A==="")return void this._doInsertHere(w,m,i,h,d);let l,g,p,C=A.indexOf(".");C===-1?(l=A,g=""):(l=A.substring(0,C),g=A.substring(C+1)),this._children.hasOwnProperty(l)?p=this._children[l]:(p=new P(this._mainRule.clone(),R.cloneArr(this._rulesWithParentScopes)),this._children[l]=p),p.insert(w+1,g,m,i,h,d)}_doInsertHere(w,A,m,i,h){if(A!==null){for(let d=0,l=this._rulesWithParentScopes.length;d<l;d++){let g=this._rulesWithParentScopes[d];if(a.strArrCmp(g.parentScopes,A)===0)return void g.acceptOverwrite(w,m,i,h)}m===-1&&(m=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),h===0&&(h=this._mainRule.background),this._rulesWithParentScopes.push(new R(w,A,m,i,h))}else this._mainRule.acceptOverwrite(w,m,i,h)}}t.ThemeTrieElement=P},878:(u,t)=>{function c(f){return Array.isArray(f)?function(S){let y=[];for(let b=0,I=S.length;b<I;b++)y[b]=c(S[b]);return y}(f):typeof f=="object"?function(S){let y={};for(let b in S)y[b]=c(S[b]);return y}(f):f}Object.defineProperty(t,"__esModule",{value:!0}),t.performanceNow=t.CachedFn=t.escapeRegExpCharacters=t.isValidHexColor=t.strArrCmp=t.strcmp=t.RegexSource=t.basename=t.mergeObjects=t.clone=void 0,t.clone=function(f){return c(f)},t.mergeObjects=function(f,...S){return S.forEach(y=>{for(let b in y)f[b]=y[b]}),f},t.basename=function f(S){const y=~S.lastIndexOf("/")||~S.lastIndexOf("\\");return y===0?S:~y==S.length-1?f(S.substring(0,S.length-1)):S.substr(1+~y)};let a=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function _(f,S){return f<S?-1:f>S?1:0}t.RegexSource=class{static hasCaptures(f){return f!==null&&(a.lastIndex=0,a.test(f))}static replaceCaptures(f,S,y){return f.replace(a,(b,I,E,x)=>{let R=y[parseInt(I||E,10)];if(!R)return b;{let P=S.substring(R.start,R.end);for(;P[0]===".";)P=P.substring(1);switch(x){case"downcase":return P.toLowerCase();case"upcase":return P.toUpperCase();default:return P}}})}},t.strcmp=_,t.strArrCmp=function(f,S){if(f===null&&S===null)return 0;if(!f)return-1;if(!S)return 1;let y=f.length,b=S.length;if(y===b){for(let I=0;I<y;I++){let E=_(f[I],S[I]);if(E!==0)return E}return 0}return y-b},t.isValidHexColor=function(f){return!!(/^#[0-9a-f]{6}$/i.test(f)||/^#[0-9a-f]{8}$/i.test(f)||/^#[0-9a-f]{3}$/i.test(f)||/^#[0-9a-f]{4}$/i.test(f))},t.escapeRegExpCharacters=function(f){return f.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},t.CachedFn=class{constructor(f){this.fn=f,this.cache=new Map}get(f){if(this.cache.has(f))return this.cache.get(f);const S=this.fn(f);return this.cache.set(f,S),S}},t.performanceNow=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()}}},o={};return function u(t){var c=o[t];if(c!==void 0)return c.exports;var a=o[t]={exports:{}};return s[t].call(a.exports,a,a.exports,u),a.exports}(787)})())})(main);var mainExports=main.exports;function applyStyle(e,n,s){let o;createRenderEffect(()=>{var u;const t=(u=n.style)==null?void 0:u[s];t!==o&&((o=t)!=null?e.style.setProperty(s,typeof t>"u"?null:t.toString()):e.style.removeProperty(s))})}function hexToRgb(e){let n=parseInt(e.slice(1),16),s=n>>16&255,o=n>>8&255,u=n&255;return[s,o,u]}function luminance(e,n,s){const o=[e,n,s].map(u=>(u/=255,u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4)));return o[0]*.2126+o[1]*.7152+o[2]*.0722}function once(e,n,s){const o=typeof e=="function"?e():e;return o?n(o):s?s():void 0}function when(e,n,s){return()=>once(e,n,s)}function every(...e){function n(){const s=new Array(e.length);for(let o=0;o<e.length;o++){const u=typeof e[o]=="function"?e[o]():e[o];if(!u)return;s[o]=u}return s}return n}function countDigits(e){return e===0?1:Math.floor(Math.log10(Math.abs(e)))+1}function escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getLongestLineSize(e){let n=0;for(const s of e)s.length>n&&(n=s.length);return n}class Stack{constructor(){__privateAdd(this,_array,[])}peek(){return __privateGet(this,_array)[__privateGet(this,_array).length-1]}push(n){__privateGet(this,_array).push(n)}pop(){return __privateGet(this,_array).pop()}}_array=new WeakMap;var _tmpl$$1=template("<pre part=line>"),_tmpl$2=template("<div part=root><code part=code></code><textarea part=textarea autocomplete=off inputmode=none></textarea><code aria-hidden>&nbsp;");const SEGMENT_SIZE=100,WINDOW=50,TOKENIZER_CACHE={},REGISTRY=new mainExports.Registry({onigLib:oniguruma,loadGrammar:e=>fetchFromCDN("grammar",e).then(n=>(n.scopeName=e,n))}),[WASM_LOADED]=createRoot(()=>createResource(async()=>fetch(urlFromCDN("oniguruma",null)).then(e=>e.arrayBuffer()).then(e=>mainExports$1.loadWASM(e)).then(()=>!0)));class ThemeManager{constructor(n){__publicField(this,"themeData"),__privateAdd(this,_scopes,{}),this.themeData=n}resolveScope(n){const s=n.join("-");if(__privateGet(this,_scopes)[s])return __privateGet(this,_scopes)[s];let o={};for(let u=0;u<n.length;u++){const t=n[u];for(const c of this.themeData.tokenColors){const a=Array.isArray(c.scope)?c.scope:[c.scope];for(const _ of a)t.startsWith(_||"")&&(o={...o,...c.settings})}}return __privateGet(this,_scopes)[s]=o}getBackgroundColor(){var n;return((n=this.themeData.colors)==null?void 0:n["editor.background"])||void 0}getForegroundColor(){var n;return((n=this.themeData.colors)==null?void 0:n["editor.foreground"])||void 0}}_scopes=new WeakMap;function compareStacks(e,n){let s=!1;return e===n?!0:!e||!n?!1:(e.ruleId!==n.ruleId&&(s=!0),e.depth!==n.depth&&(s=!0),compareScopes(e.nameScopesList,n.nameScopesList)||(s=!0),compareScopes(e.contentNameScopesList,n.contentNameScopesList)||(s=!0),!s)}function compareScopes(e,n){var s,o;return!e&&!n?!0:!(!e||!n||((s=e.scopePath)==null?void 0:s.scopeName)!==((o=n.scopePath)==null?void 0:o.scopeName)||e.tokenAttributes!==n.tokenAttributes)}const TmTextareaContext=createContext(null);function useTmTextarea(){const e=useContext(TmTextareaContext);if(!e)throw"useTextarea should be used in a descendant of TmTextarea";return e}function createTmTextarea(e){function n(s){const o=useTmTextarea(),u=o.segments.peek(),[t,c]=createSignal(u?.stack||mainExports.INITIAL,{equals:compareStacks}),a=s.index*SEGMENT_SIZE,_=a+SEGMENT_SIZE,f=createLazyMemo(when(every(()=>o.tokenizer,()=>o.theme),([S,y])=>{let b=u?.stack||mainExports.INITIAL;const I=o.lines.slice(a,_).map(E=>{const{ruleStack:x,tokens:R}=S.tokenizeLine(E,b);return b=x,R.map(P=>{const O=y.resolveScope(P.scopes),w=E.slice(P.startIndex,P.endIndex);return`<span style="${O.foreground?`color:${O.foreground};`:""}${O.fontStyle?`text-decoration:${O.fontStyle}`:""}">${escapeHTML(w)}</span>`}).join("")});return c(b),I},()=>o.lines.slice(a,_).map(escapeHTML)));return o.segments.push({get stack(){return t()}}),onCleanup(()=>o.segments.pop()),createComponent(Show,{get when(){return o.isSegmentVisible(s.index*SEGMENT_SIZE)},get children(){return createComponent(For,{get each(){return f()},children:(S,y)=>createComponent(Show,{get when(){return o.isVisible(s.index*SEGMENT_SIZE+y())},get children(){var b=_tmpl$$1();return b.innerHTML=S,createRenderEffect(I=>{var E=e.line,x=s.index*SEGMENT_SIZE+y();return E!==I.e&&className(b,I.e=E),x!==I.t&&((I.t=x)!=null?b.style.setProperty("--tm-line-number",x):b.style.removeProperty("--tm-line-number")),I},{e:void 0,t:void 0}),b}})})}})}return function(o){const[u,t]=splitProps(mergeProps({editable:!0},o),["class","grammar","onInput","value","style","theme","editable","onScroll","textareaRef"]),[c,a]=splitProps(t,["onKeyDown","onKeyPress","onKeyUp","onChange"]);let _;const[f,S]=createSignal(),[y,b]=createSignal(),[I,E]=createSignal(0),[x,R]=createSignal(o.value),[P]=createResource(every(()=>o.grammar,WASM_LOADED),async([p])=>p in TOKENIZER_CACHE?TOKENIZER_CACHE[p]:TOKENIZER_CACHE[p]=await REGISTRY.loadGrammar(p)),[O]=createResource(()=>o.theme,async p=>fetchFromCDN("theme",p).then(C=>new ThemeManager(C))),w=createMemo(()=>x().split(`
`)),A=createMemo(()=>getLongestLineSize(w())),m=createMemo(()=>{var p;return Math.floor(I()/(((p=f())==null?void 0:p.height)||1))}),i=createMemo(()=>{var p,C;return Math.floor((I()+(((p=y())==null?void 0:p.height)||0))/(((C=f())==null?void 0:C.height)||1))}),h=createMemo(()=>Math.floor(m()/SEGMENT_SIZE)),d=createMemo(()=>Math.ceil(i()/SEGMENT_SIZE)),l=when(O,p=>{const C=p.getBackgroundColor(),v=luminance(...hexToRgb(C));return`rgba(98, 114, 164, ${v>.9?.1:v<.1?.25:.175})`}),g=when(()=>u.style,p=>splitProps(p,["width","height"])[1]);return onMount(()=>new ResizeObserver(([p])=>b(p?.contentRect)).observe(_)),createRenderEffect(()=>R(o.value)),createRenderEffect(()=>{var p;return console.log((p=O())==null?void 0:p.getForegroundColor())}),createComponent(TmTextareaContext.Provider,{get value(){return{get viewport(){return y()},get character(){return f()},get scrollTop(){return I()},get lines(){return w()},get theme(){return O()},get tokenizer(){return P()},segments:new Stack,isVisible:createSelector(()=>[m(),i()],(p,[C,v])=>p>w().length-1?!1:p+WINDOW>C&&p-WINDOW<v),isSegmentVisible:createSelector(()=>[h(),d()],p=>{const C=Math.floor((p-WINDOW)/SEGMENT_SIZE),v=Math.ceil((p+WINDOW)/SEGMENT_SIZE);return C<=h()&&v>=d()||C>=h()&&C<=d()||v>=h()&&v<=d()})}},get children(){var p=_tmpl$2(),C=p.firstChild,v=C.nextSibling,T=v.nextSibling;p.addEventListener("scroll",$=>{var U;E($.currentTarget.scrollTop),(U=o.onScroll)==null||U.call(o,$)}),use($=>{_=$,applyStyle($,o,"width"),applyStyle($,o,"height")},p),spread(p,mergeProps({get class(){return clsx(e.container,u.class)},get style(){var $,U,z,W;return{"--tm-background-color":($=O())==null?void 0:$.getBackgroundColor(),"--tm-char-height":`${((U=f())==null?void 0:U.height)||0}px`,"--tm-char-width":`${((z=f())==null?void 0:z.width)||0}px`,"--tm-foreground-color":(W=O())==null?void 0:W.getForegroundColor(),"--tm-line-count":w().length,"--tm-line-size":A(),"--tm-selection-color":l(),"--tm-line-digits":countDigits(w().length),...g()}}},a),!1,!0),insert(C,createComponent(Index,{get each(){return Array.from({length:Math.ceil(w().length/SEGMENT_SIZE)})},children:($,U)=>createComponent(n,{index:U})})),v.addEventListener("scroll",$=>{$.preventDefault(),$.stopPropagation()});var k=u.textareaRef;return typeof k=="function"?use(k,v):u.textareaRef=v,setAttribute(v,"spellcheck",!1),v.addEventListener("input",$=>{var U;const W=$.currentTarget.value;R(W),(U=u.onInput)==null||U.call(u,$)}),spread(v,mergeProps({get class(){return e.textarea},get disabled(){return!u.editable},get value(){return u.value},get rows(){return w().length}},c),!1,!1),use($=>{new ResizeObserver(([U])=>{const{height:z,width:W}=getComputedStyle(U.target);S({height:Number(z.replace("px","")),width:Number(W.replace("px",""))})}).observe($)},T),createRenderEffect($=>{var U=e.code,z=e.character;return U!==$.e&&className(C,$.e=U),z!==$.t&&className(T,$.t=z),$},{e:void 0,t:void 0}),p}})}}const container="index-module__container___GdQY1",code="index-module__code___B9PCM",line="index-module__line___n1EGr",character="index-module__character___mhd0f",textarea$1="index-module__textarea___cMW-q",styles$1={container,code,line,character,textarea:textarea$1},TmTextarea=createTmTextarea(styles$1),app="_app_jbdu8_6",custom="_custom_jbdu8_17",dirEnt="_dirEnt_jbdu8_29",textarea="_textarea_jbdu8_45",input="_input_jbdu8_49",styles={app,default:"_default_jbdu8_13",custom,dirEnt,textarea,input};var _tmpl$=template(`<input placeholder="p.ex fs.writeFile('test2.ts', 'Hello World!')">`);const App=()=>{const[selected,setSelected]=createSignal("index0.ts"),fs=createFileSystem();function mockData(e){if(!(e.length>5)){fs.mkdir(e.join("/"));for(let n=0;n<Math.floor(Math.random()*3);n++){const s=`${e.join("/")}/index${n}.ts`;fs.writeFile(s,`export const value = 'Hello World from ${s}'`)}for(let n=0;n<Math.floor(Math.random()*3+1);n++)mockData([...e,"test"+n])}}mockData(["test"]);for(let e=0;e<3;e++){const n=`index${e}.ts`;fs.writeFile(n,`export const value = 'Hello World from ${n}'`)}const grammar=()=>{const e=selected();return e?.endsWith("css")?"css":e?.endsWith("html")?"html":"tsx"};return createComponent(Split,{get class(){return styles.app},get children(){return[createComponent(Split.Pane,{size:"175px",get children(){return createComponent(FileTree,{fs,get class(){return styles.custom},onSelection:e=>console.log("onSelection",e),children:e=>{const[n,s]=createSignal(!1);return createComponent(FileTree.DirEnt,{get class(){return styles.dirEnt},get style(){return{background:e.selected?"#484f6c":"none"}},onMouseDown:()=>{e.type==="file"&&setSelected(e.path)},onDblClick:()=>s(!0),onKeyDown:o=>{o.code==="Enter"&&s(u=>!u),o.code==="Space"&&(e.type==="dir"?e.opened?e.close():e.open():setSelected(e.path))},get children(){return[createComponent(FileTree.IndentGuides,{guide:()=>createComponent(DefaultIndentGuide,{color:"white",width:15})}),createComponent(FileTree.Opened,{closed:"-",opened:"+",style:{width:"15px","text-align":"center"}}),createComponent(FileTree.Name,{get editable(){return n()},get style(){return{"margin-left":e.type==="file"?"7.5px":void 0}},onBlur:()=>s(!1)})]}})}})}}),createComponent(Split.Handle,{size:"5px",style:{background:"lightgrey",cursor:"ew-resize"}}),createComponent(Split.Pane,{size:"1fr",style:{display:"grid","grid-template-rows":"1fr auto"},get children(){return[createComponent(TmTextarea,{get value(){return createMemo(()=>!!selected())()?fs.readFile(selected()):""},get grammar(){return grammar()},get class(){return styles.textarea},theme:"andromeeda",onInput:e=>fs.writeFile(selected(),e.currentTarget.value)}),(()=>{var _el$=_tmpl$();return _el$.$$keydown=event=>{event.code==="Enter"&&(eval(event.currentTarget.value),event.currentTarget.value="")},createRenderEffect(()=>className(_el$,styles.input)),_el$})()]}})]}})};delegateEvents(["keydown"]);render(()=>createComponent(App,{}),document.getElementById("root"));
